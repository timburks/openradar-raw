apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "32355534"
    labels:
        datastore_id: "5011331686072320"
data:
    classification: Other Bug
    created: "2017-05-23T19:49:02.42048Z"
    description: "Summary:\r\nWhen using a UITextField whose inputAssistantItem won't contain any autocorrection suggestions (either it's a secure text field or it's autocorrectionType is set to UIAutoCorrectionTypeNo) it breaks auto-layout constraints after entering the background then entering the foreground again (hitting the home button and re-launching the application)\r\n\r\nSteps to Reproduce:\r\n* Run the sample app (single view application with one textfield) on an iPad.\r\n* Hit the home button.\r\n* Launch the sample app again.\r\n\r\nSample project is a vanilla single view app with one IBOutlet UITextField, this code is in the ViewController:\r\n\r\n- (void)viewDidLoad {\r\n    [super viewDidLoad];\r\n    self.aTextField.autocorrectionType = UITextAutocorrectionTypeNo;\r\n}\r\n\r\n- (void)viewDidAppear:(BOOL)animated {\r\n    [super viewDidAppear:animated];\r\n    [self.aTextField becomeFirstResponder];\r\n}\r\n\r\n\r\n\r\nExpected Results:\r\nNo breaking of auto-layout constraints associated with the UIButtonBarStackView in the inputAssistantItem.\r\n\r\nObserved Results:\r\nBreaking of auto-layout constraint associated with the UIButtonBarStackView in the inputAssistantItem with the following log:\r\n\r\nTestKeyboardAssistant[37264:1029080] [LayoutConstraints] Unable to simultaneously satisfy constraints.\r\n\tProbably at least one of the constraints in the following list is one you don't want. \r\n\tTry this: \r\n\t\t(1) look at each constraint and try to figure out which you don't expect; \r\n\t\t(2) find the code that added the unwanted constraint or constraints and fix it. \r\n(\r\n    \"<NSLayoutConstraint:0x618000092980 _UIButtonBarStackView:0x7fcf05c0af40.width <= 0   (active)>\",\r\n    \"<NSLayoutConstraint:0x6180000924d0 'UIView-leftMargin-guide-constraint' H:|-(15)-[UILayoutGuide:0x618000195470'UIViewLayoutMarginsGuide'](LTR)   (active, names: '|':_UIButtonBarStackView:0x7fcf05c0af40 )>\",\r\n    \"<NSLayoutConstraint:0x618000092570 'UIView-rightMargin-guide-constraint' H:[UILayoutGuide:0x618000195470'UIViewLayoutMarginsGuide']-(15)-|(LTR)   (active, names: '|':_UIButtonBarStackView:0x7fcf05c0af40 )>\"\r\n)\r\n\r\nWill attempt to recover by breaking constraint \r\n<NSLayoutConstraint:0x618000092570 'UIView-rightMargin-guide-constraint' H:[UILayoutGuide:0x618000195470'UIViewLayoutMarginsGuide']-(15)-|(LTR)   (active, names: '|':_UIButtonBarStackView:0x7fcf05c0af40 )>\r\n\r\nMake a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.\r\nThe methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.\r\n2017-05-23 13:37:20.184961-0400 TestKeyboardAssistant[37264:1029080] [LayoutConstraints] Unable to simultaneously satisfy constraints.\r\n\tProbably at least one of the constraints in the following list is one you don't want. \r\n\tTry this: \r\n\t\t(1) look at each constraint and try to figure out which you don't expect; \r\n\t\t(2) find the code that added the unwanted constraint or constraints and fix it. \r\n(\r\n    \"<NSLayoutConstraint:0x6180000929d0 _UIButtonBarStackView:0x7fcf05c0a780.width <= 0   (active)>\",\r\n    \"<NSLayoutConstraint:0x6180000917b0 'UIView-leftMargin-guide-constraint' H:|-(15)-[UILayoutGuide:0x618000195af0'UIViewLayoutMarginsGuide'](LTR)   (active, names: '|':_UIButtonBarStackView:0x7fcf05c0a780 )>\",\r\n    \"<NSLayoutConstraint:0x6180000918f0 'UIView-rightMargin-guide-constraint' H:[UILayoutGuide:0x618000195af0'UIViewLayoutMarginsGuide']-(15)-|(LTR)   (active, names: '|':_UIButtonBarStackView:0x7fcf05c0a780 )>\"\r\n)\r\n\r\nWill attempt to recover by breaking constraint \r\n<NSLayoutConstraint:0x6180000918f0 'UIView-rightMargin-guide-constraint' H:[UILayoutGuide:0x618000195af0'UIViewLayoutMarginsGuide']-(15)-|(LTR)   (active, names: '|':_UIButtonBarStackView:0x7fcf05c0a780 )>\r\n\r\nMake a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.\r\nThe methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful.\r\n\r\nNotes:\r\nThis open radar could be related: https://openradar.appspot.com/25825137\r\n\r\nConfiguration:\r\nThis occurs in 2 scenarios:\r\n\r\n1.  The textfield has it's autocorrectionType set to UITextAutoCorrectionTypeNo.\r\n2.  The textfield is a Secure TextField.\r\n\r\nIn both cases the center UIButtonBarStackView would be empty (contain no autocorrect suggestions).  I suspect this may be the cause of the auto-layout issues.\r\n\r\nThe issue isn't present when you either disable the inputAssistantItem by setting the leading/trailing BarButtonGroups to an empty array or use a textfield with auto-correction enabled."
    email: mmoore@zetetic.net
    modified: "2017-05-23T19:59:26.83584Z"
    number: "32355534"
    number_intvalue: 32355534
    originated: May 23 2017
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK
    product_version: iOS 10.3 (14E269)
    reproducible: Always
    resolved: ""
    status: Open
    title: Broken Auto-layout of UIButtonBarStackView within inputAssistantItem of UITextField
