apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "33774557"
    labels:
        datastore_id: "6650431463751680"
data:
    classification: Bug
    created: "2017-08-09T08:47:43.03967Z"
    description: "Area:\r\nUIKit\r\n\r\nSummary:\r\nSwiftC commands fail because \"warning: 'UIDocumentBrowserViewController' is partial: introduced in iOS 11.0\" when target is set < iOS 11.\r\n\r\nSteps to Reproduce:\r\ncd $(mktemp -d)\r\necho \"import UIKit\" > test.swift\r\n/Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -frontend -sdk /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk -target x86_64-apple-ios8.0 -c -o . -parse-as-library -module-cache-path ModuleCache test.swift -F /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks\r\n\r\nExpected Results:\r\nBuilds always succeed\r\n\r\nObserved Results:\r\nBuilds fail the first time and succeed the second\r\n\r\n```\r\nmodule-includes>:1:9: note: in file included from <module-includes>:1:\r\n#import \"Headers/UIKit.h\"\r\n        ^\r\n/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:267:9: note: in file included from /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Headers/UIKit.h:267:\r\n#import <DocumentManager/DocumentManager.h>\r\n        ^\r\n/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Frameworks/DocumentManager.framework/Headers/DocumentManager.h:10:9: note: in file included from /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Frameworks/DocumentManager.framework/Headers/DocumentManager.h:10:\r\n#import <DocumentManager/UIDocumentBrowserViewController.h>\r\n        ^\r\n/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Frameworks/DocumentManager.framework/Headers/UIDocumentBrowserViewController.h:105:26: error: 'UIDocumentBrowserViewController' is partial: introduced in iOS 11.0\r\n- (void)documentBrowser:(UIDocumentBrowserViewController *)controller didPickDocumentURLs:(NSArray <NSURL *> *)documentURLs;\r\n                         ^\r\n/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Frameworks/DocumentManager.framework/Headers/UIDocumentBrowserViewController.h:39:12: note: 'UIDocumentBrowserViewController' has been explicitly marked partial here\r\n@interface UIDocumentBrowserViewController : UIViewController <NSCoding>\r\n           ^\r\n/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Frameworks/DocumentManager.framework/Headers/UIDocumentBrowserViewController.h:105:1: note: annotate 'documentBrowser:didPickDocumentURLs:' with an availability attribute to silence\r\n- (void)documentBrowser:(UIDocumentBrowserViewController *)controller didPickDocumentURLs:(NSArray <NSURL *> *)documentURLs;\r\n^\r\n```\r\n\r\nVersion:\r\nXcode 9 beta 5\r\n\r\nNotes:\r\nNote that if you remove the \"-F /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks\" part of the swiftc command, the compilation would succeed on the first try.\r\n\r\nChanging the header in question to add the availability macro makes the issue go away:\r\n--- a/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Frameworks/DocumentManager.framework/Headers/UIDocumentBrowserViewController.h\r\n+++ b/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Frameworks/DocumentManager.framework/Headers/UIDocumentBrowserViewController.h\r\n@@ -95,7 +95,8 @@ API_AVAILABLE(ios(11.0)) __TVOS_UNAVAILABLE\r\n\r\n\r\n#pragma mark -\r\n-__TVOS_UNAVAILABLE @protocol UIDocumentBrowserViewControllerDelegate <NSObject>\r\n+API_AVAILABLE(ios(11.0)) __TVOS_UNAVAILABLE\r\n+@protocol UIDocumentBrowserViewControllerDelegate <NSObject>\r\n\r\n@optional"
    email: robbert@uber.com
    modified: "2017-12-19T10:41:02.78112Z"
    number: "33774557"
    number_intvalue: 33774557
    originated: August 8 2017
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK
    product_version: Xcode 9 beta 5
    reproducible: Always
    resolved: Xcode 9
    status: Resolved
    title: UIDocumentBrowserViewController.h missing API_AVAILABLE(ios(11.0)) for UIDocumentBrowserViewControllerDelegate
