apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "34554492"
    labels:
        datastore_id: "5054233007095808"
data:
    classification: ""
    created: "2017-10-13T16:35:33.20149Z"
    description: "Area:\r\nSomething not on this list\r\n\r\nSummary:\r\nRunning 10.13 Beta (17A362a), when we plug in either our Arctis 5 or Arctis 7 headset, we are not able to see or use the chat endpoint, which is used for microphone. This issue did not exist in Sierra or earlier versions. We have a number of users that have also installed High Sierra Beta and are seeing the same issue.\r\n\r\nSteps to Reproduce:\r\nSimply plug in a SteelSeries Arctis 5 or Arctis 7 headset and open System preferences to switch output and input.\r\n\r\nExpected Results:\r\nThe output tab should show a Game endpoint and a Chat endpoint. The input tab should show the Chat endpoint.\r\n\r\nActual Results:\r\nThe output tab only shows the Game endpoint but no Chat endpoint. The input tab also does not show the Chat endpoint.\r\n\r\nVersion/Build:\r\n10.13 Beta (17A362a)\r\n\r\n----------------------------------------------------------------------------------------------------\r\n\r\nSeptember 26 2017, 1:33 PM\r\nIssue persists with public version 10.13 (17A365).\r\n\r\nI have found multiple coreaudio crash reports in Console. It seems to crash every time I plug in either the Arctis 5 or Arctis 7 headset. Note that these headsets have multiple endpoints. I'm attaching the last couple coreaudio crashes here as well.\r\n\r\n----------------------------------------------------------------------------------------------------\r\n\r\nSeptember 27 2017, 2:19 PM\r\nI've downloaded and installed macOS 10.13.1 Beta (17B25c), and the issue persists. I'm attaching yet another coreaudiod crash report from this version. This issue is affecting many of our macOS users who have updated to High Sierra.\r\n\r\n----------------------------------------------------------------------------------------------------\r\n\r\nOctober 5 2017, 11:36 AM\r\nOn latest macOS 10.13.1 Beta (17B25c), I've notice in the Console the following every time we plug in any of the headsets mentioned above:\r\n\r\n\r\nerror\t11:16:23.887039 -0500\tcoreaudiod\tHALS_IOA1Manager.cpp:171:_AddDevice: HALS_IOA1Manager::_AddDevice: Cannot add an interest callback., Error: 0xE00002C7\r\ndefault\t11:16:23.886068 -0500\tkernel\t- IOAudioEngine[ ]::setNumSampleFramesPerBuffer(0x4000)\r\ndefault\t11:16:23.886436 -0500\tkernel\tUSB Sound assertion (Couldn't get the endpoint direction!) in /BuildRoot/Library/Caches/com.apple.xbs/Sources/AppleUSBAudio/AppleUSBAudio-310.35/AppleUSBAudioStream.cpp at line 2744\r\nerror\t11:16:23.887415 -0500\tcoreaudiod\tHALB_UCObject.cpp:699:OpenConnection: HALB_UCObject::OpenConnection: failed to open a connection, Error: 0xE00002C0\r\ndefault\t11:16:23.886447 -0500\tkernel\tUSB Sound assertion in /BuildRoot/Library/Caches/com.apple.xbs/Sources/AppleUSBAudio/AppleUSBAudio-310.35/AppleUSBAudioStream.cpp at line 2745\r\ndefault\t11:16:23.886456 -0500\tkernel\tUSB Sound assertion in /BuildRoot/Library/Caches/com.apple.xbs/Sources/AppleUSBAudio/AppleUSBAudio-310.35/AppleUSBAudioEngine.cpp at line 1354\r\ndefault\t11:16:23.886463 -0500\tkernel\t+ IOAudioEngine[ ]::stop( )\r\ndefault\t11:16:23.886465 -0500\tkernel\t+ IOAudioEngine[ ]::detachUserClients\r\ndefault\t11:16:23.886466 -0500\tkernel\t!isInactive ()\r\nerror\t11:16:23.887690 -0500\tcoreaudiod\tCADispatchQueue.cpp:95:~CADispatchQueue: CADispatchQueue::~CADispatchQueue: Implicitly removing the mach port receviers. It is best to explicitly call RemoveMachPortRecevier().\r\ndefault\t11:16:23.886469 -0500\tkernel\twill invoke iterator->release ()\r\ndefault\t11:16:23.886471 -0500\tkernel\tcompleted iterator->release ()\r\ndefault\t11:16:23.886484 -0500\tkernel\twill invoke userClients->flushCollection ()\r\ndefault\t11:16:23.886487 -0500\tkernel\tcompleted userClients->flushCollection ()\r\ndefault\t11:16:23.886491 -0500\tkernel\t- IOAudioEngine[ ]::detachUserClients returns 0x0\r\ndefault\t11:16:23.886496 -0500\tkernel\t+- IOAudioEngine::detachUserClientsAction( , 0x0, 0x0, 0x0, 0x0) returns 0x0\r\ndefault\t11:16:23.886498 -0500\tkernel\t+ IOAudioEngine[ ]::stopAudioEngine()\r\ndefault\t11:16:23.886501 -0500\tkernel\t- IOAudioEngine[ ]::stopAudioEngine() returns 0x0\r\ndefault\t11:16:23.886503 -0500\tkernel\t+ IOAudioEngine[ ]::detachAudioStreams()\r\ndefault\t11:16:23.886506 -0500\tkernel\t- IOAudioEngine[ ]::detachAudioStreams()\r\ndefault\t11:16:23.886508 -0500\tkernel\t+ IOAudioEngine[ ]::removeAllDefaultAudioControls()\r\ndefault\t11:16:23.886510 -0500\tkernel\t- IOAudioEngine[ ]::removeAllDefaultAudioControls()\r\ndefault\t11:16:23.886512 -0500\tkernel\tcompleted removeEventSource ( ... )\r\ndefault\t11:16:23.886515 -0500\tkernel\tcompleted release ()\r\n\r\n\r\nFrom the looks of it, AppleUSBAudio is having trouble figuring out the endpoint's direction. Maybe this is why the headset's \"Chat\" endpoint isn't showing up in Sound Preferences.\r\n\r\n----------------------------------------------------------------------------------------------------\r\n\r\nApple Developer Relations\r\nOctober 7 2017, 4:38 AM\r\n\r\nEngineering has determined that your bug report is a duplicate of another issue and will be closed. \r\n\r\nThe open or closed status of the original report your bug was duplicated to appears in a text box within the bug detail section of the bug reporter user interface. For security and privacy reasons, we don't provide access to the original bug yours was duped to.\r\n\r\n----------------------------------------------------------------------------------------------------\r\n\r\nOctober 19 2017, 10:58 AM\r\nRecently installed macOS High Sierra 10.13.1 (17B42a) Beta 3 and issue with the chat audio endpoint persists. Here's what Console logs after plugging in the headset:\r\n\r\ndefault\t10:51:17.700436 -0500\tkernel\t+ IOAudioEngine[ ]::start( )\r\ndefault\t10:51:17.700438 -0500\tkernel\t+ IOAudioEngine[ ]::start( , )\r\ndefault\t10:51:17.700442 -0500\tkernel\t+-IOAudioEngine[ ]::initHardware( )\r\ndefault\t10:51:17.700504 -0500\tkernel\t+-IOAudioEngine[ ]::setSampleRate( )\r\ndefault\t10:51:17.700511 -0500\tkernel\t+ IOAudioEngine[ ]::setNumSampleFramesPerBuffer(0x4000)\r\ndefault\t10:51:17.700515 -0500\tkernel\t- IOAudioEngine[ ]::setNumSampleFramesPerBuffer(0x4000)\r\ndefault\t10:51:17.700916 -0500\tkernel\tUSB Sound assertion (Couldn't get the endpoint direction!) in /BuildRoot/Library/Caches/com.apple.xbs/Sources/AppleUSBAudio/AppleUSBAudio-310.35/AppleUSBAudioStream.cpp at line 2744\r\ndefault\t10:51:17.700917 -0500\tkernel\t+- IOAudioEngine[ ]::completeConfigurationChange()\r\ndefault\t10:51:17.700934 -0500\tkernel\tUSB Sound assertion in /BuildRoot/Library/Caches/com.apple.xbs/Sources/AppleUSBAudio/AppleUSBAudio-310.35/AppleUSBAudioStream.cpp at line 2745\r\ndefault\t10:51:17.700949 -0500\tkernel\tUSB Sound assertion in /BuildRoot/Library/Caches/com.apple.xbs/Sources/AppleUSBAudio/AppleUSBAudio-310.35/AppleUSBAudioEngine.cpp at line 1354\r\ndefault\t10:51:17.700961 -0500\tkernel\t+ IOAudioEngine[ ]::stop( )\r\ndefault\t10:51:17.700965 -0500\tkernel\t+ IOAudioEngine[ ]::detachUserClients\r\ndefault\t10:51:17.700966 -0500\tkernel\t!isInactive ()\r\ndefault\t10:51:17.700969 -0500\tkernel\twill invoke iterator->release ()\r\ndefault\t10:51:17.700974 -0500\tkernel\tcompleted iterator->release ()\r\ndefault\t10:51:17.700977 -0500\tkernel\twill invoke userClients->flushCollection ()\r\ndefault\t10:51:17.700979 -0500\tkernel\tcompleted userClients->flushCollection ()\r\ndefault\t10:51:17.700983 -0500\tkernel\t- IOAudioEngine[ ]::detachUserClients returns 0x0\r\ndefault\t10:51:17.700988 -0500\tkernel\t+- IOAudioEngine::detachUserClientsAction( , 0x0, 0x0, 0x0, 0x0) returns 0x0\r\ndefault\t10:51:17.700992 -0500\tkernel\t+ IOAudioEngine[ ]::stopAudioEngine()\r\ndefault\t10:51:17.700995 -0500\tkernel\t- IOAudioEngine[ ]::stopAudioEngine() returns 0x0\r\nerror\t10:51:17.701901 -0500\tcoreaudiod\tHALS_IOA1Manager.cpp:171:_AddDevice: HALS_IOA1Manager::_AddDevice: Cannot add an interest callback., Error: 0xE00002C7\r\ndefault\t10:51:17.700997 -0500\tkernel\t+ IOAudioEngine[ ]::detachAudioStreams()\r\ndefault\t10:51:17.701001 -0500\tkernel\t- IOAudioEngine[ ]::detachAudioStreams()\r\ndefault\t10:51:17.701003 -0500\tkernel\t+ IOAudioEngine[ ]::removeAllDefaultAudioControls()\r\ndefault\t10:51:17.701006 -0500\tkernel\t- IOAudioEngine[ ]::removeAllDefaultAudioControls()\r\nerror\t10:51:17.702325 -0500\tcoreaudiod\tHALB_UCObject.cpp:699:OpenConnection: HALB_UCObject::OpenConnection: failed to open a connection, Error: 0x10000003\r\ndefault\t10:51:17.701009 -0500\tkernel\tcompleted removeEventSource ( ... )\r\ndefault\t10:51:17.701022 -0500\tkernel\tcompleted release ()"
    email: samflores23@gmail.com
    modified: "2017-11-13T17:54:46.85058Z"
    number: "34554492"
    number_intvalue: 34554492
    originated: September 20 2017, 2:29 PM
    parent_number: "33985860"
    product: macOS + SDK
    product_version: 10.13 Beta (17A362a)
    reproducible: ""
    resolved: ""
    status: Duplicate/33985860 (Closed)
    title: macOS 10.13 Beta (17A362a) GM Candidate - SteelSeries Arctis 5 headset chat audio endpoint doesn't show up in Sound Preferences
