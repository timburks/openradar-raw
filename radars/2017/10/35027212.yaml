apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "35027212"
    labels:
        datastore_id: "6155110434471936"
data:
    classification: Bug
    created: "2017-10-17T11:26:51.13645Z"
    description: "Area:\r\nXcode\r\n\r\nSummary:\r\nInside a class, there's an NSKeyValueObservation object set up to observe an observable (@objc dynamic) object. If that class is deallocated, on iOS 10, 9 or 8 (at least), it crashes. I have created a sample project below, attached and github link.\r\n\r\nSteps to Reproduce:\r\n- clone this repo https://github.com/viki-org/swift4-kvo-crash-demo\r\n- run on iOS 10 or 9 simulator\r\n- click on red \"Crash button\"\r\n\r\nExpected Results:\r\nNo crash\r\n\r\nActual Results:\r\nSee crash: *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'An instance 0x7f8310624ed0 of class VKVideoSession was deallocated while key value observers were still registered with it. Current observation info:   (\r\n  Context: 0x0, Property: 0x7f83102fa200>\r\n\r\n\r\nVersion/Build:\r\nXcode Version 9.0 (9A235), iPad Air 2 - iOS 9.3 simulator\r\n\r\nConfiguration:"
    email: thongchaikol@gmail.com
    modified: "2017-10-17T11:26:51.13678Z"
    number: "35027212"
    number_intvalue: 35027212
    originated: October 17 2017, 7:25 PM
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK
    product_version: Xcode Version 9.0 (9A235), iPad Air 2 - iOS 9.3 simulator
    reproducible: Always
    resolved: ""
    status: ""
    title: Swift 4 NSKeyValueObservation crash on iOS 10 and below
