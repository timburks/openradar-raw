apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "34271274"
    labels:
        datastore_id: "6126528769294336"
data:
    classification: Security
    created: "2017-09-06T01:45:37.45798Z"
    description: "Summary:\r\nIf, in a dynamic framework, an extension to UIViewController declares a computed property such as `navigationBar`, whose name may collide with a subclass of UIViewController (UINavigationController, in this case), this will cause a crash.\r\n\r\nSteps to Reproduce:\r\n1. make a framework (“CrashKit”), in it, add the following code.\n\nimport UIKit\n\nextension UIViewController {\n    public var navigationBar: UINavigationBar? {\n        return nil\n    }\n}\n\n2. In the same Xcode project, import the framework from step 1 and make a subclass to UINavigationController, present an instance of it. For example:\n\nimport CrashKit\nimport UIKit\n\nopen class XX: UINavigationController {\n    open override func viewDidLoad() {\n        super.viewDidLoad()\n        print(\">>>\", self.navigationBar)\n    }\n}\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n\n    var window: UIWindow?\n\n    func application(_  application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {\n        self.window = UIWindow(frame: UIScreen.main.bounds)\n        let rootVC = XX()\n        self.window?.rootViewController = rootVC\n        self.window?.makeKeyAndVisible()\n        return true\n    }\n}\n\n3. run the project, observe that a crash happens with stack trace similar to this:\n\n2017-09-05 18:34:17.991455-0700 Crash[81376:11788976] -[Crash.XX decodeObjectForKey:]: unrecognized selector sent to instance 0x7f8922823400\n2017-09-05 18:34:18.000151-0700 Crash[81376:11788976] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Crash.XX decodeObjectForKey:]: unrecognized selector sent to instance 0x7f8922823400'\n*** First throw call stack:\n(\n\t0   CoreFoundation                      0x00000001122cf1cb __exceptionPreprocess + 171\n\t1   libobjc.A.dylib                     0x000000010e9a9f41 objc_exception_throw + 48\n\t2   CoreFoundation                      0x000000011234f914 -[NSObject(NSObject) doesNotRecognizeSelector:] + 132\n\t3   UIKit                               0x000000010f1967a5 -[UIResponder doesNotRecognizeSelector:] + 295\n\t4   CoreFoundation                      0x0000000112252178 ___forwarding___ + 1432\n\t5   CoreFoundation                      0x0000000112251b58 _CF_forwarding_prep_0 + 120\n\t6   UIKit                               0x000000010f10eb89 -[UIViewController initWithCoder:] + 311\n\t7   Crash                               0x000000010e0912f2 _T05Crash14ViewControllerCACSgSo7NSCoderC5coder_tcfc + 66\n\t8   Crash                               0x000000010e091544 _T05Crash2XXC11viewDidLoadyyF + 212\n\t9   Crash                               0x000000010e091664 _T05Crash2XXC11viewDidLoadyyFTo + 36\n\t10  UIKit                               0x000000010f113fe7 -[UIViewController loadViewIfRequired] + 1235\n\t11  UIKit                               0x000000010f114434 -[UIViewController view] + 27\n\t12  UIKit                               0x000000010efeaa8b -[UIWindow addRootViewControllerViewIfPossible] + 122\n\t13  UIKit                               0x000000010efeb17d -[UIWindow _setHidden:forced:] + 294\n\t14  UIKit                               0x000000010effe01f -[UIWindow makeKeyAndVisible] + 42\n\t15  Crash                               0x000000010e09228d _T05Crash11AppDelegateC11applicationSbSo13UIApplicationC_s10DictionaryVySC0E16LaunchOptionsKeyVypGSg022didFinishLaunchingWithH0tF + 589\n\t16  Crash                               0x000000010e09250a _T05Crash11AppDelegateC11applicationSbSo13UIApplicationC_s10DictionaryVySC0E16LaunchOptionsKeyVypGSg022didFinishLaunchingWithH0tFTo + 186\n\t17  UIKit                               0x000000010ef70dfa -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 267\n\t18  UIKit                               0x000000010ef72857 -[UIApplication _callInitializationDelegatesForMainScene:transitionContext:] + 4105\n\t19  UIKit                               0x000000010ef77ce5 -[UIApplication _runWithMainScene:transitionContext:completion:] + 1720\n\t20  UIKit                               0x000000010f325118 __111-[__UICanvasLifecycleMonitor_Compatability _scheduleFirstCommitForScene:transition:firstActivation:completion:]_block_invoke + 924\n\t21  UIKit                               0x000000010f6e8e57 +[_UICanvas _enqueuePostSettingUpdateTransactionBlock:] + 153\n\t22  UIKit                               0x000000010f324d11 -[__UICanvasLifecycleMonitor_Compatability _scheduleFirstCommitForScene:transition:firstActivation:completion:] + 249\n\t23  UIKit                               0x000000010f32556f -[__UICanvasLifecycleMonitor_Compatability activateEventsOnly:withContext:completion:] + 668\n\t24  UIKit                               0x000000010fc625b9 __82-[_UIApplicationCanvas _transitionLifecycleStateWithTransitionContext:completion:]_block_invoke + 262\n\t25  UIKit                               0x000000010fc62472 -[_UIApplicationCanvas _transitionLifecycleStateWithTransitionContext:completion:] + 444\n\t26  UIKit                               0x000000010f95f646 __125-[_UICanvasLifecycleSettingsDiffAction performActionsForCanvas:withUpdatedScene:settingsDiff:fromSettings:transitionContext:]_block_invoke + 420\n\t27  UIKit                               0x000000010fb54e0e _performActionsWithDelayForTransitionContext + 100\n\t28  UIKit                               0x000000010f95f442 -[_UICanvasLifecycleSettingsDiffAction performActionsForCanvas:withUpdatedScene:settingsDiff:fromSettings:transitionContext:] + 231\n\t29  UIKit                               0x000000010f6e84b4 -[_UICanvas scene:didUpdateWithDiff:transitionContext:completion:] + 392\n\t30  UIKit                               0x000000010ef76566 -[UIApplication workspace:didCreateScene:withTransitionContext:completion:] + 523\n\t31  UIKit                               0x000000010f529c8b -[UIApplicationSceneClientAgent scene:didInitializeWithEvent:completion:] + 369\n\t32  FrontBoardServices                  0x0000000118b9f374 -[FBSSceneImpl _didCreateWithTransitionContext:completion:] + 338\n\t33  FrontBoardServices                  0x0000000118ba7e69 __56-[FBSWorkspace client:handleCreateScene:withCompletion:]_block_invoke_2 + 235\n\t34  libdispatch.dylib                   0x000000011337643c _dispatch_client_callout + 8\n\t35  libdispatch.dylib                   0x000000011337baf4 _dispatch_block_invoke_direct + 592\n\t36  FrontBoardServices                  0x0000000118bd376e __FBSSERIALQUEUE_IS_CALLING_OUT_TO_A_BLOCK__ + 24\n\t37  FrontBoardServices                  0x0000000118bd3424 -[FBSSerialQueue _performNext] + 464\n\t38  FrontBoardServices                  0x0000000118bd3993 -[FBSSerialQueue _performNextFromRunLoopSource] + 45\n\t39  CoreFoundation                      0x00000001122722b1 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17\n\t40  CoreFoundation                      0x0000000112311d31 __CFRunLoopDoSource0 + 81\n\t41  CoreFoundation                      0x0000000112256c19 __CFRunLoopDoSources0 + 185\n\t42  CoreFoundation                      0x00000001122561ff __CFRunLoopRun + 1279\n\t43  CoreFoundation                      0x0000000112255a89 CFRunLoopRunSpecific + 409\n\t44  GraphicsServices                    0x00000001171179c6 GSEventRunModal + 62\n\t45  UIKit                               0x000000010ef797d0 UIApplicationMain + 159\n\t46  Crash                               0x000000010e092bd7 main + 55\n\t47  libdyld.dylib                       0x00000001133f2d81 start + 1\n\t48  ???                                 0x0000000000000001 0x0 + 1\n)\nlibc++abi.dylib: terminating with uncaught exception of type NSException\n\r\n\r\nExpected Results:\r\nThere shouldn’t be a crash.\r\n\r\nActual Results:\r\nThere’s a crash when `navigationBar` is accessed from an `UINavigationController` subclass.\r\n\r\nVersion:\r\nVersion 9.0 beta 6 (9M214v)\r\n\r\nNotes:\r\nI’ve attached an sample Xcode project that demonstrates it. Just open and run and you’ll see this problem in action."
    email: daniel@duan.ca
    modified: "2017-09-06T01:45:37.45822Z"
    number: "34271274"
    number_intvalue: 34271274
    originated: 05-Sep-2017 06:45 PM
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK
    product_version: Version 9.0 beta 6 (9M214v)
    reproducible: Always
    resolved: ""
    status: Open
    title: Declaring Existing Name in UIViewController extension in Framework Causes Crash
