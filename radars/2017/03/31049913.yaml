apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "31049913"
    labels:
        datastore_id: "4977713433542656"
data:
    classification: Crash/Hang/Data Loss
    created: "2017-03-14T22:59:58.66358Z"
    description: "Xcode sometimes hangs when editing a binding from InterfaceBuilder.\r\n\r\nThis mainly happens when the target application is already running through Xcode, but the crash is actually completely random.\r\n\r\nIt looks like the main threads hangs while trying to auto-complete the \"Model Key Path\" field, on the bindings utility palette.\r\n\r\n--------------------------------------------------------------------------------\r\n\r\nSteps to Reproduce:\r\n\r\nUnfortunately, I've not been able to reproduce the problem on a test project, as it happens randomly.\r\n\r\n--------------------------------------------------------------------------------\r\n\r\nExpected Results:\r\n\r\nThe \"Model Key Path\" field of the bindings utility palette should allow editing, possibly showing auto-completion results from reflected properties.\r\n\r\n--------------------------------------------------------------------------------\r\n\r\nActual Results:\r\n\r\nThe user interface becomes completely unresponsive, with a beach ball. Xcode has to be force-quitted...\r\n\r\n--------------------------------------------------------------------------------\r\n\r\nVersion:\r\n\r\nmacOS 10.12.4 Beta (16E183b) / Xcode 8.2.1 (8C1002)\r\n\r\n--------------------------------------------------------------------------------\r\n\r\nNotes:\r\n\r\nWhile experiencing this issues, I've attached LLDB to the Xcode process to obtain a backtrace of the hanged main thread.\r\nStack trace is attached. Might hopefully help to solve this issue...\r\n\r\n--------------------------------------------------------------------------------\r\n\r\n* thread #1: tid = 0x2660, 0x00007fffaf39a34a libsystem_kernel.dylib`mach_msg_trap + 10, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP\r\n  * frame #0: 0x00007fffaf39a34a libsystem_kernel.dylib`mach_msg_trap + 10\r\n    frame #1: 0x00007fffaf399797 libsystem_kernel.dylib`mach_msg + 55\r\n    frame #2: 0x00007fffaf257b93 libdispatch.dylib`_dispatch_mach_send_and_wait_for_reply + 591\r\n    frame #3: 0x00007fffaf257ff9 libdispatch.dylib`dispatch_mach_send_with_result_and_wait_for_reply + 45\r\n    frame #4: 0x00007fffaf4c65bc libxpc.dylib`xpc_connection_send_message_with_reply_sync + 154\r\n    frame #5: 0x000000010eba15a0 SourceKit`sourcekit_send_request_sync + 96\r\n    frame #6: 0x000000010cde9ba4 IDEFoundation`-[IDESourceKitLowLevelConnection sendRequestSync:] + 112\r\n    frame #7: 0x000000010cde9d48 IDEFoundation`-[IDESourceKitLowLevelConnection sendRequestSync:error:] + 30\r\n    frame #8: 0x000000010cc2eb4f IDEFoundation`-[IDESourceKitWorkspace(RequestMethods) typeSymbolForSymbolAtDocument:docLocation:fileContent:error:] + 583\r\n    frame #9: 0x000000010caf2f2c IDEFoundation`-[IDESourceKitWorkspace typeSymbolForSymbol:withCurrentFileContentDictionary:] + 280\r\n    frame #10: 0x0000000120a4a42b IDEInterfaceBuilderCocoaIntegration`__80-[IBCocoaBindingsSuggestedKeyPathProvider queryIndexForPropertiesInClassSymbol:]_block_invoke + 81\r\n    frame #11: 0x0000000116e7ebba IBFoundation`IBArrayByMappingCollectionWithBehavior + 382\r\n    frame #12: 0x0000000120a4a364 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsSuggestedKeyPathProvider queryIndexForPropertiesInClassSymbol:] + 160\r\n    frame #13: 0x0000000120a4a598 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsSuggestedKeyPathProvider allPropertiesInClassHeirarchyForClassSymbol:] + 93\r\n    frame #14: 0x0000000120a4867f IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsSuggestedKeyPathProvider queryIndexAndCacheAllBindingCompletionItemsInClassNamed:] + 89\r\n    frame #15: 0x0000000120a4b8a3 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsSuggestedKeyPathProvider bindingCompletionItemsForClassNamed:] + 264\r\n    frame #16: 0x0000000120a49525 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsSuggestedKeyPathProvider typeNameForAttributeNamed:inClassNamed:] + 83\r\n    frame #17: 0x0000000120a49415 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsSuggestedKeyPathProvider classNameForResolvedTypeOfKeyPath:fromController:] + 783\r\n    frame #18: 0x0000000120a4bcef IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsSuggestedKeyPathProvider suggestedNextKeysForGivenKeyPath:fromController:] + 297\r\n    frame #19: 0x0000000120a45319 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsInspectorSlice control:textView:completions:forPartialWordRange:indexOfSelectedItem:] + 711\r\n    frame #20: 0x00007fff97dc1dba AppKit`-[NSTextField textView:completions:forPartialWordRange:indexOfSelectedItem:] + 148\r\n    frame #21: 0x0000000120a38951 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsAutocompletingTextFieldEditor displayCompletions] + 135\r\n    frame #22: 0x0000000120a38d58 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsAutocompletingTextFieldEditor didChangeText] + 59\r\n    frame #23: 0x00007fff97942eec AppKit`_NSDoUserReplaceForCharRange + 410\r\n    frame #24: 0x00007fff97942d4c AppKit`_NSDoUserDeleteForCharRange + 38\r\n    frame #25: 0x00007fff979b7ff3 AppKit`-[NSTextView(NSKeyBindingCommands) deleteBackward:] + 576\r\n    frame #26: 0x00007fff977a9687 AppKit`-[NSTextView doCommandBySelector:] + 192\r\n    frame #27: 0x00007fff977a95a1 AppKit`-[NSTextInputContext(NSInputContext_WithCompletion) doCommandBySelector:completionHandler:] + 118\r\n    frame #28: 0x00007fff977871d0 AppKit`-[NSKeyBindingManager(NSKeyBindingManager_MultiClients) interpretEventAsCommand:forClient:] + 2218\r\n    frame #29: 0x00007fff97fc8821 AppKit`__84-[NSTextInputContext _handleEvent:options:allowingSyntheticEvent:completionHandler:]_block_invoke.1096 + 355\r\n    frame #30: 0x00007fff97fc8655 AppKit`__84-[NSTextInputContext _handleEvent:options:allowingSyntheticEvent:completionHandler:]_block_invoke_3 + 80\r\n    frame #31: 0x00007fff9778f329 AppKit`-[NSTextInputContext tryHandleEvent_HasMarkedText_withDispatchCondition:dispatchWork:continuation:] + 93\r\n    frame #32: 0x00007fff97fc85d0 AppKit`__84-[NSTextInputContext _handleEvent:options:allowingSyntheticEvent:completionHandler:]_block_invoke.1086 + 262\r\n    frame #33: 0x00007fff9908989f HIToolbox`__TSMProcessRawKeyEventWithOptionsAndCompletionHandler_block_invoke_5 + 70\r\n    frame #34: 0x00007fff990886e2 HIToolbox`___ZL23DispatchEventToHandlersP14EventTargetRecP14OpaqueEventRefP14HandlerCallRec_block_invoke + 108\r\n    frame #35: 0x00007fff97fc1568 AppKit`__55-[NSTextInputContext handleTSMEvent:completionHandler:]_block_invoke.314 + 2874\r\n    frame #36: 0x00007fff97788c05 AppKit`__55-[NSTextInputContext handleTSMEvent:completionHandler:]_block_invoke_2 + 80\r\n    frame #37: 0x00007fff97788b84 AppKit`-[NSTextInputContext tryHandleTSMEvent_HasMarkedText_withDispatchCondition:dispatchWork:continuation:] + 93\r\n    frame #38: 0x00007fff9778856f AppKit`-[NSTextInputContext handleTSMEvent:completionHandler:] + 2221\r\n    frame #39: 0x00007fff97787c53 AppKit`_NSTSMEventHandler + 321\r\n    frame #40: 0x00007fff9902ed85 HIToolbox`DispatchEventToHandlers(EventTargetRec*, OpaqueEventRef*, HandlerCallRec*) + 1708\r\n    frame #41: 0x00007fff9902dff6 HIToolbox`SendEventToEventTargetInternal(OpaqueEventRef*, OpaqueEventTargetRef*, HandlerCallRec*) + 428\r\n    frame #42: 0x00007fff9902de3f HIToolbox`SendEventToEventTargetWithOptions + 43\r\n    frame #43: 0x00007fff990856d6 HIToolbox`SendTSMEvent_WithCompletionHandler + 408\r\n    frame #44: 0x00007fff99085bb1 HIToolbox`__SendUnicodeTextAEToUnicodeDoc_WithCompletionHandler_block_invoke + 400\r\n    frame #45: 0x00007fff99085a12 HIToolbox`__SendFilterTextEvent_WithCompletionHandler_block_invoke + 215\r\n    frame #46: 0x00007fff99085727 HIToolbox`SendTSMEvent_WithCompletionHandler + 489\r\n    frame #47: 0x00007fff99085511 HIToolbox`SendFilterTextEvent_WithCompletionHandler + 236\r\n    frame #48: 0x00007fff990851d6 HIToolbox`SendUnicodeTextAEToUnicodeDoc_WithCompletionHandler + 284\r\n    frame #49: 0x00007fff99084f8c HIToolbox`__utDeliverTSMEvent_WithCompletionHandler_block_invoke_2 + 296\r\n    frame #50: 0x00007fff99084e32 HIToolbox`__utDeliverTSMEvent_WithCompletionHandler_block_invoke + 439\r\n    frame #51: 0x00007fff99084bf9 HIToolbox`TSMKeyEvent_WithCompletionHandler + 632\r\n    frame #52: 0x00007fff99084948 HIToolbox`__TSMProcessRawKeyEventWithOptionsAndCompletionHandler_block_invoke_4 + 251\r\n    frame #53: 0x00007fff99084775 HIToolbox`__TSMProcessRawKeyEventWithOptionsAndCompletionHandler_block_invoke_3 + 281\r\n    frame #54: 0x00007fff9908448b HIToolbox`__TSMProcessRawKeyEventWithOptionsAndCompletionHandler_block_invoke_2 + 308\r\n    frame #55: 0x00007fff990841c2 HIToolbox`__TSMProcessRawKeyEventWithOptionsAndCompletionHandler_block_invoke + 300\r\n    frame #56: 0x00007fff9908373a HIToolbox`TSMProcessRawKeyEventWithOptionsAndCompletionHandler + 3604\r\n    frame #57: 0x00007fff97fc8441 AppKit`__84-[NSTextInputContext _handleEvent:options:allowingSyntheticEvent:completionHandler:]_block_invoke.1077 + 116\r\n    frame #58: 0x00007fff97fc76f9 AppKit`__204-[NSTextInputContext tryTSMProcessRawKeyEvent_orSubstitution:dispatchCondition:setupForDispatch:furtherCondition:doubleSpaceSubstitutionCondition:doubleSpaceSubstitutionWork:dispatchTSMWork:continuation:]_block_invoke.1003 + 121\r\n    frame #59: 0x00007fff97fc7563 AppKit`-[NSTextInputContext tryTSMProcessRawKeyEvent_orSubstitution:dispatchCondition:setupForDispatch:furtherCondition:doubleSpaceSubstitutionCondition:doubleSpaceSubstitutionWork:dispatchTSMWork:continuation:] + 285\r\n    frame #60: 0x00007fff97fc7e8b AppKit`-[NSTextInputContext _handleEvent:options:allowingSyntheticEvent:completionHandler:] + 1515\r\n    frame #61: 0x00007fff97fc73d2 AppKit`-[NSTextInputContext _handleEvent:allowingSyntheticEvent:] + 114\r\n    frame #62: 0x00007fff9778665b AppKit`-[NSView interpretKeyEvents:] + 232\r\n    frame #63: 0x00007fff97786471 AppKit`-[NSTextView keyDown:] + 704\r\n    frame #64: 0x0000000120a38ea9 IDEInterfaceBuilderCocoaIntegration`-[IBCocoaBindingsAutocompletingTextFieldEditor handleKeyDown:] + 330\r\n    frame #65: 0x00007fff97ee833c AppKit`-[NSWindow(NSEventRouting) _reallySendEvent:isDelayedEvent:] + 4086\r\n    frame #66: 0x00007fff97ee6f7a AppKit`-[NSWindow(NSEventRouting) sendEvent:] + 541\r\n    frame #67: 0x000000010d69fcca IDEKit`-[IDEWorkspaceWindow sendEvent:] + 155\r\n    frame #68: 0x00007fff97d6c518 AppKit`-[NSApplication(NSEvent) sendEvent:] + 4768\r\n    frame #69: 0x000000010d6e4991 IDEKit`-[IDEApplication sendEvent:] + 970\r\n    frame #70: 0x00007fff975e67f7 AppKit`-[NSApplication run] + 1002\r\n    frame #71: 0x00007fff975b11de AppKit`NSApplicationMain + 1237\r\n    frame #72: 0x00007fffaf273235 libdyld.dylib`start + 1"
    email: macmade@xs-labs.com
    modified: "2017-03-14T23:00:14.68603Z"
    number: "31049913"
    number_intvalue: 31049913
    originated: 14-Mar-2017 11:57 PM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: ""
    reproducible: Sometimes
    resolved: ""
    status: Open
    title: Xcode hangs when editing bindings
