apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "31689026"
    labels:
        datastore_id: "6106840270110720"
data:
    classification: ""
    created: "2017-04-24T16:42:27.96633Z"
    description: "Summary:\r\nApp running OpenGL method in web view (UIWebView or WKWebView) will crash when it goes to the background. There’s no way to stop or pause the OpenGL execution in web view before app goes to background. Setting the web view to nil doesn’t work.\r\n\r\n\r\nSteps to Reproduce:\r\n1. Load a web view that uses OpenGL to do animation.\r\n2. Click on the web view to start animation.\r\n3. Before the animation stops, click the home button to exit the app.\r\n4. Reopen the app.\r\n\r\n\r\nExpected Results:\r\nNo crash.\r\n\r\n\r\nObserved Results:\r\nApp crashed.  See crash log below:\r\n\r\n#8. Crashed: WebThread\r\n0  libGPUSupportMercury.dylib     0x19e485f94 gpus_ReturnNotPermittedKillClient\r\n1  AGXGLDriver                    0x1a2f451bc (null)\r\n2  libGPUSupportMercury.dylib     0x19e486f44 gpusSubmitDataBuffers\r\n3  AGXGLDriver                    0x1a2f4677c (null)\r\n4  IOAccelerator                  0x190edde28 IOAccelContextFinishResourceSysMem + 64\r\n5  libGPUSupportMercury.dylib     0x19e48b5ec gldFinishObject\r\n6  GLEngine                       0x1a36d4948 glBufferSubData_Exec\r\n7  WebCore                        0x194301738 WebCore::WebGLRenderingContextBase::bufferSubData(unsigned int, long long, WTF::RefPtr<JSC::ArrayBufferView>&&, int&) + 488\r\n8  WebCore                        0x193defa9c WebCore::jsWebGLRenderingContextBasePrototypeFunctionBufferSubData(JSC::ExecState*) + 1604\r\n9  JavaScriptCore                 0x192f7d064 llint_entry + 27476\r\n10 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n11 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n12 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n13 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n14 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n15 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n16 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n17 JavaScriptCore                 0x192f7c5e8 llint_entry + 24792\r\n18 JavaScriptCore                 0x192f76348 vmEntryToJavaScript + 264\r\n19 JavaScriptCore                 0x192e48a8c JSC::JITCode::execute(JSC::VM*, JSC::ProtoCallFrame*) + 168\r\n20 JavaScriptCore                 0x1928998e8 JSC::Interpreter::executeCall(JSC::ExecState*, JSC::JSObject*, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&) + 352\r\n21 JavaScriptCore                 0x192b0cb24 JSC::profiledCall(JSC::ExecState*, JSC::ProfilingReason, JSC::JSValue, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&, WTF::NakedPtr<JSC::Exception>&) + 164\r\n22 WebCore                        0x193ad6670 WebCore::JSCallbackData::invokeCallback(JSC::JSObject*, JSC::MarkedArgumentBuffer&, WebCore::JSCallbackData::CallbackType, JSC::PropertyName, WTF::NakedPtr<JSC::Exception>&) + 448\r\n23 WebCore                        0x193ce9660 WebCore::JSRequestAnimationFrameCallback::handleEvent(double) + 328\r\n24 WebCore                        0x1940a7b08 WebCore::ScriptedAnimationController::serviceScriptedAnimations(double) + 432\r\n25 WebCore                        0x1937780ec WebCore::DisplayRefreshMonitor::displayDidRefresh() + 336\r\n26 WebCore                        0x193778a00 -[WebDisplayLinkHandler handleDisplayLink:] + 36\r\n27 QuartzCore                     0x191ba6f24 CA::Display::DisplayLinkItem::dispatch(unsigned long long) + 44\r\n28 QuartzCore                     0x191ba6dd0 CA::Display::DisplayLink::dispatch_items(unsigned long long, unsigned long long, unsigned long long) + 444\r\n29 IOKit                          0x18ebbe094 IODispatchCalloutFromCFMessage + 372\r\n30 CoreFoundation                 0x18e8e6e50 __CFMachPortPerform + 180\r\n31 CoreFoundation                 0x18e8ff218 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 56\r\n32 CoreFoundation                 0x18e8fe9cc __CFRunLoopDoSource1 + 436\r\n33 CoreFoundation                 0x18e8fc4b0 __CFRunLoopRun + 1840\r\n34 CoreFoundation                 0x18e82a2b8 CFRunLoopRunSpecific + 444\r\n35 WebCore                        0x193430490 RunWebThread(void*) + 456\r\n36 libsystem_pthread.dylib        0x18d9e5850 _pthread_body + 240\r\n37 libsystem_pthread.dylib        0x18d9e5760 _pthread_body + 282\r\n38 libsystem_pthread.dylib        0x18d9e2d94 thread_start + 4"
    email: jingyil@google.com
    modified: "2017-04-24T16:42:27.96662Z"
    number: "31689026"
    number_intvalue: 31689026
    originated: 04/18/17
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK
    product_version: iOS 9
    reproducible: Sometimes
    resolved: ""
    status: Open
    title: WebCore OpenGL crash in web view when app with background modes enabled goes to background
