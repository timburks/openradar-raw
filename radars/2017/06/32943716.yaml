apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "32943716"
    labels:
        datastore_id: "4980788026146816"
data:
    classification: Crash
    created: "2017-06-23T08:44:21.86562Z"
    description: "Area:\r\nXcode\r\n\r\nSummary:\r\nThe SourceKitService embedded in Xcode 9 beta 2 (9M137d) crashes when running the test of SourceKitten.\r\n\r\nreproducing log:\r\n--\r\n➜  17:27:17  git clone https://github.com/jpsim/sourcekitten -b nn-swift-4020170619a\r\nCloning into 'sourcekitten'...\r\nremote: Counting objects: 8079, done.\r\nremote: Compressing objects: 100% (54/54), done.\r\nremote: Total 8079 (delta 47), reused 69 (delta 38), pack-reused 7986\r\nReceiving objects: 100% (8079/8079), 6.28 MiB | 1.74 MiB/s, done.\r\nResolving deltas: 100% (5161/5161), done.\r\n➜  17:28:31  cd sourcekitten\r\n➜  17:28:33 git:(nn-swift-4020170619a) DEVELOPER_DIR=/Applications/Xcode-beta.app swift test --filter testRealmObjectiveCDocs\r\nFetching https://github.com/Carthage/Commandant.git\r\nFetching https://github.com/drmohundro/SWXMLHash.git\r\nFetching https://github.com/jpsim/Yams.git\r\nFetching https://github.com/norio-nomura/Clang_C.git\r\nFetching https://github.com/norio-nomura/SourceKit.git\r\nFetching https://github.com/antitypical/Result.git\r\nCloning https://github.com/jpsim/Yams.git\r\nResolving https://github.com/jpsim/Yams.git at master\r\nCloning https://github.com/norio-nomura/SourceKit.git\r\nResolving https://github.com/norio-nomura/SourceKit.git at 1.0.1\r\nCloning https://github.com/antitypical/Result.git\r\nResolving https://github.com/antitypical/Result.git at 3.2.3\r\nCloning https://github.com/drmohundro/SWXMLHash.git\r\nResolving https://github.com/drmohundro/SWXMLHash.git at 4.1.0\r\nCloning https://github.com/norio-nomura/Clang_C.git\r\nResolving https://github.com/norio-nomura/Clang_C.git at 1.0.2\r\nCloning https://github.com/Carthage/Commandant.git\r\nResolving https://github.com/Carthage/Commandant.git at 0.12.0\r\nCompile CYaml src/writer.c\r\nCompile CYaml src/reader.c\r\nCompile CYaml src/scanner.c\r\nCompile CYaml src/parser.c\r\nCompile CYaml src/loader.c\r\nCompile CYaml src/emitter.c\r\nCompile CYaml src/dumper.c\r\nCompile CYaml src/api.c\r\nCompile Swift Module 'SWXMLHash' (2 sources)\r\nCompile Swift Module 'Result' (2 sources)\r\nCompile Swift Module 'Yams' (13 sources)\r\nCompile Swift Module 'Commandant' (10 sources)\r\nCompile Swift Module 'SourceKittenFramework' (34 sources)\r\nCompile Swift Module 'sourcekitten' (10 sources)\r\nCompile Swift Module 'SourceKittenFrameworkTests' (11 sources)\r\nLinking ./.build/debug/sourcekitten\r\nLinking ./.build/debug/SourceKittenPackageTests.xctest/Contents/MacOS/SourceKittenPackageTests\r\nTest Suite 'Selected tests' started at 2017-06-23 17:29:27.199\r\nTest Suite 'SourceKittenPackageTests.xctest' started at 2017-06-23 17:29:27.199\r\nTest Suite 'ClangTranslationUnitTests' started at 2017-06-23 17:29:27.199\r\nTest Case '-[SourceKittenFrameworkTests.ClangTranslationUnitTests testRealmObjectiveCDocs]' started.\r\nfatal error: unexpectedly found nil while unwrapping an Optional value\r\nsourcekit: [1:connection-event-handler:4611: 0.0000] Connection interrupt\r\nsourcekit: [1:pingService:4611: 0.0013] pinging service\r\nDEVELOPER_DIR=/Applications/Xcode-beta.app swift test --filter   55.51s user 13.38s system 147% cpu 46.833 total\r\n\r\nSteps to Reproduce:\r\n1. git clone https://github.com/jpsim/sourcekitten -b nn-swift-4020170619a\r\n2. cd sourcekitten\r\n3. DEVELOPER_DIR=/Applications/Xcode-beta.app swift test --filter testRealmObjectiveCDocs\r\n\r\nExpected Results:\r\n4. test will complete\r\n\r\nObserved Results:\r\n4. SourceKitService crashed and test crashed\r\n\r\nVersion:\r\nmacOS 10.12.5 (16F73)\r\n\r\nNotes:\r\nThe SourceKitService embedded in the toolchain distributed on swift.org does not crash.\r\ne.g. `swift-4.0-DEVELOPMENT-SNAPSHOT-2017-06-22-a` or `swift-4.0-DEVELOPMENT-SNAPSHOT-2017-06-19-a`\r\n\r\nConfiguration:"
    email: Norio.Nomura@gmail.com
    modified: "2017-06-23T08:44:21.86593Z"
    number: "32943716"
    number_intvalue: 32943716
    originated: June 23 2017, 5:41 PM
    parent_number: '&{NULL_VALUE}'
    product: Xcode
    product_version: Version 9 beta 2 (9M137d)
    reproducible: Always
    resolved: ""
    status: open
    title: The SourceKitService embedded in Xcode 9 beta 2 (9M137d) crashes when running the test of SourceKitten.
