apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "32839298"
    labels:
        datastore_id: "5030171962769408"
data:
    classification: Crash
    created: "2017-06-18T14:32:35.99767Z"
    description: "Summary:\r\n\r\nI'm experiencing random crashes with Xcode 9 beta, while using the text editor.\r\nThis happens on some projects, when I try to command-click on a symbol.\r\n\r\nXcode simply quits, and no crash report is generated.\r\n\r\nI can get more infos about the crash running Xcode in LLDB.\r\nAttached is LLDB session log.\r\n\r\n--------------------------------------------------\r\n\r\nSteps to Reproduce:\r\n\r\nIn the text editor, command-click on a symbol.\r\n\r\n--------------------------------------------------\r\n\r\nExpected Results:\r\n\r\nThe symbol action popover should open.\r\n\r\n--------------------------------------------------\r\n\r\nObserved Results:\r\n\r\nXcode sometimes quit, without generating a crash report.\r\n\r\n--------------------------------------------------\r\n\r\nVersion:\r\n\r\nXcode Version 9.0 beta (9M136h)\r\nmacOS Version 10.13 Beta (17A264c)\r\n\r\n--------------------------------------------------\r\n\r\nAttached file:\r\n\r\nProcess 81331 launched: '/Applications/Xcode-beta.app/Contents/MacOS/Xcode' (x86_64)\r\n2017-06-18 16:26:09.787877+0200 Xcode[81331:2920839] Calling IOPPFGetProperty thermally_optimized_xcode!\r\n2017-06-18 16:26:11.542224+0200 Xcode[81331:2920986] Calling IOPPFGetProperty simulator_utility_clamp!\r\nCoreData: annotation:  Failed to load optimized model at path '/Applications/Xcode-beta.app/Contents/SharedFrameworks/DTDeviceKitBase.framework/Versions/A/Resources/CrashDatabaseModel.momd/CrashDatabaseModel-5.0.1.omo'\r\n2017-06-18 16:26:14.415518+0200 Xcode[81331:2920839] Unknown class GPUTesselationSliderCell in Interface Builder file.\r\n2017-06-18 16:26:15.166370+0200 Xcode[81331:2920839] Unknown class GPUTesselationSliderCell in Interface Builder file.\r\n2017-06-18 16:26:15.221728+0200 Xcode[81331:2920988] [default] [ERROR] Failed getting container for URL: file:///Users/macmade/Documents/Macmade/GitHub/dyld_cache_extract/dyld_cache_extract.xcodeproj/, error: Error Domain=BRCloudDocsErrorDomain Code=12 \"App library not found: 'com.apple.Documents'\" UserInfo={NSDescription=App library not found: 'com.apple.Documents'}\r\n2017-06-18 16:26:15.222259+0200 Xcode[81331:2921541] [default] [ERROR] Failed getting container for URL: file:///Users/macmade/Desktop/OpenPanelBug/OpenPanelBug.xcodeproj/, error: Error Domain=BRCloudDocsErrorDomain Code=12 \"App library not found: 'com.apple.Desktop'\" UserInfo={NSDescription=App library not found: 'com.apple.Desktop'}\r\n2017-06-18 16:26:15.222657+0200 Xcode[81331:2921542] [default] [ERROR] Failed getting container for URL: file:///Users/macmade/Documents/Macmade/GitHub/NSPair/NSPair.m, error: Error Domain=BRCloudDocsErrorDomain Code=12 \"App library not found: 'com.apple.Documents'\" UserInfo={NSDescription=App library not found: 'com.apple.Documents'}\r\n2017-06-18 16:26:15.223061+0200 Xcode[81331:2921544] [default] [ERROR] Failed getting container for URL: file:///Users/macmade/Documents/Macmade/GitHub/NSPair/NSPair.h, error: Error Domain=BRCloudDocsErrorDomain Code=12 \"App library not found: 'com.apple.Documents'\" UserInfo={NSDescription=App library not found: 'com.apple.Documents'}\r\n2017-06-18 16:26:15.223379+0200 Xcode[81331:2921543] [default] [ERROR] Failed getting container for URL: file:///Users/macmade/Documents/Macmade/GitHub/GitHubUpdates/TestApp.xcodeproj/, error: Error Domain=BRCloudDocsErrorDomain Code=12 \"App library not found: 'com.apple.Documents'\" UserInfo={NSDescription=App library not found: 'com.apple.Documents'}\r\n2017-06-18 16:26:15.623291+0200 GPUToolsAgent[81338:2921557] Mac Agent inited !!!\r\n2017-06-18 16:26:15.774361+0200 Xcode[81331:2920966] [] network_config_register_boringssl_log_debug_updates Failed to register for BoringSSL log debug updates\r\n2017-06-18 16:26:15.810929+0200 Xcode[81331:2921543] [] network_config_register_boringssl_log_debug_updates Failed to register for BoringSSL log debug updates\r\n2017-06-18 16:26:16.293926+0200 Xcode[81331:2921550] IDESourceKit warning: Response error occurred for request 'NotifyActiveRunDestinationDidChange': Error Domain=IDESourceKitResponseErrorDomain Code=3 \"Indexer token was not valid: 1\" UserInfo={NSLocalizedDescription=Indexer token was not valid: 1}\r\n2017-06-18 16:26:17.283040+0200 Xcode[81331:2920839] Could not find image named 'DVTInFieldChooseButtonSmall'.\r\n2017-06-18 16:26:17.565922+0200 Xcode[81331:2921540] IDESourceKit warning: Response error occurred for request 'NotifyActiveRunDestinationDidChange': Error Domain=IDESourceKitResponseErrorDomain Code=3 \"Indexer token was not valid: 2\" UserInfo={NSLocalizedDescription=Indexer token was not valid: 2}\r\n2017-06-18 16:26:18.050557+0200 Xcode[81331:2920839] Asking for _computePreferredTargets\r\n2017-06-18 16:26:18.050698+0200 Xcode[81331:2920839] Asking for _computePreferredTargets\r\n2017-06-18 16:26:18.454337+0200 Xcode[81331:2920839] [MT] DVTAssertions: Warning in /Library/Caches/com.apple.xbs/Sources/IDEFrameworks/IDEFrameworks-13158.24/IDEKit/NavigableItems/IDENavigableItem.m:1170\r\nDetails:  No match from <IDEFileReferenceNavigableItem 0x13b4c0650: (supports Any IDEFileReference, represents: <Xcode3FileReference, 0x11dc6a7a0 (Represents: <PBXFileReference:0x11dc1b2c0:05A5D3BE1EF6C1A6005AF576:name='ViewController.m'>)>)> to <IDEPegasusSourceEditor.SourceCodeLandmark: 0x13af5c7b0>. Iterating the whole tree might have taken a significant amount of time.\r\nObject:   <IDEFileReferenceNavigableItem_Xcode3FileReference_Any: 0x13b4c0650>\r\nMethod:   -_descendantItemForRepresentedObject:stopAtClass:\r\nThread:   <NSThread: 0x10ab00990>{number = 1, name = main}\r\nPlease file a bug at http://bugreport.apple.com with this warning message and any useful information you can provide.\r\nobjc[81331]: __weak variable at 0x1306b7c80 holds 0x7fffcee79160 instead of 0x12fb556c0. This is probably incorrect use of objc_storeWeak() and objc_loadWeak(). Break on objc_weak_error to debug.\r\n\r\n2017-06-18 16:26:19.455592+0200 Xcode[81331:2920839] QUERY COMPLETED: Indexing Text: 1.4746 seconds\r\n2017-06-18 16:26:19.526465+0200 Xcode[81331:2920839] QUERY COMPLETED: Indexing Text: 1.3838 seconds\r\nProcess 81331 stopped\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_INSTRUCTION (code=EXC_I386_INVOP, subcode=0x0)\r\n    frame #0: 0x000000011b32b6ae SourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed, Arg[1] = Owned To Guaranteed> of SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).layout(inlineContainerLozenge: SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).LozengeContext, in: SourceEditor.SourceEditorContentView) -> () + 7518\r\nSourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed, Arg[1] = Owned To Guaranteed> of SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).layout(inlineContainerLozenge: SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).LozengeContext, in: SourceEditor.SourceEditorContentView) -> ():\r\n->  0x11b32b6ae <+7518>: ud2    \r\n    0x11b32b6b0 <+7520>: ud2    \r\n    0x11b32b6b2 <+7522>: nopw   %cs:(%rax,%rax)\r\n\r\nSourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed, Arg[1] = Owned To Guaranteed> of SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).layout(containerLozenge: SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).LozengeContext, in: SourceEditor.SourceEditorContentView) -> ():\r\n    0x11b32b6c0 <+0>:    pushq  %rbp\r\nTarget 0: (Xcode) stopped.\r\n\r\n(lldb) bt\r\n\r\n* thread #1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_INSTRUCTION (code=EXC_I386_INVOP, subcode=0x0)\r\n  * frame #0: 0x000000011b32b6ae SourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed, Arg[1] = Owned To Guaranteed> of SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).layout(inlineContainerLozenge: SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).LozengeContext, in: SourceEditor.SourceEditorContentView) -> () + 7518\r\n    frame #1: 0x402e000000000000\r\n    frame #2: 0x000000011b32e68a SourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed, Arg[1] = Owned To Guaranteed> of closure #1 () -> () in SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).didLayoutInContentView(SourceEditor.SourceEditorContentView) -> () + 1290\r\n    frame #3: 0x000000011b328f02 SourceEditor`partial apply forwarder for closure #1 () -> () in SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).didLayoutInContentView(SourceEditor.SourceEditorContentView) -> () + 50\r\n    frame #4: 0x000000011b2f9410 SourceEditor`reabstraction thunk helper from @callee_owned () -> () to @callee_unowned @convention(block) () -> () + 32\r\n    frame #5: 0x000000011b2c90e7 SourceEditor`@objc static (extension in SourceEditor):__C.NSView.performWithoutAnimation(() -> ()) -> () + 23\r\n    frame #6: 0x000000011b328e80 SourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed> of SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).didLayoutInContentView(SourceEditor.SourceEditorContentView) -> () + 208\r\n    frame #7: 0x000000011b322d39 SourceEditor`protocol witness for SourceEditor.LayoutVisualization.didLayoutInContentView(SourceEditor.SourceEditorContentView) -> () in conformance SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D) : SourceEditor.LayoutVisualization in SourceEditor + 25\r\n    frame #8: 0x000000011b51b9f2 SourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed> of SourceEditor.SourceEditorLayoutManager.(didLayoutVisibleLinesInContentView in _8A34A44A3A81F5AC1210A0E6DECBF3AB)(SourceEditor.SourceEditorContentView) -> () + 626\r\n    frame #9: 0x000000011b51c1ed SourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed> of SourceEditor.SourceEditorLayoutManager.layoutContentView(SourceEditor.SourceEditorContentView) -> () + 861\r\n    frame #10: 0x000000011b2f86c4 SourceEditor`@objc SourceEditor.SourceEditorContentView.layoutSublayers(of: __C.CALayer) -> () + 68\r\n    frame #11: 0x00007fffaaf3850c QuartzCore`-[CALayer layoutSublayers] + 210\r\n    frame #12: 0x00007fff9d29f418 AppKit`_NSBackingLayerLayoutSublayers + 157\r\n    frame #13: 0x00007fffaaf2b22a QuartzCore`CA::Layer::layout_if_needed(CA::Transaction*) + 370\r\n    frame #14: 0x00007fffaaf2b0a4 QuartzCore`CA::Layer::layout_and_display_if_needed(CA::Transaction*) + 24\r\n    frame #15: 0x00007fffaaf20a64 QuartzCore`CA::Context::commit_transaction(CA::Transaction*) + 326\r\n    frame #16: 0x00007fffaae1637e QuartzCore`CA::Transaction::commit() + 480\r\n    frame #17: 0x00007fff9da3d445 AppKit`__65+[CATransaction(NSCATransaction) NS_setFlushesWithDisplayRefresh]_block_invoke + 283\r\n    frame #18: 0x00007fff9fb1da37 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 23\r\n    frame #19: 0x00007fff9fb1d98e CoreFoundation`__CFRunLoopDoObservers + 430\r\n    frame #20: 0x00007fff9fb00308 CoreFoundation`__CFRunLoopRun + 984\r\n    frame #21: 0x00007fff9faffcb9 CoreFoundation`CFRunLoopRunSpecific + 409\r\n    frame #22: 0x00007fff9ee5cf0b HIToolbox`RunCurrentEventLoopInMode + 227\r\n    frame #23: 0x00007fff9ee5cbb7 HIToolbox`ReceiveNextEventCommon + 366\r\n    frame #24: 0x00007fff9ee5ca2c HIToolbox`_BlockUntilNextEventMatchingListInModeWithFilter + 64\r\n    frame #25: 0x00007fff9d158e13 AppKit`_DPSNextEvent + 2085\r\n    frame #26: 0x00007fff9d8df39e AppKit`-[NSApplication(NSEvent) _nextEventMatchingEventMask:untilDate:inMode:dequeue:] + 2930\r\n    frame #27: 0x0000000100905a73 DVTKit`-[DVTApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 390\r\n    frame #28: 0x00007fff9d14d99d AppKit`-[NSApplication run] + 764\r\n    frame #29: 0x00007fff9d11cd7d AppKit`NSApplicationMain + 854\r\n    frame #30: 0x00007fffc6aca515 libdyld.dylib`start + 1\r\n    frame #31: 0x00007fffc6aca515 libdyld.dylib`start + 1\r\n\r\n(lldb) register read\r\n\r\nGeneral Purpose Registers:\r\n       rax = 0x0000079e00000002\r\n       rbx = 0x000000012fb081a0\r\n       rcx = 0x0000079a00000002\r\n       rdx = 0x0000000200000002\r\n       rdi = 0x0000000000000008\r\n       rsi = 0x0000000000000005\r\n       rbp = 0x00007fff5fbfc6b0\r\n       rsp = 0x00007fff5fbfc230\r\n        r8 = 0x0000000000000073\r\n        r9 = 0x0000000100000000  Xcode`_mh_execute_header\r\n       r10 = 0x0000000400000000\r\n       r11 = 0x000000010ba1c110\r\n       r12 = 0x0000000000000030\r\n       r13 = 0x0000000000000118\r\n       r14 = 0x000000012fb4e8a0\r\n       r15 = 0x0000000102f5e048  _swiftEmptyArrayStorage\r\n       rip = 0x000000011b32b6ae  SourceEditor`function signature specialization <Arg[0] = Owned To Guaranteed, Arg[1] = Owned To Guaranteed> of SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).layout(inlineContainerLozenge: SourceEditor.(StructuredSelectionVisualization in _7AFBC303C5A816C40636AEF2F174C33D).LozengeContext, in: SourceEditor.SourceEditorContentView) -> () + 7518\r\n    rflags = 0x0000000000010293\r\n        cs = 0x000000000000002b\r\n        fs = 0x0000000000000000\r\n        gs = 0x0000000000000000"
    email: macmade@xs-labs.com
    modified: "2017-06-22T10:11:17.71454Z"
    number: "32839298"
    number_intvalue: 32839298
    originated: June 18 2017, 4:30 PM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: ""
    reproducible: Sometimes
    resolved: ""
    status: Duplicate (32217326)
    title: Xcode randomly crashes without generating a crash report
