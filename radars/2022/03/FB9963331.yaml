apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: FB9963331
    labels:
        datastore_id: "5495378522669056"
data:
    classification: Compiler
    created: "2022-03-21T15:07:51.328259Z"
    description: "Migrating to Xcode 13.1 toolchain has caused a crash on device builds. No crash happen on simulator builds. \r\nSome build settings for device builds\r\nOptimised for size\r\nwmo enabled\r\nLTO - incremental\r\n\r\nWe didn't manage to reproduce the crash on a example app after multiple attempts. \r\n\r\n```\r\nThread 0 name:  Dispatch queue: com.apple.main-thread\r\nThread 0 Crashed:\r\n0   libswiftCore.dylib            \t0x00000001a6e16c3c swift_getAssociatedTypeWitnessSlowImpl+ 3767356 (swift::MetadataRequest, swift::TargetWitnessTable<swift::InProcess>*, swift::TargetMetadata<swift::InProcess> const*, swift::TargetProtocolRequirement<swift::InProcess> const*, swift::TargetProtocolRequirement<swift::InProcess> const*) + 352\r\n1   libswiftCore.dylib            \t0x00000001a6e16c34 swift_getAssociatedTypeWitnessSlowImpl+ 3767348 (swift::MetadataRequest, swift::TargetWitnessTable<swift::InProcess>*, swift::TargetMetadata<swift::InProcess> const*, swift::TargetProtocolRequirement<swift::InProcess> const*, swift::TargetProtocolRequirement<swift::InProcess> const*) + 344\r\n2   libswiftCore.dylib            \t0x00000001a6e14b3c swift_getAssociatedTypeWitness + 236\r\n3   libswiftCore.dylib            \t0x00000001a6bff6cc _SwiftNewtypeWrapper<>._rawHashValue+ 1574604 (seed:) + 72\r\n4   <redacted>                          \t0x0000000104f22e5c protocol witness for Hashable._rawHashValue(seed:) in conformance AVMetadataObjectType + 13102684 (<compiler-generated>:0)\r\n5   libswiftCore.dylib            \t0x00000001a6b46968 __RawDictionaryStorage.find<A>+ 817512 (_:) + 56\r\n6   libswiftCore.dylib            \t0x00000001a6d9d688 specialized Dictionary.init+ 3270280 (dictionaryLiteral:) + 796\r\n7   libswiftCore.dylib            \t0x00000001a6ad6d54 Dictionary.init+ 359764 (dictionaryLiteral:) + 24\r\n8   <redacted>                          \t0x000000010a76a090 specialized <redacted>.<redacted>() + 105668752 (<redacted>.swift:38)\r\n9   <redacted>                          \t0x000000010a76984c one-time initialization function for headline + 32\r\n10  libdispatch.dylib             \t0x00000001a2b0381c _dispatch_client_callout + 20\r\n11  libdispatch.dylib             \t0x00000001a2b050b4 _dispatch_once_callout + 32\r\n12  libswiftCore.dylib            \t0x00000001a6e3397c swift_once + 48\r\n13  <redacted>                          \t0x000000010a7696a8 <redacted>.caption.unsafeMutableAddressor + 105666216 (<redacted>Font.swift:103)\r\n14  <redacted>                          \t0x00000001044069b4 <redacted>().init() + 1452468 (<redacted>swift:58)\r\n15  <redacted>                          \t0x0000000104406f84 @objc <redacted>().init() + 1453956 (<compiler-generated>:0)\r\n16  <redacted>                          \t0x00000001044061d4 one-time initialization function for shared + 1450452 (<redacted>swift:65)\r\n17  libdispatch.dylib             \t0x00000001a2b0381c _dispatch_client_callout + 20\r\n18  libdispatch.dylib             \t0x00000001a2b050b4 _dispatch_once_callout + 32\r\n19  libswiftCore.dylib            \t0x00000001a6e3397c swift_once + 48\r\n20  <redacted>                          \t0x000000010442d444 closure #1 in <redacted> + 1610820 (AppDelegate.swift:117)\r\n21  <redacted>                          \t0x000000010442ba80 <redacted> + 1604224 (<compiler-generated>:0)\r\n22  <redacted>                          \t0x0000000104495a1c specialized <redacted>.init(<redacted>::) + 2038300 (<redacted>.swift:246)\r\n23  <redacted>                          \t0x0000000104493248 one-time initialization function for shared + 2028104 (<redacted>.swift:216)\r\n24  libdispatch.dylib             \t0x00000001a2b0381c _dispatch_client_callout + 20\r\n25  libdispatch.dylib             \t0x00000001a2b050b4 _dispatch_once_callout + 32\r\n26  libswiftCore.dylib            \t0x00000001a6e3397c swift_once + 48\r\n27  <redacted>                          \t0x00000001042f40d4 AppDelegate.<redacted>() + 327892 (<redacted>.swift:800)\r\n28  <redacted>                          \t0x00000001042f40f0 @objc AppDelegate.<redacted>() + 327920 (<compiler-generated>:0)\r\n```"
    email: madushan.rcg@gmail.com
    modified: "2022-03-21T15:09:15.954296Z"
    number: FB9963331
    number_intvalue: 9963331
    originated: ""
    parent_number: '&{NULL_VALUE}'
    product: iOS
    product_version: ""
    reproducible: ""
    resolved: ""
    status: Open
    title: Runtime crash for build generated from Xcode 13.1 toolchain
