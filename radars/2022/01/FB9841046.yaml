apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: FB9841046
    labels:
        datastore_id: "5060661134491648"
data:
    classification: Crash
    created: "2022-01-11T17:44:16.5214Z"
    description: "Simultaneously loading an HDR and SDR VP9 video on a 16-inch 2019 MacBook Pro causes the system to hang and require a reboot. This can be illustrated by opening a Chrome tab containing both types of video.\r\n\r\nThe resulting spin report after reboot contains the following:\r\n\r\n---\r\n\r\n Thread 0x3b9    DispatchQueue \"com.apple.main-thread\"(1)    12 samples (1-12)    priority 79 (base 79)    cpu time <0.001s\r\n  <thread QoS unspecified (promote user interactive), IO tier 0>\r\n  12  start + 462 (dyld + 21758) [0x1060b14fe] 1-12\r\n    12  ??? (WindowServer + 13224) [0x100ea43a8] 1-12\r\n      12  SLXServer + 1707 (SkyLight + 2889844) [0x7ff8113da874] 1-12\r\n        12  server_loop + 91 (SkyLight + 2890625) [0x7ff8113dab81] 1-12\r\n          12  CGXRunOneServicesPass + 1719 (SkyLight + 2887142) [0x7ff8113d9de6] 1-12\r\n            12  post_port_data + 264 (SkyLight + 2888050) [0x7ff8113da172] 1-12\r\n              12  non_coalesced_timer_handler + 16 (SkyLight + 2646396) [0x7ff81139f17c] 1-12\r\n                12  run_timer_pass + 502 (SkyLight + 2646094) [0x7ff81139f04e] 1-12\r\n                  12  update_display_callback(void*, double) + 1489 (SkyLight + 2216531) [0x7ff811336253] 1-12\r\n                    12  CGXUpdateDisplay + 6408 (SkyLight + 2251565) [0x7ff81133eb2d] 1-12\r\n                      12  prepare_CoreAnimation_update_state(CGXConnection*, CGXWindowSubArray, WSCAPrepareState*) + 2631 (SkyLight + 2286766) [0x7ff8113474ae] 1-12\r\n                        12  WSBeginCAWindowUpdate(CGXConnection*, CGXWindow*, double, unsigned int, unsigned int, WSCAPrepareState*, unsigned int*, CGSRegionObject*, CGSRegionObject**, CGXCoreAnimationUpdateState*) + 350 (SkyLight + 2355004) [0x7ff811357f3c] 1-12\r\n                          12  WSCAWindowBacking::BeginUpdate(LayerUpdateParams) + 568 (SkyLight + 1770966) [0x7ff8112c95d6] 1-12\r\n                            12  WSCALayerBacking::RunUpdate(WSCARenderContextScope&, bool) + 527 (SkyLight + 1977463) [0x7ff8112fbc77] 1-12\r\n                              12  CARenderUpdateAddContext2 + 50 (QuartzCore + 1492587) [0x7ff81342766b] 1-12\r\n                                12  CA::Render::Update::add_context(CA::Render::Context*, CA::Render::Layer*, CA::Transform const*) + 2182 (QuartzCore + 591812) [0x7ff81334b7c4] 1-12\r\n                                  12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                    12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                      12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                        12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                          12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                            12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                              12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                  12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                    12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                      12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                        12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                          12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                            12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 9686 (QuartzCore + 1448002) [0x7ff81341c842] 1-12\r\n                                                              12  CA::Render::Updater::prepare_layer(CA::Render::Updater::GlobalState&, CA::Render::Updater::LocalState&, CA::Render::LayerNode*, CA::Render::Updater::LayerShapes&, unsigned long long*) + 22686 (QuartzCore + 1461002) [0x7ff81341fb0a] 1-12\r\n                                                                12  CA::Render::ImageQueue::forward_dm(CA::Render::Context*, CA::Render::Update*, bool, float, int, bool) + 1368 (QuartzCore + 1009526) [0x7ff8133b1776] 1-12\r\n                                                                  12  CA::HDRProcessorInternal::create_surface_with_forward_dm(__IOSurface*, CA::Render::Update const*, bool, float, CA::Render::TextureFlags, bool) + 1329 (QuartzCore + 1731903) [0x7ff813461d3f] 1-12\r\n                                                                    12  CA::HDRProcessorInternal::tonemap_surface_internal(__IOSurface*, __IOSurface*, HDRConfigurationParameters&, HDRProcessingOperation, CA::Render::DisplayAttributes const*, bool, id<MTLCommandBuffer>, CA::Render::TextureFlags, __CFData const*, CA::Render::SurfaceType) + 2939 (QuartzCore + 1737025) [0x7ff813463141] 1-12\r\n                                                                      12  -[HDRProcessor encodeToCommandBuffer:inputSurfaceLayer0:inputSurfacelayer1:outputSurface:metadata:] + 527 (HDRProcessing + 37593) [0x7ff91c56f2d9] 1-12\r\n                                                                        12  -[HDRProcessor processFrameInternalWithLayer0:layer1:outout:metadata:commandbuffer:operation:config:histogram:data:] + 10638 (HDRProcessing + 52393) [0x7ff91c572ca9] 1-12\r\n                                                                          12  -[HDRProcessor processPixelsWithLayer0:layer1:output:metaData:tcControl:hdrControl:hdr10InfoFrame:commandbuffer:] + 812 (HDRProcessing + 72660) [0x7ff91c577bd4] 1-12\r\n                                                                            12  -[DolbyVisionComposer encodeToCommandBuffer:BL:EL:Output:ComposerData:DM:DMData:tcControl:hdrControl:hdr10InfoFrame:] + 1821 (HDRProcessing + 204837) [0x7ff91c598025] 1-12\r\n                                                                              12  -[DolbyVisionComposer encodeSingleLayerToCommandBuffer:BL:Output:ComposerData:DM:DMData:tcControl:hdrControl:hdr10InfoFrame:] + 3258 (HDRProcessing + 209767) [0x7ff91c599367] 1-12\r\n                                                                                12  -[DolbyVisionComposer macSetupEncoderForCommandBuffer:tcControl:hdrControl:DMData:dmConfig:isHdr10OnMac:isHlgOnMac:macOSGamma:isDM4:] + 7649 (HDRProcessing + 242284) [0x7ff91c5a126c] 1-12\r\n                                                                                  12  amdMtl_GFX10_SetComputeTexture(GFX10_ComputeCmdEncoderMembersRec&, GFX10_SRDMgrRec*, id<MTLTexture>, unsigned long) + 98 (AMDRadeonX6000MTLDriver + 978839) [0x7ffa2771af97] 1-12\r\n                                                                                    12  amdMtl_HwCmdBufUpdateRsrc(AMD_HwCmdBufInfoRec*, MTLIOAccelResource*, unsigned int, unsigned int) + 277 (AMDRadeonX6000MTLDriver + 108167) [0x7ffa27646687] 1-12\r\n                                                                                      12  ioAccelResourceListAddNewGroupAndResource + 181 (IOAccelerator + 11975) [0x7ff814aaaec7] 1-12\r\n                                                                                        12  ioAccelResourceGroupAddNewResource + 129 (IOAccelerator + 12155) [0x7ff814aaaf7b] 1-12\r\n                                                                                          12  IOSurfaceClientBindAccel + 141 (IOSurface + 14888) [0x7ff814a99a28] 1-12\r\n                                                                                            12  IOConnectCallMethod + 186 (IOKit + 10790) [0x7ff80eb23a26] 1-12\r\n                                                                                              12  io_connect_method + 387 (IOKit + 11281) [0x7ff80eb23c11] 1-12\r\n                                                                                                12  mach_msg_trap + 10 (libsystem_kernel.dylib + 2746) [0x7ff80c142aba] 1-12\r\n                                                                                                 *12  ??? (kernel + 98886) [0xffffff8000228246] 1-12\r\n                                                                                                   *12  ??? (kernel + 1748254) [0xffffff80003bad1e] 1-12\r\n                                                                                                     *12  ??? (kernel + 432349) [0xffffff80002798dd] 1-12\r\n                                                                                                       *12  ??? (kernel + 339608) [0xffffff8000262e98] 1-12\r\n                                                                                                         *12  ??? (kernel + 1567908) [0xffffff800038eca4] 1-12\r\n                                                                                                           *12  ??? (kernel + 8930860) [0xffffff8000a9462c] 1-12\r\n                                                                                                             *12  ??? (kernel + 8889181) [0xffffff8000a8a35d] 1-12\r\n                                                                                                               *12  IOSurfaceRootUserClient::bind_accel(unsigned int, unsigned int, unsigned int) + 113 (IOSurface + 84169) [0xffffff8002f698c9] 1-12\r\n                                                                                                                 *12  IOSurface::bindAccel(unsigned int, unsigned int) + 48 (IOSurface + 31180) [0xffffff8002f5c9cc] 1-12\r\n                                                                                                                   *12  IOSurface::synchronizeDeviceCaches(unsigned int, unsigned int, bool) + 250 (IOSurface + 30430) [0xffffff8002f5c6de] 1-12\r\n                                                                                                                     *12  IOAccelEventMachineFast2::finishEventUnlocked(IOAccelEvent*) + 227 (IOAcceleratorFamily2 + 199441) [0xffffff7f9924eb11] 1-12\r\n                                                                                                                       *12  IOAccelEventMachine2::waitForStamp(int, unsigned int, unsigned int*) + 258 (IOAcceleratorFamily2 + 77452) [0xffffff7f99230e8c] 1-12\r\n                                                                                                                         *12  ??? (kernel + 659767) [0xffffff80002b1137] 1-12\r\n                                                                                                                           *12  ??? (kernel + 668460) [0xffffff80002b332c] 1-12\r\n                                                                                                                             *12  ??? (kernel + 1836564) [0xffffff80003d0614] 1-12"
    email: cellsworth@gmail.com
    modified: "2022-01-11T17:44:16.521565Z"
    number: FB9841046
    number_intvalue: 9841046
    originated: "2022-01-11"
    parent_number: '&{NULL_VALUE}'
    product: macOS
    product_version: "12.1"
    reproducible: Always
    resolved: ""
    status: Open
    title: VP9 HDR + SDR Video Playback crashes OS
