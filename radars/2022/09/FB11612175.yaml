apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: FB11612175
    labels:
        datastore_id: "5518979275685888"
data:
    classification: Bug
    created: "2022-09-28T22:10:23.770576Z"
    description: "*** THIS ISSUE ONLY AFFECTS MOJAVE! ***\r\n\r\nAfter installing the latest Mojave security update, I'm unable to import photos from my iOS 16 iPhone. (This issue is affecting at least one other person as well.) Steps to reproduce:\r\n\r\n1) Take pictures on iPhone\r\n2) Connect iPhone to macOS\r\n3) Open Photos, select iPhone\r\n4) Import new photos—one or all, doesn't matter\r\n\r\nExpected results: Photos import.\r\nActual results: No photos import.\r\n\r\nEvery photo fails to import with this message in a dialog:\r\n\r\nThe operation couldn't be completed. (com.apple.ImageCaptureCore error -9956.)\r\n\r\nIt does not matter if the iPhone is set to take HEIC or JPG, both fail. It does not matter if the iPhone is set to transfer compatible or original, neither work. I have rebooted both devices. I have changed the USB cable. I have granted full disk access to Photos. I have tested with a new blank Photos library. Nothing helps.\r\n\r\nThis is not a problem with the images—they import fine onto a 14\" MacBook Pro running Monterey. This is definitely related to Mojave, and I believe, the latest security update. In Console, here's the message stream for one failed image:\r\n\r\ndefault\t14:07:27.424044 -0700\tPhotos\t[00002967]  Request Download: IMG_7934.HEIC\r\nerror\t14:07:27.452379 -0700\tPTPCamera\t[00001157]   ---> [PTPHostUSBTransport handleBulkData:result:] - MD5 FAILED | HOST LAYER WILL RETRY IF POSSIBLE\r\nerror\t14:07:27.452401 -0700\tPTPCamera\t[00001158]   ---> First Packet: NO   Final Packet: YES\r\nerror\t14:07:27.452414 -0700\tPTPCamera\t[00001159]   ---> Total Bytes Filled: 0  USB Packet Bytes: 524288\r\nerror\t14:07:27.467756 -0700\tPTPCamera\t[00001157]   ---> [PTPHostUSBTransport handleBulkData:result:] - MD5 FAILED | HOST LAYER WILL RETRY IF POSSIBLE\r\nerror\t14:07:27.467778 -0700\tPTPCamera\t[00001158]   ---> First Packet: YES   Final Packet: NO\r\nerror\t14:07:27.467792 -0700\tPTPCamera\t[00001159]   ---> Total Bytes Filled: 0  USB Packet Bytes: 524272\r\nerror\t14:07:27.467999 -0700\tPTPCamera\t[00002595]  Retry #:1048532, E: 0x0/ A: 0x0 - Received an invalid transaction size - aborting at 0x3fdb2bfdb4cc2507\r\nerror\t14:07:27.468025 -0700\tPTPCamera\t[00002596]  I¥Rëˇˇ\\^] Retry failed, bailing and aborting download\r\nerror\t14:07:27.468433 -0700\tPTPCamera\t[00000804]  !-!     ICACommandDict:{\r\n    CallbackInfo = 105553245643456;\r\n    ICACommandKey = ICADownloadFileCmd;\r\n    ICAErrorKey = \"-9956\";\r\n    ICAExecutableArchitectureKey = 16777223;\r\n    ICAOptionsDictionaryKey =     {\r\n        adjustCreationDate = 1;\r\n        deleteAfterDownload = 0;\r\n        dirPath = \"/Volumes/PhotosNVME/iPhoto/Photos Library.photoslibrary/Masters/2022/09/28/20220928-210727/\";\r\n        dontEmbedColorSyncProfile = 1;\r\n        saveAsFilename = \"IMG_7934.HEIC\";\r\n    };\r\n    ICC = Y;\r\n    objectID = 9;\r\n    operationID = \"IMG_7934.HEIC\";\r\n}\r\nerror\t14:07:27.468454 -0700\tPTPCamera\t[00000805]  !-!     ICAPrivateDict:{\r\n    ICAClientPID = 66393;\r\n    ICCommandTransactionID = 11;\r\n}\r\nerror\t14:07:27.480092 -0700\tPhotos\tERROR: The operation couldn’t be completed. (com.apple.ImageCaptureCore error -9956.) (, path: IMG_7934.HEIC (IMG_7934.HEIC)), file: /BuildRoot/Library/Caches/com.apple.xbs/Sources/PhotoApp/PhotoApp-3461.7.160/lib/redrock/Import/RKImageCaptureManager.m, line: 798\r\ndefault\t14:07:27.480214 -0700\tPhotos\t[IMPORT ERROR] CRITICAL: The operation couldn’t be completed. (com.apple.ImageCaptureCore error -9956.) (NSError: Error Domain=com.apple.ImageCaptureCore Code=-9956 \"(null)\"), path: IMG_7934.HEIC (IMG_7934.HEIC), source: /BuildRoot/Library/Caches/com.apple.xbs/Sources/PhotoApp/PhotoApp-3461.7.160/lib/redrock/Import/RKImageCaptureManager.m, line: 798\r\n\r\nOf concern to me is the bit about \"MD5 FAILED\" in the message stream—something is failing authentication somewhere. I don't know if this is a cause or a symptom, but I know it's not good. \r\n\r\nI doubt this bug report will get any attention, because it's an old OS, but it's very real, and very ugly. The workaround right now is to import onto my MBP, then move to my iMac, then import to Photos. This all worked perfectly with my iPhone before the latest security update.\r\n\r\n---------------------\r\n\r\nIt turns out iOS 16 is at fault: iOS 16.1 fixes the problem. Closing feedback."
    email: thegriffs@gmail.com
    modified: "2022-09-29T13:49:29.643295Z"
    number: FB11612175
    number_intvalue: 11612175
    originated: 9/28/2022
    parent_number: '&{NULL_VALUE}'
    product: Photos, macOS Mojave
    product_version: ""
    reproducible: Always
    resolved: 9/29/2022
    status: Closed
    title: Latest Mojave security update breaks iOS photo importing
