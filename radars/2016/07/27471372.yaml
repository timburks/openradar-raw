apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "27471372"
    labels:
        datastore_id: "6073824336412672"
data:
    classification: UI/Usability
    created: "2016-07-21T15:09:52.80285Z"
    description: "Summary:\n\nUIDocumentMenuViewController is showing an Auto Layout error during initialization. \n\nSteps to Reproduce:\n\nSet up an app with the correct iCloud entitlements. Use the following code to initialize a UIDocumentMenuViewController:\n\nUIDocumentMenuViewController *pickerMenu = [[UIDocumentMenuViewController alloc] initWithDocumentTypes:types inMode:UIDocumentPickerModeImport];\n\nExpected Results:\n\nNo Auto Layout errors.\n\nActual Results:\n\nThe following error is printed in the console:\n\n2016-07-21 16:49:56.944 Viewer[3297:1470956] the behavior of the UICollectionViewFlowLayout is not defined because:\r\n2016-07-21 16:49:56.944 Viewer[3297:1470956] the item width must be less than the width of the UICollectionView minus the section insets left and right values, minus the content insets left and right values.\r\n2016-07-21 16:49:56.946 Viewer[3297:1470956] The relevant UICollectionViewFlowLayout instance is <_UIAlertControllerCollectionViewFlowLayout: 0x157b23430>, and it is attached to <UICollectionView: 0x1568f7a00; frame = (0 44; 10 0); clipsToBounds = YES; gestureRecognizers = <NSArray: 0x157b23ff0>; animations = { bounds.origin=<CASpringAnimation: 0x155f153a0>; bounds.size=<CASpringAnimation: 0x155f03ef0>; position=<CASpringAnimation: 0x155f1fe90>; }; layer = <CALayer: 0x157b23a60>; contentOffset: {0, 0}; contentSize: {0, 0}> collection view layout: <_UIAlertControllerCollectionViewFlowLayout: 0x157b23430>.\r\n2016-07-21 16:49:56.946 Viewer[3297:1470956] Make a symbolic breakpoint at UICollectionViewFlowLayoutBreakForInvalidSizes to catch this in the debugger.\n\nHere is the backtrace from the menu initialization onwards:\n\n#0\t0x0000000189246ec0 in UICollectionViewFlowLayoutBreakForInvalidSizes ()\n#1\t0x0000000189248180 in -[_UIFlowLayoutSection logInvalidSizesForHorizontalDirection:warnAboutDelegateValues:] ()\n#2\t0x0000000188b23074 in -[_UIFlowLayoutSection computeLayout] ()\n#3\t0x0000000189208af4 in __56-[UICollectionViewFlowLayout _updateItemsLayoutForRect:]_block_invoke ()\n#4\t0x000000018373b944 in __53-[__NSArrayM enumerateObjectsWithOptions:usingBlock:]_block_invoke ()\n#5\t0x000000018373b7b4 in -[__NSArrayM enumerateObjectsWithOptions:usingBlock:] ()\n#6\t0x000000018920890c in -[UICollectionViewFlowLayout _updateItemsLayoutForRect:] ()\n#7\t0x0000000189208c78 in -[UICollectionViewFlowLayout _fetchItemsInfoForRect:] ()\n#8\t0x0000000188a06e18 in -[UICollectionViewFlowLayout collectionViewContentSize] ()\n#9\t0x0000000188a01744 in -[UICollectionViewData _validateContentSize] ()\n#10\t0x0000000188a00bfc in -[UICollectionViewData validateLayoutInRect:] ()\n#11\t0x0000000188a007d0 in -[UICollectionView layoutSubviews] ()\n#12\t0x000000018899c1e4 in -[UIView(CALayerDelegate) layoutSublayersOfLayer:] ()\n#13\t0x000000018632e994 in -[CALayer layoutSublayers] ()\n#14\t0x00000001863295d0 in CA::Layer::layout_if_needed(CA::Transaction*) ()\n#15\t0x00000001889b30a4 in -[UIView(Hierarchy) layoutBelowIfNeeded] ()\n#16\t0x0000000189285a74 in __45-[_UIAnimationCoordinator animateTransition:]_block_invoke ()\n#17\t0x00000001889d8fa8 in +[UIView(UIViewAnimationWithBlocks) _setupAnimationWithDuration:delay:view:options:factory:animations:start:animationStateGenerator:completion:] ()\n#18\t0x0000000188c2f250 in +[UIView(UIViewAnimationWithBlocks) animateWithDuration:delay:usingSpringWithDamping:initialSpringVelocity:options:animations:completion:] ()\n#19\t0x0000000189285a00 in -[_UIAnimationCoordinator animateTransition:] ()\n#20\t0x0000000189285368 in -[_UIAnimationCoordinator animate] ()\n#21\t0x0000000188e1912c in -[UIAlertController _contentViewControllerWillTransitionToSize:withAnimations:] ()\n#22\t0x0000000189308b00 in -[_UIAlertControllerView _sizeOfContentViewControllerChanged] ()\n#23\t0x0000000188e15bc4 in -[UIAlertController viewDidLoad] ()\n#24\t0x00000001889a0c40 in -[UIViewController loadViewIfRequired] ()\n#25\t0x00000001889a0844 in -[UIViewController view] ()\n#26\t0x0000000188f6a880 in -[UIDocumentMenuViewController _setChildViewController:] ()\n#27\t0x0000000188f6a178 in -[UIDocumentMenuViewController _commonInitWithCompletion:] ()\n#28\t0x0000000188f697b0 in -[UIDocumentMenuViewController initWithDocumentTypes:inMode:] ()\n\nRegression:\n\nTested on iPad Air 2, iOS 9.2. \n\nNotes:\n\nRelated mentions of the porblem found online:\n - https://forums.developer.apple.com/message/125180#125180\n - http://stackoverflow.com/questions/35457136/auto-layout-error-using-uidocumentmenuviewcontroller\n - perhaps rdar://24858445"
    email: matej@bukovinski.com
    modified: "2016-07-21T15:09:52.80302Z"
    number: "27471372"
    number_intvalue: 27471372
    originated: 21-Jul-2016 05:09 PM
    parent_number: '&{NULL_VALUE}'
    product: iOS
    product_version: "9.3"
    reproducible: Always
    resolved: ""
    status: Open
    title: UIDocumentMenuViewController Auto Layout error
