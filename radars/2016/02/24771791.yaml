apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "24771791"
    labels:
        datastore_id: "4975683742728192"
data:
    classification: Crash/Hang/Data Loss
    created: "2016-02-22T18:32:11.72424Z"
    description: "Summary:\nibtool version 6.x will crash attempting to compile a storyboard using text styles it doesn’t recognize. For example, just adding UILabel with UIFontTextStyleTitle1, or UIFontTextStyleCallout as the font will cause the crash.\n\nSteps to Reproduce:\n1. Create a empty storyboard.\n2. Add a UILabel to the view, and set its font to either UIFontTextStyleTitle1 (or 2 or 3), or UIFontTextStyleCallout.\n3. Compile the storyboard using ibtool version 6.X (i.e Xcode 6) using the following command:\n\nibtool --errors --warnings --notices --output-format human-readable-text --compile outdir [NameOfStoryboard].storyboard\n\nExpected Results:\nibtool should warn that the storyboard contains text styles it does not recognize, and either fail, or perhaps succeed with those text styles ignored.\n\nActual Results:\nibtool crashes with:\nException name: NSInternalInconsistencyException\nException reason: Expecting a text style, got nil!\n\nNotes:\nI’ve attached an empty Xcode project with Main.storyboard which includes labels using the iOS 9 font styles. Compiling Main.storyboard from the command line using ibtool should show the crash, if ibtool is version 6.x.\n\nHere’s a log of the crash in my terminal:\n\n——————————————————————————————————————————————————————\n\nrizretina:Base.lproj rizwan$ ibtool --version\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n\t<key>com.apple.ibtool.version</key>\n\t<dict>\n\t\t<key>bundle-version</key>\n\t\t<string>7706</string>\n\t\t<key>short-bundle-version</key>\n\t\t<string>6.3.2</string>\n\t</dict>\n</dict>\n</plist>\nrizretina:Base.lproj rizwan$ ibtool --errors --warnings --notices --output-format human-readable-text --compile outdir Main.storyboard \n2016-02-22 10:22:55.015 Interface Builder Cocoa Touch Tool[87372:19078013] *** Assertion failure in -[UICTFont encodeWithCoder:], /SourceCache/UIFoundation_Sim/UIFoundation-376.14/UIFoundation/iOS/UIFont.m:665\n2016-02-22 10:22:55.824 ibtoold[87288:19059794] [MT] DVTAssertions: ASSERTION FAILURE in /SourceCache/IDEInterfaceBuilder/IDEInterfaceBuilder-7706/InterfaceBuilderKit/Utilities/IBAbstractMessageChannelInterfaceBuilderToolProxy.m:38\nDetails:  Failed to compile nib consisting of IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBLayoutConstraint, IBProxyObject, IBProxyObject, IBUILabel, IBUILabel, IBUILabel, IBUIView, IBUIView, IBUIViewControllerAutolayoutGuide, and IBUIViewControllerAutolayoutGuide.\n\nEncountered an error communicating with Interface Builder Cocoa Touch Tool. If you choose to file a crash report or Radar for this issue, please check Console.app for crash reports for \"Interface Builder Cocoa Touch Tool\" and include their content in your crash report.\n\nException name: NSInternalInconsistencyException\nException reason: Expecting a text style, got nil!\nException backtrace: \n  0. CoreFoundation           0x0000000112566c4d __exceptionPreprocess\n  1. libobjc.A.dylib          0x00000001112f6bb7 objc_exception_throw\n  2. CoreFoundation           0x0000000112566aca +[NSException raise:format:arguments:]\n  3. Foundation               0x0000000110f0a98f -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:]\n  4. UIFoundation             0x00000001115b7ed4 -[UIFont encodeWithCoder:]\n  5. UIKit                    0x000000010f2f7e0d -[UINibEncoder encodeObject:forKey:]\n  6. UIKit                    0x000000010f09d1ec -[UILabel encodeWithCoder:]\n  7. UIKit                    0x000000010f2f7e0d -[UINibEncoder encodeObject:forKey:]\n  8. UIKit                    0x000000010f2f7294 -[UINibEncoder serializeArray:]\n  9. UIKit                    0x000000010f2f7e0d -[UINibEncoder encodeObject:forKey:]\n 10. UIKit                    0x000000010ef2e91d -[UIView encodeWithCoder:]\n 11. UIKit                    0x000000010f2f7e0d -[UINibEncoder encodeObject:forKey:]\n 12. UIKit                    0x000000010f2f7294 -[UINibEncoder serializeArray:]\n 13. UIKit                    0x000000010f2f7e0d -[UINibEncoder encodeObject:forKey:]\n 14. UIKit                    0x000000010ef2e91d -[UIView encodeWithCoder:]\n 15. UIKit                    0x000000010f2f7e0d -[UINibEncoder encodeObject:forKey:]\n 16. UIKit                    0x000000010f2f7294 -[UINibEncoder serializeArray:]\n 17. UIKit                    0x000000010f2f7e0d -[UINibEncoder encodeObject:forKey:]\n 18. IBCocoaTouchToolFoundation 0x000000010ee3cfcd -[IBCocoaTouchToolNibFactory encodeNibContentWithCoder:]\n 19. IBCocoaTouchToolFoundation 0x000000010ee3d170 -[IBCocoaTouchToolNibFactory nibDataWithMinimumCompatibility:]\n 20. IBCocoaTouchToolFoundation 0x000000010ee3d698 +[IBCocoaTouchToolNibFactory nibDataFromObjects:customClasses:topLevelObjects:traitStorageLists:accessibilityConfigurations:connections:keyValuePairs:visibleWindows:minimumCompatibility:]\n 21. IBCocoaTouchToolFoundation 0x000000010ee10860 -[IBCocoaTouchTool compileNibForRequest:minimumCompatibility:layoutInfo:imagesToImageNames:]\n 22. IBFoundation             0x0000000110b23549 __80-[IBMessageReceiveChannel deliverMessage:toTarget:withArguments:context:result:]_block_invoke\n 23. IBFoundation             0x0000000110b232a6 -[IBMessageReceiveChannel deliverMessage:toTarget:withArguments:context:result:]\n 24. IBFoundation             0x0000000110b22f90 __88-[IBMessageReceiveChannel runBlockingReceiveLoopNotifyingQueue:notifyingTarget:context:]_block_invoke\n 25. libdispatch.dylib        0x0000000115b3e964 _dispatch_client_callout\n 26. libdispatch.dylib        0x0000000115b2b818 _dispatch_barrier_sync_f_slow_invoke\n 27. libdispatch.dylib        0x0000000115b3e964 _dispatch_client_callout\n 28. libdispatch.dylib        0x0000000115b29a59 _dispatch_main_queue_callback_4CF\n 29. CoreFoundation           0x00000001124ce1f9 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__\n 30. CoreFoundation           0x000000011248fdcb __CFRunLoopRun\n 31. CoreFoundation           0x000000011248f366 CFRunLoopRunSpecific\n 32. Foundation               0x0000000110eabf92 -[NSRunLoop(NSRunLoop) runMode:beforeDate:]\n 33. IBFoundation             0x0000000110b01c20 -[IBAbstractPlatformTool startServingReceiveChannel:]\n 34. IBFoundation             0x0000000110b01daf -[IBAbstractPlatformTool startServingSocket:]\n 35. IBFoundation             0x0000000110b02072 +[IBAbstractPlatformTool main]\n 36. ???                      0x000000010ed96be7 ???\n 37. libdyld.dylib            0x0000000115b6f145 start\nException info:{\n}\n\nFunction: __IBAssertMarshallingFailureWithUniqueBacktrace_block_invoke\nThread:   <NSThread: 0x7fef4b422b40>{number = 1, name = main}\nHints: None\nBacktrace:\n  0  0x0000000106feaed1 -[DVTAssertionHandler handleFailureInFunction:fileName:lineNumber:assertionSignature:messageFormat:arguments:] (in DVTFoundation)\n  1  0x0000000106fea66b _DVTAssertionHandler (in DVTFoundation)\n  2  0x0000000106fea8ce _DVTAssertionFailureHandler (in DVTFoundation)\n  3  0x0000000107f10338 __IBAssertMarshallingFailureWithUniqueBacktrace_block_invoke (in IDEInterfaceBuilderKit)\n  4  0x0000000107f10157 IBAssertMarshallingFailureWithUniqueBacktrace (in IDEInterfaceBuilderKit)\n  5  0x0000000107f0ffae IBAssertMarshallingFailure (in IDEInterfaceBuilderKit)\n  6  0x000000010f39d88a (in IDEInterfaceBuilderCocoaTouchIntegration)\n  7  0x000000010f39e3b9 (in IDEInterfaceBuilderCocoaTouchIntegration)\n  8  0x0000000107eaf2cc -[IBDocumentCompiler invokeWhileUsingSourceAsIntermediateDocument:] (in IDEInterfaceBuilderKit)\n  9  0x0000000107eaf5dd -[IBDocumentCompiler invokeWithIntermediateDocumentOfTargetRuntime:alwaysCopy:block:] (in IDEInterfaceBuilderKit)\n 10  0x000000010f39dc87 (in IDEInterfaceBuilderCocoaTouchIntegration)\n 11  0x000000010f38c0d2 (in IDEInterfaceBuilderCocoaTouchIntegration)\n 12  0x00000001080c1b84 -[IBStoryboardSceneCompilationGroup compilationResultsForCompilationUnits:options:returningErrors:] (in IDEInterfaceBuilderKit)\n 13  0x00000001080b294a -[IBStoryboardDocumentCompiler compileUnitsFromCompilationGroups:filter:options:errors:] (in IDEInterfaceBuilderKit)\n 14  0x00000001080b3c23 __78-[IBStoryboardDocumentCompiler compileContentsOfStoryboardWithOptions:errors:]_block_invoke (in IDEInterfaceBuilderKit)\n 15  0x0000000107f8dde6 IBWithAutoInvalidationPool (in IDEInterfaceBuilderKit)\n 16  0x00000001080b39c5 -[IBStoryboardDocumentCompiler compileContentsOfStoryboardWithOptions:errors:] (in IDEInterfaceBuilderKit)\n 17  0x00000001080b3fc6 -[IBStoryboardDocumentCompiler internalCompileWithOptions:error:] (in IDEInterfaceBuilderKit)\n 18  0x000000010f38c2e4 (in IDEInterfaceBuilderCocoaTouchIntegration)\n 19  0x00000001080b4906 __57-[IBStoryboardDocumentCompiler compileWithOptions:error:]_block_invoke (in IDEInterfaceBuilderKit)\n 20  0x0000000107eaf3e9 -[IBDocumentCompiler invokeWithIntermediateDocument:] (in IDEInterfaceBuilderKit)\n 21  0x0000000107eaf58d -[IBDocumentCompiler invokeWithIntermediateDocumentOfTargetRuntime:alwaysCopy:block:] (in IDEInterfaceBuilderKit)\n 22  0x00000001080b45ac -[IBStoryboardDocumentCompiler compileWithOptions:error:] (in IDEInterfaceBuilderKit)\n 23  0x0000000107eaf777 +[IBDocumentCompiler compileContentsOfDocument:options:error:] (in IDEInterfaceBuilderKit)\n 24  0x0000000107e6a390 __47-[IBDocument compiledPackageWithOptions:error:]_block_invoke (in IDEInterfaceBuilderKit)\n 25  0x0000000107ea2d25 -[IBDocumentAutolayoutManager assertIfArbitrationIsScheduledDuring:] (in IDEInterfaceBuilderKit)\n 26  0x0000000107e6a2e7 -[IBDocument compiledPackageWithOptions:error:] (in IDEInterfaceBuilderKit)\n 27  0x0000000106df3f0a (in ibtoold)\n 28  0x0000000106df0b64 (in ibtoold)\n 29  0x0000000106df3370 (in ibtoold)\n 30  0x0000000106df9233 (in ibtoold)\n 31  0x0000000106df97b0 (in ibtoold)\n 32  0x0000000106df9683 (in ibtoold)\n 33  0x0000000106de866a (in ibtoold)\n 34  0x0000000106df8e2c (in ibtoold)\n 35  0x0000000106df8074 (in ibtoold)\n 36  0x00007fff9f2115ad start (in libdyld.dylib)\nrizretina:Base.lproj rizwan$"
    email: rsattar@gmail.com
    modified: "2016-02-22T18:32:11.72442Z"
    number: "24771791"
    number_intvalue: 24771791
    originated: 22-Feb-2016 10:31 AM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: ibtool 6.3.2
    reproducible: Always
    resolved: ""
    status: Open
    title: ibtool 6.xc crashes on storyboard with iOS 9 Text Styles
