apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "28789460"
    labels:
        datastore_id: "4964578215591936"
data:
    classification: Crash/Hang/Data Loss
    created: "2016-10-15T21:56:36.34426Z"
    description: "Summary:\r\nWhen opening lots of tabs and/or using Safari for long periods of time, com.apple.WebKit.WebContent will open so many files (well over 10,000) that other applications will start misbehaving and the kernel will start logging (to the system log) that the file table is full:\r\n\r\n    kernel: file: table is full\r\n\r\nSteps to Reproduce:\r\n1. Open lots of tabs (or just use Safari for a few days without relaunching it)\r\n\r\n\r\nExpected Results:\r\nSafari lets me browse the web and doesn’t impact the rest of the system.\r\n\r\n\r\nActual Results:\r\nAt some point, Safari (actually com.apple.WebKit.WebContent) will have opened so many files that it won’t display web content anymore, and other applications will fail to launch or start misbehaving in other ways. The kernel will start logging `kernel: file: table is full` to the system log.\r\nWhen I notice the problems, lsof(1) usually lists just under 13,000 open files for com.apple.WebKit.WebContent processes. No other process will (when aggregated by name) have more than a few hundred files open.\r\n\r\n\r\nVersion:\r\nSafari 10.0 (11602.1.50.0.10)\r\nOS X 10.11.6 (15G1004)\r\n\r\nNotes:\r\nAttached is the report generated by sysdiagnose(1) in a case when Safari had over 11,000 files open but problems were not (yet) occurring.\r\nAccording to its output both lsof and footprint “timed out”, but the contained lsof.txt seems to be complete.\r\n\r\nThere are twitter conversations about this problem starting at:\r\n* https://twitter.com/mkhl/status/780049254123466752\r\n* https://twitter.com/mkhl/status/781100400527175681\r\n\r\nI use a few Safari Extensions but can reproduce the problem without any of them enabled.\r\n\r\nConfiguration:\r\nSafari 10.0 on OS X 10.11.6 on a MacBookPro12,1\r\n\r\nAttachments:\r\n'sysdiagnose_2016.10.15_18-40-25+0200.tar.gz' was successfully uploaded."
    email: martin.kuehl@gmail.com
    modified: "2017-04-07T18:20:10.66684Z"
    number: "28789460"
    number_intvalue: 28789460
    originated: "2016-10-15"
    parent_number: '&{NULL_VALUE}'
    product: Safari
    product_version: Safari 10.0 (11602.1.50.0.10)
    reproducible: Always
    resolved: "28708742"
    status: Duplicate
    title: 'Safari 10.0: Safari opens too many files'
