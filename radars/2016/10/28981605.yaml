apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "28981605"
    labels:
        datastore_id: "5617554307416064"
data:
    classification: UI
    created: "2016-10-27T15:09:20.80947Z"
    description: "Summary:\r\nI create a WKWebView and load data into it. I long press to select text and bring up the context menu.\r\n\r\nWhile the context menu is showing, I create a WKWebView in the background (but never show its view, or add its view to any visible view controller) and load some data into it. As soon as the data finishes loading, the UIMenuController on the visible WKWebView dissappears\r\n\r\nSteps to Reproduce:\r\n1. Create WKWebView\r\n2. add it to visible VC\r\n3. Load content into WKWebView\r\n4. Long press on some text to bring up the context menu\r\n5. Create second WKWebView instance, but dont add it to any view or controller.\r\n6. Load data into second WKWebView\r\n\r\n\r\nExpected Results:\r\nContext menu on first WKWebView should stay in place\r\n\r\nActual Results:\r\nWhen content is finished loading in second WKWebView, context menu dissappears\r\n\r\nVersion:\r\niOS 10.1\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\nreproducible on iphone 6+ and ipad air\r\n\r\n\r\ncallstack at time of menu hiding :\r\n<_NSCallStackArray 0x7fe186f97fa0>(\r\n0   ???                                 0x0000000129637a4a 0x0 + 4989352522,\r\n1   Snapplify                           0x000000010c0d9c40 main + 0,\r\n2   CoreFoundation                      0x000000010d716c8c __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 12,\r\n3   CoreFoundation                      0x000000010d7169cb _CFXRegistrationPost + 427,\r\n4   CoreFoundation                      0x000000010d716732 ___CFXNotificationPost_block_invoke + 50,\r\n5   CoreFoundation                      0x000000010d75f1e2 -[_CFXNotificationRegistrar find:object:observer:enumerator:] + 1986,\r\n6   CoreFoundation                      0x000000010d60e679 _CFXNotificationPost + 633,\r\n7   Foundation                          0x000000010ea4ecd9 -[NSNotificationCenter postNotificationName:object:userInfo:] + 66,\r\n8   UIKit                               0x0000000111c4e828 -[UIMenuController(UICalloutBarDelegateConformance) calloutBar:willStartAnimation:] + 443,\r\n9   UIKit                               0x0000000111c35055 -[UICalloutBar _fadeAfterCommand:] + 266,\r\n10  UIKit                               0x0000000111c4f90a -[UIWebSelectionAssistant resignedFirstResponder] + 41,\r\n11  WebKit                              0x000000011dcfbfd5 -[WKContentView _didCommitLoadForMainFrame] + 27,\r\n12  WebKit                              0x000000011dc73d2d _ZN6WebKit12WebPageProxy21didCommitLoadForFrameEyyRKN3WTF6StringEbjRKN7WebCore15CertificateInfoERKNS_8UserDataE + 481,\r\n13  WebKit                              0x000000011dc98404 _ZN3IPC22callMemberFunctionImplIN6WebKit12WebPageProxyEMS2_FvyyRKN3WTF6StringEbjRKN7WebCore15CertificateInfoERKNS1_8UserDataEENSt3__15tupleIJyyS4_bjS8_SB_EEEJLm0ELm1ELm2ELm3ELm4ELm5ELm6EEEEvPT_T0_OT1_St14index_sequenceIJXspT2_EEE + 68,\r\n14  WebKit                              0x000000011dc92e60 _ZN3IPC13handleMessageIN8Messages12WebPageProxy21DidCommitLoadForFrameEN6WebKit12WebPageProxyEMS5_FvyyRKN3WTF6StringEbjRKN7WebCore15CertificateInfoERKNS4_8UserDataEEEEvRNS_14MessageDecoderEPT0_T1_ + 109,\r\n15  WebKit                              0x000000011db44cd7 _ZN3IPC18MessageReceiverMap15dispatchMessageERNS_10ConnectionERNS_14MessageDecoderE + 113,\r\n16  WebKit                              0x000000011dcc7270 _ZN6WebKit15WebProcessProxy17didReceiveMessageERN3IPC10ConnectionERNS1_14MessageDecoderE + 24,\r\n17  WebKit                              0x000000011db02d76 _ZN3IPC10Connection15dispatchMessageENSt3__110unique_ptrINS_14MessageDecoderENS1_14default_deleteIS3_EEEE + 102,\r\n18  WebKit                              0x000000011db0503e _ZN3IPC10Connection18dispatchOneMessageEv + 114,\r\n19  JavaScriptCore                      0x000000010f92b635 _ZN3WTF7RunLoop11performWorkEv + 437,\r\n20  JavaScriptCore                      0x000000010f92bd12 _ZN3WTF7RunLoop11performWorkEPv + 34,\r\n21  CoreFoundation                      0x000000010d672301 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17,\r\n22  CoreFoundation                      0x000000010d66822c __CFRunLoopDoSources0 + 556,\r\n23  CoreFoundation                      0x000000010d6676e3 __CFRunLoopRun + 867,\r\n24  CoreFoundation                      0x000000010d6670f8 CFRunLoopRunSpecific + 488,\r\n25  GraphicsServices                    0x0000000115731ad2 GSEventRunModal + 161,\r\n26  UIKit                               0x00000001116d8f09 UIApplicationMain + 171,\r\n27  Snapplify                           0x000000010c0d9c7e main + 62,\r\n28  libdyld.dylib                       0x000000011390892d start + 1\r\n)"
    email: zkrige@gmail.com
    modified: "2016-10-27T15:09:20.80974Z"
    number: "28981605"
    number_intvalue: 28981605
    originated: 27 Oct 2016
    parent_number: '&{NULL_VALUE}'
    product: iOS SDK
    product_version: "10.1"
    reproducible: Always
    resolved: ""
    status: Open
    title: UIMenuController dissappears when a background webpage finishes loading
