apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "29568241"
    labels:
        datastore_id: "5547040608092160"
data:
    classification: Serious Bug
    created: "2016-12-08T19:58:47.01993Z"
    description: "Summary:\r\nI've been noticing this for months and finally dug into it more deeply. In a nutshell:\r\n\r\n1. Every time I launch Xcode with my phone attached, it tries to install WatchOS 3.1 symbols.\r\n2. It downloads a fresh copy to a temporary folder.\r\n3. It mounts the downloaded package in a temporary mountpoint.\r\n4. It fails to copy the resulting contents into ~/Library/Developer/Xcode/watchOS DeviceSupport/Watch1,2 3.1 (14S471)/Symbols/\r\n5. It waits until next time I launch the app and tries, fails again.\r\n\r\nThis bug has cost me massive bandwidth overruns because the last thing I've expected has been 200MB downloads every single time I launch Xcode with my phone attached :(\r\n\r\nTrying to get to the bottom of it, I have this to offer: I discovered the DVTDownloadableLeaveTemporaryFiles user default, which allowed me to repeatedly try the install process without re-downloading the 200MB file each time. I also discovered the DVTDownloadableLogLevel which yields this when the installation fails. It seems like some kind of authentication/sandbox issue, but I don't know what might be atypical about my setup.\r\n\r\nI'm mostly testing on Xcode 8.2 betas but I also reproduce this on 8.1 GM: \r\n\r\n2016-12-07 22:53:43.055 Xcode[45418:2032192]  DVTDownloadable: Will install pkgs (\r\n    \"file:///private/var/folders/c6/rrr71bmj46797fn0qmhr11z80000gn/T/attached-image-3b1fe8392683d721919f64d80f8482dc3ff31182/Watch1,1_Watch1,2/Watch1,1_Watch1,2.pkg\"\r\n) from {\r\n    dependencies =     (\r\n    );\r\n    fileSize = 0;\r\n    identifier = \"Xcode.Symbols.Watch1,2.14S471\";\r\n    name = \"Symbols for watchOS 3.1 (14S471)\";\r\n    source = \"http:/adcdownload.apple.com/Developer_Tools/watchOS_14S471/Watch1_2_14S471.dmg\";\r\n    userInfo =     {\r\n        InstallPrefix = \"/Volumes/Data/daniel/Library/Developer/Xcode/watchOS DeviceSupport/Watch1,2 3.1 (14S471)/Symbols\";\r\n        InstalledIfAllPathsArePresent =         (\r\n            \"/Volumes/Data/daniel/Library/Developer/Xcode/watchOS DeviceSupport/Watch1,2 3.1 (14S471)/Symbols\"\r\n        );\r\n        RequiresADCAuthentication = 1;\r\n    };\r\n    version = \"3.1\";\r\n}\r\n2016-12-07 22:53:43.056 Xcode[45418:2032126]  DVTDownloadable: Requiring trust level 500\r\n2016-12-07 22:53:43.476 Xcode[45418:2029807] [MT] DVTDownloadable: [Proxied device symbols coordinator] Download error Error Domain=PKInstallErrorDomain Code=100 \"Could not download and install Symbols for watchOS 3.1 (14S471). Authorization is required to install the packages.\" UserInfo={NSLocalizedDescription=Could not download and install Symbols for watchOS 3.1 (14S471). Authorization is required to install the packages., NSUnderlyingError=0x7ff48d1bb4b0 {Error Domain=NSCocoaErrorDomain Code=260 \"The file “12011D4B-F089-4174-9C2C-9206A324E377.sandbox” couldn’t be opened because there is no such file.\" UserInfo={NSFilePath=/Volumes/Data/.PKInstallSandboxManager/12011D4B-F089-4174-9C2C-9206A324E377.sandbox, NSUnderlyingError=0x7ff47330a760 {Error Domain=NSPOSIXErrorDomain Code=2 \"No such file or directory\"}}}}\r\n2016-12-07 22:53:43.476 Xcode[45418:2029807] [MT] DVTDownloadable: [Proxied device symbols coordinator] Unable to download symbols Error Domain=PKInstallErrorDomain Code=100 \"Could not download and install Symbols for watchOS 3.1 (14S471). Authorization is required to install the packages.\" UserInfo={NSLocalizedDescription=Could not download and install Symbols for watchOS 3.1 (14S471). Authorization is required to install the packages., NSUnderlyingError=0x7ff48d1bb4b0 {Error Domain=NSCocoaErrorDomain Code=260 \"The file “12011D4B-F089-4174-9C2C-9206A324E377.sandbox” couldn’t be opened because there is no such file.\" UserInfo={NSFilePath=/Volumes/Data/.PKInstallSandboxManager/12011D4B-F089-4174-9C2C-9206A324E377.sandbox, NSUnderlyingError=0x7ff47330a760 {Error Domain=NSPOSIXErrorDomain Code=2 \"No such file or directory\"}}}}\r\n\r\nSteps to Reproduce:\r\n\r\n\r\nExpected Results:\r\n\r\n\r\nActual Results:\r\n\r\n\r\nVersion:\r\n10.12.2 (16C60b\r\nVersion 8.2 beta (8C30a) \r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\n\r\n\r\nAttachments:"
    email: jalkut@gmail.com
    modified: "2016-12-08T19:58:47.02012Z"
    number: "29568241"
    number_intvalue: 29568241
    originated: 07-Dec-2016 11:01 PM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: Version 8.2 beta (8C30a)
    reproducible: Always
    resolved: ""
    status: Open
    title: Xcode repeatedly fails to install WatchOS symbols
