apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "7433505"
    labels:
        datastore_id: "124401"
data:
    classification: Serious Bug
    created: "2009-12-01T18:46:57.825726Z"
    description: "Summary: \r\niChat's bonjour (local, LAN) file transfer (including inline images) fails when sending from a computer with an active WAN interface that is different to the LAN interface.  This failure is due to the sending host's incorrect advertisement of the 'streamhost' host field, which is set to the WAN interface.\r\n\r\nSteps to Reproduce:\r\n1. Initiate a file transfer with iChat to a computer on a LAN, from a computer with a WAN interface that is different from the LAN interface.\r\n\r\nExpected Results:\r\nOriginating host advertises the LAN address to the recipient for content delivery\r\n\r\nActual Results:\r\nOriginating host provides WAN address incorrectly, which recipient cannot access.  This makes the file transfer fail.\r\n\r\nRegression:\r\nUnknown.\r\n\r\nNotes:\r\n\r\nSee below for communication transcript as recorded on a Macbook Pro running Internet Sharing over Airport (inet address 10.0.2.1), and connected via USB to an iPhone with internet tethering (inet address 192.168.20.2).\r\nTranscript reflects the communication immediately following the sending of an inline image over Bonjour.\r\n\r\nIP 10.0.2.1.61514 > 10.0.2.8.49152\r\n<message to=\"katherineherriman@katherine-herrimans-macbook\" type=\"chat\"><body></body>\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\"><body style=\"background-color:#ebebeb;color:#000000;\"><img alt=\"iChat Image(192354539)-1.png\" src=\"message-attachments:1\" width=\"226\" height=\"115\" /></body></html><x xmlns=\"jabber:x:event\"><composing/></x>\r\n<x xmlns=\"http://www.apple.com/xmpp/message-attachments\"><attachment id=\"1\"><sipub xmlns=\"http://jabber.org/protocol/sipub\" from=\"mike@michael-tysons-macbook-pro\" id=\"sipubid_1190CDE7\" mime-type=\"binary/octet-stream\" profile=\"http://jabber.org/protocol/si/profile/file-transfer\"><file xmlns=\"http://jabber.org/protocol/si/profile/file-transfer\" xmlns:ichat=\"apple:profile:transfer-extensions\" name=\"iChat Image(192354539)-1.png\" size=\"15181\" ichat:posixflags=\"000001A4\"/></sipub>\r\n</attachment>\r\n</x>\r\n<iq type=\"set\" id=\"iChat_140E0F76\" to=\"katherineherriman@katherine-herrimans-macbook\"><si xmlns=\"http://jabber.org/protocol/si\" id=\"sid_66EF438D\" mime-type=\"binary/octet-stream\" profile=\"http://jabber.org/protocol/si/profile/file-transfer\"><file xmlns=\"http://jabber.org/protocol/si/profile/file-transfer\" xmlns:ichat=\"apple:profile:transfer-extensions\" name=\"iChat Image(192354539)-1.png\" size=\"15181\" ichat:posixflags=\"000001A4\"/><feature xmlns=\"http://jabber.org/protocol/feature-neg\"><x xmlns=\"jabber:x:data\" type=\"form\"><field type=\"list-single\" var=\"stream-method\"><option><value>http://jabber.org/protocol/bytestreams</value>\r\n\r\n</option>\r\n</field>\r\n</x>\r\n</feature>\r\n</si>\r\n</iq>\r\n</message>\r\n\r\nP 10.0.2.8.49152 > 10.0.2.1.61514\r\n<iq type=\"get\" id=\"iChat_67BA4EFD\" to=\"mike@michael-tysons-macbook-pro\">\r\n<start xmlns=\"http://jabber.org/protocol/sipub\" id=\"sipubid_1190CDE7\"/>\r\n</iq>\r\n\r\nIP 10.0.2.1.61514 > 10.0.2.8.49152\r\n<iq type=\"result\" id=\"iChat_67BA4EFD\" to=\"katherineherriman@katherine-herrimans-macbook\"><starting xmlns=\"http://jabber.org/protocol/sipub\" sid=\"sid_3352255A\"/></iq>\r\n\r\nIP 10.0.2.1.61514 > 10.0.2.8.49152\r\n<iq type=\"set\" id=\"iChat_109CF92E\" to=\"katherineherriman@katherine-herrimans-macbook\"><si xmlns=\"http://jabber.org/protocol/si\" id=\"sid_3352255A\" mime-type=\"binary/octet-stream\" profile=\"http://jabber.org/protocol/si/profile/file-transfer\"><file xmlns=\"http://jabber.org/protocol/si/profile/file-transfer\" xmlns:ichat=\"apple:profile:transfer-extensions\" name=\"iChat Image(192354539)-1.png\" size=\"15181\" ichat:posixflags=\"000001A4\"/><feature xmlns=\"http://jabber.org/protocol/feature-neg\"><x xmlns=\"jabber:x:data\" type=\"form\"><field type=\"list-single\" var=\"stream-method\"><option><value>http://jabber.org/protocol/bytestreams</value>\r\n</option>\r\n</field>\r\n</x>\r\n</feature>\r\n</si>\r\n</iq>\r\n\r\nIP 10.0.2.8.49152 > 10.0.2.1.61514\r\n<iq id=\"iChat_109CF92E\" to=\"mike@michael-tysons-macbook-pro\" type=\"result\">\r\n<si xmlns=\"http://jabber.org/protocol/si\">\r\n<feature xmlns='http://jabber.org/protocol/feature-neg'><x xmlns='jabber:x:data' type='submit'><field var='stream-method'><value>http://jabber.org/protocol/bytestreams</value></field></x></feature></si>\r\n</iq>\r\n\r\nIP 10.0.2.1.61514 > 10.0.2.8.49152\r\n<iq type=\"set\" id=\"iChat_7FDCC233\" to=\"katherineherriman@katherine-herrimans-macbook\"><query xmlns=\"http://jabber.org/protocol/bytestreams\" sid=\"sid_3352255A\"><streamhost jid=\"mike@michael-tysons-macbook-pro\" host=\"192.168.20.2\" port=\"61497\"/></query>\r\n</iq>\r\n\r\nIP 10.0.2.8.49152 > 10.0.2.1.61514\r\n<iq id=\"iChat_7FDCC233\" to=\"mike@michael-tysons-macbook-pro\" type=\"error\">\r\n<error code=\"404\" type=\"cancel\">\r\n<item-not-found xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"/>\r\n</error>\r\n</iq>\r\n\r\n\r\n\r\nOutput from 'ifconfig' on originating host (en4 is iPhone interface, en1 is Airport interface):\r\n\r\nlo0: flags=8049<UP,LOOPBACK,RUNNING,MULTICAST> mtu 16384\r\n\tinet6 ::1 prefixlen 128 \r\n\tinet6 fe80::1%lo0 prefixlen 64 scopeid 0x1 \r\n\tinet 127.0.0.1 netmask 0xff000000 \r\ngif0: flags=8010<POINTOPOINT,MULTICAST> mtu 1280\r\nstf0: flags=0<> mtu 1280\r\nen0: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500\r\n\tinet 192.168.2.1 netmask 0xffffff00 broadcast 192.168.2.255\r\n\tether 00:1f:f3:cb:59:c6 \r\n\tmedia: autoselect status: inactive\r\n\tsupported media: autoselect 10baseT/UTP <half-duplex> 10baseT/UTP <full-duplex> 10baseT/UTP <full-duplex,hw-loopback> 10baseT/UTP <full-duplex,flow-control> 100baseTX <half-duplex> 100baseTX <full-duplex> 100baseTX <full-duplex,hw-loopback> 100baseTX <full-duplex,flow-control> 1000baseT <full-duplex> 1000baseT <full-duplex,hw-loopback> 1000baseT <full-duplex,flow-control> none\r\nfw0: flags=8802<BROADCAST,SIMPLEX,MULTICAST> mtu 4078\r\n\tlladdr 00:1f:f3:ff:fe:7d:05:74 \r\n\tmedia: autoselect <full-duplex> status: inactive\r\n\tsupported media: autoselect <full-duplex>\r\nen2: flags=8963<UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST> mtu 1500\r\n\tinet6 fe80::21c:42ff:fe00:8%en2 prefixlen 64 scopeid 0x8 \r\n\tinet 10.211.55.2 netmask 0xffffff00 broadcast 10.211.55.255\r\n\tether 00:1c:42:00:00:08 \r\n\tmedia: autoselect status: active\r\n\tsupported media: autoselect\r\nen3: flags=8963<UP,BROADCAST,SMART,RUNNING,PROMISC,SIMPLEX,MULTICAST> mtu 1500\r\n\tinet6 fe80::21c:42ff:fe00:9%en3 prefixlen 64 scopeid 0x9 \r\n\tinet 10.37.129.2 netmask 0xffffff00 broadcast 10.37.129.255\r\n\tether 00:1c:42:00:00:09 \r\n\tmedia: autoselect status: active\r\n\tsupported media: autoselect\r\nen4: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500\r\n\tinet6 fe80::221:e9ff:fe92:5db7%en4 prefixlen 64 scopeid 0x7 \r\n\tinet 192.168.20.2 netmask 0xffffff00 broadcast 192.168.20.255\r\n\tether 00:21:e9:92:5d:b7 \r\n\tmedia: 10baseT/UTP status: active\r\n\tsupported media: 10baseT/UTP\r\nen1: flags=8863<UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST> mtu 1500\r\n\tinet 10.0.2.1 netmask 0xffffff00 broadcast 10.0.2.255\r\n\tinet 169.254.96.169 netmask 0xffff0000 broadcast 169.254.255.255\r\n\tether 00:1f:5b:cb:6a:b9 \r\n\tmedia: autoselect status: active\r\n\tsupported media: autoselect"
    email: michael@tyson.id.au
    modified: "2011-08-28T05:43:20.239544Z"
    number: "7433505"
    number_intvalue: 7433505
    originated: 01-Dec-2009 07:44 PM
    parent_number: '&{NULL_VALUE}'
    product: Mac OS X
    product_version: 10.6.2
    reproducible: Always
    resolved: ""
    status: Open
    title: iChat selects address of incorrect interface for Bonjour file transfer
