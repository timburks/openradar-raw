apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "17834499"
    labels:
        datastore_id: "5271299664379904"
data:
    classification: Enhancement
    created: "2014-07-29T14:21:34.054727Z"
    description: "Summary:\r\nI want to use a UIPopoverPresentationController, in order to display a modal view controller in a popover on iPad, but I also want to be able to use a custom presentation controller on iPhone, in order to separate presentation and transition logic as suggested in Apple's iOS 8 presentation controller WWDC session.\r\n\r\nSteps to Reproduce:\r\nI'm having trouble figuring out how to use a UIPopoverPresentationController but also provide custom presentation logic when my view controller is presented on a compact device.\r\n \r\nI have a view controller that gets presented differently on iPhone and on iPad:\r\n \r\n* iPhone: Modally, as the child of a custom container view controller, presented with a custom animation controller\r\n* iPad: In a popover\r\n \r\nI’m in the process of trying to implement this same behavior using the new UIPresentationController classes introduced in iOS 8, and seem to have already hit an unfortunate limitation.\r\n \r\nIt’s easy to get the popover showing up correctly on iPad, with just the following code:\r\n \r\npresentedController.modalPresentationStyle = UIModalPresentationPopover;\r\npresentedController.popoverPresentationController.permittedArrowDirections = UIPopoverArrowDirectionUp;\r\npresentedController.popoverPresentationController.sourceRect = button.bounds;\r\npresentedController.popoverPresentationController.sourceView = button;\r\npresentedController.popoverPresentationController.delegate = self;\r\n[self presentViewController:presentedController animated:YES completion:nil];\r\n \r\nOn iPhone, this same controller will be presented modally, but first I need to wrap it in a custom container view controller. To do this, I implement a couple of methods from the UIPopoverPresentationControllerDelegate protocol:\r\n \r\n- (UIModalPresentationStyle)adaptivePresentationStyleForPresentationController:(UIPresentationController *)controller {\r\n    return UIModalPresentationFullScreen;\r\n}\r\n \r\n- (UIViewController *)presentationController:(UIPresentationController *)presentationController viewControllerForAdaptivePresentationStyle:(UIModalPresentationStyle)style {\r\n    return [[CustomContainerController alloc] initWithRootViewController:presentationController.presentedViewController];\r\n}\r\n \r\nThe custom container controller is animated on screen using a custom animation controller conforming to UIViewControllerAnimatedTransitioning. In iOS 7, this animation controller was also responsible for showing the dimming view.\r\n\r\nAs of iOS 8, adding the dimming view to the view hierarchy and modifying its opacity should no longer be the responsibility of the animation controller. Instead, a custom UIPresentationController subclass should take care of this. \r\n\r\nThe same UIViewControllerTransitioningDelegate that vends our custom animation controller can also vend a custom presentation controller, providing for a cleaner separation of concerns.\r\n\r\nHere’s the problem I’m facing: my UIViewControllerTransitioningDelegate is never asked for a custom presentation controller, presumably because it already has one – the UIPopoverPresentationController that we started with. As such, I seemingly can’t break the ”presentation” out of my custom animation controller, the way that Apple suggests we should.\r\n\r\nExpected Results:\r\nI would expect to be able to either:\r\n\r\nA) Provide a custom UIPresentationController to be used in compact size classes only, even if a UIPopoverPresentationController is being used for normal size class devices.\r\n\r\nB) Customize UIPopoverPresentationController somehow (perhaps by subclassing it?) to be able to specify what the custom presentation should be in compact mode.\r\n\r\nActual Results:\r\nWhen using UIPopoverPresentationController, my UIViewControllerTransitioningDelegate is never asked for a custom presentation controller, presumably because it already has one.\r\n\r\nVersion:\r\niOS 8 SDK beta 4\r\n\r\nConfiguration:\r\niOS 8 simulator"
    email: bryan@irace.me
    modified: "2014-07-29T14:21:34.054877Z"
    number: "17834499"
    number_intvalue: 17834499
    originated: 7/28/2014
    parent_number: '&{NULL_VALUE}'
    product: iOS SDK
    product_version: "8"
    reproducible: Yes
    resolved: ""
    status: Open
    title: Cannot use a custom presentation controller in conjunction with UIPopoverPresentationController
