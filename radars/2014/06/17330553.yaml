apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "17330553"
    labels:
        datastore_id: "4962947587637248"
data:
    classification: ""
    created: "2014-06-16T20:01:47.07802Z"
    description: "Summary:\r\nSwift segfault when I define an enum with at least one possible value inside of a parameterized class.\r\n\r\nSteps to Reproduce:\r\nAttempt to compile the following Swift code, either in Xcode or using command line, or the REPL.\r\n\r\nclass Promise<T> {\r\n  enum Value {\r\n    case Success\r\n  }\r\n}\r\n\r\n\r\nExpected Results:\r\nThe code would compile successfully, or would fail and display a useful error, if this is not permitted.\r\n\r\nActual Results:\r\nIn Xcode, the build fails with a segfault. If the code is put into the REPL, the REPL crashes with \"SIGEGV (Address boundary error)\"\r\n\r\nVersion:\r\nXcode Beta Version 6.0 (6A215l)\r\nOS X 10.9.3 (13D65)\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\nThis has only been tested on my system.\r\n\r\n\r\n\r\nAttachments:\r\n\r\n\r\n\r\nrepl-session.txt:\r\n\r\njeremy:~/s/HelloStack>\r\n/Applications/Xcode6-Beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift\r\nWelcome to Swift!  Type :help for assistance.\r\n  1> class Promise<T> {\r\n  2.       enum Value {\r\n  3.               case Success\r\n  4.       }\r\n  5. }\r\n\r\nfish: Job 1, '/Applications/Xcode6-Beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift' terminated by signal SIGSEGV (Address boundary error)\r\njeremy:~/s/HelloStack>\r\n\r\n\r\n\r\nxcode-errors.txt:\r\n\r\nCompileSwift normal x86_64 com.apple.xcode.tools.swift.compiler\r\n    cd /Users/jeremy/src/HelloStack\r\n    /Applications/Xcode6-Beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -target x86_64-apple-macosx10.9 -module-name HelloStack -O0 -sdk /Applications/Xcode6-Beta.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk -g -module-cache-path /Users/jeremy/Library/Developer/Xcode/DerivedData/ModuleCache -I /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Products/Debug -F /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Products/Debug -c -j4 /Users/jeremy/src/HelloStack/HelloStack/main.swift -output-file-map /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/HelloStack-OutputFileMap.json -serialize-diagnostics -emit-dependencies -emit-module -emit-module-path /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/HelloStack.swiftmodule -Xcc -iquote -Xcc /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-generated-files.hmap -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-own-target-headers.hmap -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-all-target-headers.hmap -Xcc -iquote -Xcc /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-project-headers.hmap -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Products/Debug/include -Xcc -I/Users/jeremy/src/HelloStack/Pods/Headers -Xcc -I/Users/jeremy/src/HelloStack/Pods/Headers/AFNetworking -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/DerivedSources/x86_64 -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/DerivedSources -Xcc -DDEBUG=1 -Xcc -DCOCOAPODS=1 -emit-objc-header -emit-objc-header-path /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/HelloStack-Swift.h\r\n\r\n0  swift                    0x000000010f34b608 llvm::sys::PrintStackTrace(__sFILE*) + 40\r\n1  swift                    0x000000010f34baf4 SignalHandler(int) + 452\r\n2  libsystem_platform.dylib 0x00007fff954005aa _sigtramp + 26\r\n3  libsystem_platform.dylib 0x00007fff514f1058 _sigtramp + 3155102408\r\n4  swift                    0x000000010f55d738 (anonymous namespace)::DeclChecker::computeEnumElementInterfaceType(swift::EnumElementDecl*) + 136\r\n5  swift                    0x000000010f55a499 swift::ASTVisitor<(anonymous namespace)::DeclChecker, void, void, void, void, void, void>::visit(swift::Decl*) + 10777\r\n6  swift                    0x000000010f55cb84 (anonymous namespace)::DeclChecker::visitEnumDecl(swift::EnumDecl*) + 1460\r\n7  swift                    0x000000010f557cee swift::ASTVisitor<(anonymous namespace)::DeclChecker, void, void, void, void, void, void>::visit(swift::Decl*) + 622\r\n8  swift                    0x000000010f558ba7 swift::ASTVisitor<(anonymous namespace)::DeclChecker, void, void, void, void, void, void>::visit(swift::Decl*) + 4391\r\n9  swift                    0x000000010f54b8c0 swift::TypeChecker::typeCheckDecl(swift::Decl*, bool) + 112\r\n10 swift                    0x000000010f537748 swift::performTypeChecking(swift::SourceFile&, swift::TopLevelContext&, unsigned int) + 1256\r\n11 swift                    0x000000010e935b80 swift::CompilerInstance::performSema() + 2048\r\n12 swift                    0x000000010e70facd frontend_main(llvm::ArrayRef<char const*>, char const*, void*) + 1885\r\n13 swift                    0x000000010e70f35d main + 1533\r\n14 libdyld.dylib            0x00007fff932285fd start + 1\r\nStack dump:\r\n0.\tProgram arguments: /Applications/Xcode6-Beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -frontend -c -primary-file /Users/jeremy/src/HelloStack/HelloStack/main.swift -enable-objc-attr-requires-objc-module -target x86_64-apple-macosx10.9 -module-name HelloStack -sdk /Applications/Xcode6-Beta.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk -I /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Products/Debug -F /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Products/Debug -g -module-cache-path /Users/jeremy/Library/Developer/Xcode/DerivedData/ModuleCache -Xcc -iquote -Xcc /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-generated-files.hmap -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-own-target-headers.hmap -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-all-target-headers.hmap -Xcc -iquote -Xcc /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/HelloStack-project-headers.hmap -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Products/Debug/include -Xcc -I/Users/jeremy/src/HelloStack/Pods/Headers -Xcc -I/Users/jeremy/src/HelloStack/Pods/Headers/AFNetworking -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/DerivedSources/x86_64 -Xcc -I/Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/DerivedSources -Xcc -DDEBUG=1 -Xcc -DCOCOAPODS=1 -emit-module-doc-path /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/main~partial.swiftdoc -O0 -emit-module-path /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/main~partial.swiftmodule -serialize-diagnostics-path /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/main.dia -emit-dependencies-path /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/main.d -o /Users/jeremy/Library/Developer/Xcode/DerivedData/HelloStack-gwarvffjlodyoufmfyvhoqnemiyy/Build/Intermediates/HelloStack.build/Debug/HelloStack.build/Objects-normal/x86_64/main.o \r\n1.\tWhile type-checking 'Promise' at /Users/jeremy/src/HelloStack/HelloStack/main.swift:1:1\r\n<unknown>:0: error: unable to execute command: Segmentation fault: 11\r\n<unknown>:0: error: swift frontend command failed due to signal (use -v to see invocation)\r\nCommand /Applications/Xcode6-Beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift failed with exit code 254"
    email: jeremybanks.ca@gmail.com
    modified: "2014-06-16T20:01:47.078144Z"
    number: "17330553"
    number_intvalue: 17330553
    originated: 16-Jun-2014 03:44 PM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: ""
    reproducible: Always
    resolved: ""
    status: Open
    title: swift segfaults with enum inside of generic class
