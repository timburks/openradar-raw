apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "17363642"
    labels:
        datastore_id: "6460836759470080"
data:
    classification: Serious Bug
    created: "2014-06-18T18:09:34.030666Z"
    description: "[this was resolved as a dupe of 17157825)\r\n\r\nSummary:\r\nI use the instruments CLI to kick off UIAutomation tests. The CLI has a -w flag which allows the use of a specific device (or simulator) on which to run a script. This is made initially difficult by issue 17362829 (Instruments CLI does not recognize valid devices), but I discovered that by trying substrings of the valid devices, I was able to get further. Automation is ultimately blocked, with the error \"Instruments : Instruments Rejected Command\"\r\n\r\nSteps to Reproduce:\r\n1. Install XCode/CLI tools\r\n2. Run an instruments automation command using a valid device:\r\n\r\n/Applications/Xcode6-Beta.app/Contents/Developer/usr/bin/instruments  -t /Applications/Xcode6-beta.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.xrplugin/Contents/Resources/Automation.tracetemplate -w \"iPhone 5s (8.0 Simulator)\" /path/to/my.app -e UIASCRIPT /path/to/my/test.js -e UIARESULTSPATH /tmp\r\n\r\nExpected Results:\r\nI expect an iPhone 5s simulator to launch and my test script to run. \r\n\r\n\r\nActual Results:\r\nInstead, the instruments CLI quits with no output. If I rerun the command with the `-v` flag, i.e.:\r\n\r\n/Applications/Xcode6-Beta.app/Contents/Developer/usr/bin/instruments  -v -t /Applications/Xcode6-beta.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.xrplugin/Contents/Resources/Automation.tracetemplate -w \"iPhone 5s (8.0 Simulator)\" /path/to/my.app -e UIASCRIPT /path/to/my/test.js -e UIARESULTSPATH /tmp\r\n\r\nWe get some more interesting output:\r\nInstruments : template : file:///Applications/Xcode6-beta.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.xrplugin/Contents/Resources/Automation.tracetemplate\r\nInstruments : Plugin Search Paths (\r\n    \"/Applications/Xcode6-Beta.app/Contents/Applications/Instruments.app/Contents/PlugIns\",\r\n    \"/Applications/Xcode6-Beta.app/Contents/Applications/Instruments.app/Contents/PlugIns\",\r\n    \"/Applications/Xcode6-Beta.app/Contents/Applications/Instruments.app/Contents/PlugIns/DTracePlugin\",\r\n    \"/Applications/Xcode6-Beta.app/Contents/Developer/Platforms/MacOSX.platform/Developer/Library/Instruments/PlugIns\"\r\n)\r\nInstruments : Loaded Instruments (\r\n   <removed for space>\r\n    \"Instrument Type (name:Automation; category:UI Automation; uuid:com.apple.xray.instrument-type.UIAutomation)\"\r\n)\r\nInstruments : Loading template 'file:///Applications/Xcode6-beta.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.xrplugin/Contents/Resources/Automation.tracetemplate'\r\nInstruments : Setting Instrument Trace Command : Instrument Command (purpose:Idle; output destination:file:///Users/saucelabs/Code/appium/instrumentscli1.trace)\r\nInstruments : Trace Command Recognized\r\nInstruments : Instrument 'Automation - TestApp' rejected command 'Instrument Command (purpose:Trace; output destination:file:///Users/saucelabs/Code/appium/instrumentscli1.trace)' for target '< PFTProcess 0x7fbb540d0550 : TestApp.app > {\r\n\texecutable: /Users/saucelabs/Code/appium/sample-code/apps/TestApp/build/Release-iphonesimulator/TestApp.app\r\n\tdevice: < XRSimulatorDevice 0x7fbb51e462b0 : iPhone 5s (8.0 Simulator) (7538FB7A-DF4B-45FD-B7C5-F9D53BA8FEB6) >\r\n\targs: (\r\n)\r\n\tenvironment: {\r\n    UIARESULTSPATH = \"/tmp\";\r\n    UIASCRIPT = \"/Users/saucelabs/test.js\";\r\n}\r\n}'\r\nInstruments : Instruments Rejected Command\r\n\r\nNotice that instruments appears to find the correct device, but ultimately rejects the automation trace command.\r\n\r\nVersion:\r\nXcode 6\r\nInstruments 6\r\nOS X 10.10\r\n\r\nNotes:\r\nRelated: 17362829 (Instruments CLI does not recognize valid devices)\r\n\r\nConfiguration:\r\nAll configurations"
    email: jlipps@gmail.com
    modified: "2014-07-22T18:11:14.937079Z"
    number: "17363642"
    number_intvalue: 17363642
    originated: 6/18/2014
    parent_number: '&{NULL_VALUE}'
    product: Instruments
    product_version: "6"
    reproducible: Always
    resolved: Duplicate
    status: Duplicate
    title: Instruments CLI does not run automation using valid device (
