apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "16095272"
    labels:
        datastore_id: "5293753619185664"
data:
    classification: UI
    created: "2014-02-18T08:35:22.862883Z"
    description: "Summary:\r\nAfter pushing a UIViewController with `hidesBottomBarWhenPushed` set to YES, if a modal view controller is present at the time the view controller was popped off of its navigation controller, the tab bar will be permanently hidden.\r\n\r\nSteps to Reproduce:\r\n1. Create a UITabBarController with a UINavigationController as one of the tabs\r\n2. Push a view controller with hidesBottomBarWhenPushed set to YES\r\n3. Notice that the tab bar is now hidden\r\n4. Present a view controller as a modal\r\n5. Pop the navigation controller back to root\r\n6. Dismiss the modal view controller\r\n7. Observe that the tab bar is permanently hidden\r\n\r\nExpected Results:\r\nThe expected behavior would be to have the tab bar return since there is no longer a view controller with hidesBottomBarWhenPushed on the navigation stack.\r\n\r\nIf you don't present the modal view controller, or if you dismiss it prior to popping the view controller off the stack, the tab bar will be visible as expected.\r\n\r\nActual Results:\r\nAs mentioned above, the tab bar will be permanently hidden. Pushing view controllers with hidesBottomBarWhenPushed set to NO will not bring it back either.\r\n\r\nSample screen recordings:\r\nhttps://www.dropbox.com/s/6gr4wg8vz1s6k5p/hidesbottombar-bug.mov\r\nRecording of the expected results (where the modal is dismissed before popping off the view controller):\r\nhttps://www.dropbox.com/s/x7wh4of2axxb78e/hidesbottombar-expected.mov\r\n\r\nVersion:\r\nThe bug has been observed when testing against iOS 7.0.3 and iOS 7.1-beta4.\r\n\r\n\r\nAttached sample code: (create a new project and replace the app delegate's didFinishLaunchingWithOptions method)\r\n```\r\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\r\n{\r\n    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];\r\n    // Override point for customization after application launch.\r\n\r\n    // start with any stack of view controllers in a tab bar controller\r\n    UINavigationController *nav = [[UINavigationController alloc] init];\r\n    nav.viewControllers = @[\r\n                            [UIViewController new],\r\n                            [UIViewController new],\r\n                            ];\r\n    nav.title = @\"hello\";\r\n    UITabBarController *tabBarController = [[UITabBarController alloc] init];\r\n    tabBarController.viewControllers = @[ nav ];\r\n\r\n    self.window.rootViewController = tabBarController;\r\n\r\n    __block UIViewController *presented;\r\n\r\n    NSArray *ops = @[\r\n    ^{\r\n        // push a hide bottom bar view controller\r\n        UIViewController *vc = [UIViewController new];\r\n        vc.view.backgroundColor = [UIColor blueColor];\r\n        vc.hidesBottomBarWhenPushed = YES;\r\n        [nav pushViewController:vc animated:YES];\r\n    },\r\n    ^{\r\n        // present a modal\r\n        presented = [UIViewController new];\r\n        presented.view.backgroundColor = [UIColor redColor];\r\n        [[[nav viewControllers] lastObject] presentViewController:presented animated:YES completion:nil];\r\n    },\r\n    ^{\r\n        // pop nav stack to root\r\n        [nav popToRootViewControllerAnimated:YES];\r\n    },\r\n    ^{\r\n        // dismiss modal\r\n        [[presented presentingViewController] dismissViewControllerAnimated:YES completion:nil];\r\n    },\r\n    ^{\r\n        // push another view controller\r\n        UIViewController *vc = [UIViewController new];\r\n        vc.view.backgroundColor = [UIColor greenColor];\r\n        [nav pushViewController:vc animated:YES];\r\n    }\r\n     ];\r\n\r\n    [ops enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {\r\n        void(^blk)() = obj;\r\n\r\n        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 + 2.0 * idx * NSEC_PER_SEC));\r\n        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){\r\n            blk();\r\n        });\r\n    }];\r\n\r\n    self.window.backgroundColor = [UIColor whiteColor];\r\n    [self.window makeKeyAndVisible];\r\n    return YES;\r\n}\r\n```"
    email: RichWChan@gmail.com
    modified: "2014-02-18T08:38:15.554409Z"
    number: "16095272"
    number_intvalue: 16095272
    originated: 18-Feb-2014
    parent_number: '&{NULL_VALUE}'
    product: iOS SDK
    product_version: 7.0.3
    reproducible: Always
    resolved: ""
    status: Open
    title: hidesBottomBarWhenPushed causes tab bar to disappear permanently if the view controller is popped off when a modal is present
