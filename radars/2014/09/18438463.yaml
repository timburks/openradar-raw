apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "18438463"
    labels:
        datastore_id: "5312343982473216"
data:
    classification: Serious Bug
    created: "2014-09-24T10:48:57.312342Z"
    description: "Summary:\r\nCalendar fails to update meetings from an ics file when the UID contained in the ICS file is incorrect.\r\n\r\nSteps to Reproduce:\r\n1. Set up a recurring meeting on Microsoft Exchange server\r\n2. Invite a Mac user to the meeting by email address\r\n3. Change one meeting occurrence to a different time\r\n4. The invitee receives an email containing \"Mail Attachment.ics\"\r\n5. Double-click on the ICS file and see it appear in the Calendar Inbox\r\n\r\nExpected Results:\r\nAccepting the change via the popup from Calendar Inbox should move the meeting\r\n\r\nActual Results:\r\n- First time clicking the accept button does nothing, only the entry disappears from the Calendar Inbox\r\n- Subsequent times there is only an OK button, again yielding no result upon clicking\r\n- No feedback of any sort informs the user about the problem\r\n\r\nThe following is logged on the console:\r\n\r\n24/09/14 12:24:24,796 SystemUIServer[207]: Attempt to use XPC with a MachService that has HideUntilCheckIn set. This will result in unpredictable behavior: com.apple.backupd.status.xpc\r\n24/09/14 12:24:25,099 CoreServicesUIAgent[249]: Error -60005 creating authorization\r\n24/09/14 12:24:25,125 com.apple.xpc.launchd[1]: (com.apple.imfoundation.IMRemoteURLConnectionAgent) The _DirtyJetsamMemoryLimit key is not available on this platform.\r\n24/09/14 12:24:25,161 CalendarFileHandler[497]: Bundle (null) does not have an FileProviderModuleClass entry.\r\n24/09/14 12:24:25,261 CoreServicesUIAgent[249]: Error -60005 creating authorization\r\n24/09/14 12:24:25,384 Calendar[449]: [com.apple.calendar.store.log.itip.create] [Not coalescing a message we just made for event \r\n because we have have replaced existing master messaged with detached: 0]\r\n24/09/14 12:24:25,425 Calendar[449]: WARNING: Zero events found for the legacyOccurrenceID: 98842D33-29F5-4394-85A7-61C2F981C7CA/040000008200E00074C5B7101A82E00800000000701F0051086ECF010000000000000000100000002D8C849AD6240C409CAAAECEF5B49286/20140925T140000Z/-\r\n24/09/14 12:24:25,446 Calendar[449]: Error: We are trying to open an inspector without an event.\r\n24/09/14 12:24:30,262 CoreServicesUIAgent[249]: unexpected message <OS_xpc_error: <error: 0x7fff71c78c60> { count = 1, contents =\r\n\t\"XPCErrorDescription\" => <string: 0x7fff71c78f70> { length = 18, contents = \"Connection invalid\" }\r\n}>\r\n24/09/14 12:24:30,774 CalendarAgent[233]: [com.apple.calendar.store.log.caldav.queue] [Deleting change request because it was not materialized into a queueable operation: [<CalManagedMessageChangeRequest: 0x7fa21d303130> (entity: MessageChangeRequest; id: 0x2d000f8b <x-coredata://5BC34D0C-89AA-437A-9C8B-B7B3E25B1942/MessageChangeRequest/p180> ; data: {\r\n    dependencies = \"<relationship fault: 0x7fa2187830a0 'dependencies'>\";\r\n    dependents =     (\r\n    );\r\n    eTag = \"\";\r\n    error = nil;\r\n    firstMaterialized = nil;\r\n    localUID = nil;\r\n    materializedCount = 0;\r\n    principalUID = \"002DD2CA-AC2F-47D4-AACF-10B96964F711\";\r\n    scheduleTag = nil;\r\n    sequenceNumber = 180;\r\n    serverFilename = \"Local_Managed_Message_7C8294D6-342B-4340-A620-DB6756BDF88A.ics\";\r\n    sharedUID = nil;\r\n    sourceUID = nil;\r\n    type = 18;\r\n})].]\r\n\r\n\r\nVersion:\r\n10.10 (14A361c)\r\n\r\nNotes:\r\nI narrowed the problem do a non-matching UID value in the ICS file. \r\n\r\nWorkaround:\r\n\r\n1. mail the recurring event from Calendar\r\n2. this gives you an ICS file which upon inspection shows the correct UID value of the calendar event\r\n3. Modify the \"Mail Attachment.ics\" file, correcting the UID value\r\n\r\nWith the updated UID the expected results occur, the single meeting occurrence is moved.\r\n\r\nI have no idea why the UID is incorrect. If this is an issue in Microsoft Exchange Server, then still I expect Calendar to be resilient enough to find the correct meeting if no matching UID exists."
    email: oliver.drobnik@gmail.com
    modified: "2014-09-24T10:48:57.312542Z"
    number: "18438463"
    number_intvalue: 18438463
    originated: 24 September 2014
    parent_number: '&{NULL_VALUE}'
    product: OS X
    product_version: 10.10 (14A361c)
    reproducible: Always
    resolved: ""
    status: Open
    title: 'Calendar: Fails to update events from mail update'
