apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "18503353"
    labels:
        datastore_id: "5289823321456640"
data:
    classification: Crash
    created: "2014-09-30T18:28:27.413564Z"
    description: "Summary:\r\nWhen running the following code in a Xcode 6.1 GM seed and 6.1 b2 swift playground for OS X there is a crash.\r\n\r\n====\r\nimport Cocoa\r\n\r\nclass BaseClass {\r\n    let classDescription: String\r\n    init(description: String) {\r\n        self.classDescription = description\r\n    }\r\n    func description() -> String { return self.classDescription }\r\n}\r\n\r\nclass SubClass1 : BaseClass {\r\n    init() {\r\n        super.init(description: \"subclass1\")\r\n    }\r\n}\r\n\r\nclass SubClass2 : BaseClass {\r\n    init() {\r\n        super.init(description: \"subclass2\")\r\n    }\r\n}\r\n\r\nlet classMapping = [\"subclass1\": SubClass1.self, \"subclass2\": SubClass2.self]\r\nlet myClass = classMapping[\"subclass1\"]\r\n====\r\n\r\nSteps to Reproduce:\r\nCreate an OS X swift playground paste in the code in the description section between the ==== and then see the crash on the line creating the dictionary.\r\n\r\nExpected Results:\r\nThat it doesn't crash. That the classMapping const is of type [String:BaseClass.Type].\r\n\r\nActual Results:\r\nI get a crash with the following output:\r\n* thread #1: tid = 0x366b, 0x00000001024b4a65 libswiftCore.dylib`swift_getSummary + 37, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x68)\r\n  * frame #0: 0x00000001024b4a65 libswiftCore.dylib`swift_getSummary + 37\r\n    frame #1: 0x0000000102590b8c libswiftCore.dylib`-[SwiftObject debugDescription] + 92\r\n    frame #2: 0x000000010275bb40 libswiftFoundation.dylib`protocol witness for Swift.MirrorType.summary.getter : Swift.String in conformance Foundation._ObjCMirror : Swift.MirrorType + 64\r\n    frame #3: 0x0000000102327f3b PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.getSummaries (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.Bool) -> (brief : Swift.String, long : Swift.String) + 171\r\n    frame #4: 0x000000010232a963 PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeStructuredImpl (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64, Swift.Array<Swift.Range<Swift.UInt64>>...) -> () + 867\r\n    frame #5: 0x0000000102326c4a PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeStructured (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64, PlaygroundLogger.LoggerCappingPolicy) -> () + 1562\r\n    frame #6: 0x0000000102327263 PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeStructured (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64) -> () + 323\r\n    frame #7: 0x000000010232d5c0 PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encode (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64) -> () + 7776\r\n    frame #8: 0x0000000102327deb PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeChildren (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64, Swift.Range<Swift.UInt64>) -> () + 2203\r\n    frame #9: 0x000000010232b301 PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeStructuredImpl (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64, Swift.Array<Swift.Range<Swift.UInt64>>...) -> () + 3329\r\n    frame #10: 0x0000000102326a68 PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeStructured (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64, PlaygroundLogger.LoggerCappingPolicy) -> () + 1080\r\n    frame #11: 0x00000001023273bf PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeStructured (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64) -> () + 671\r\n    frame #12: 0x000000010232d5c0 PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encode (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64) -> () + 7776\r\n    frame #13: 0x0000000102327deb PlaygroundLogger`PlaygroundLogger.PlaygroundObjectWriter.encodeChildren (PlaygroundLogger.PlaygroundObjectWriter)(Swift.MirrorType, Swift.UInt64, Swift.Range<Swift.UInt64>) -> () + 2203\r\n    frame #14: 0x000000010232b301 PlaygroundLogger`PlaygroundLogg\r\n\r\nVersion:\r\nXcode 6.1 beta 2, and Xcode 6.1 beta 3. Swift playground for OSX.\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\n15\" MBP non Retina. 16GByte Ram. 500GByte SSD drive."
    email: ktam64@gmail.com
    modified: "2014-09-30T18:28:27.413838Z"
    number: "18503353"
    number_intvalue: 18503353
    originated: 09/30/2014
    parent_number: '&{NULL_VALUE}'
    product: Xcode
    product_version: "6.1"
    reproducible: Yes
    resolved: ""
    status: Open
    title: Crash adding a class type to a dictionary
