apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "18505295"
    labels:
        datastore_id: "6055497878732800"
data:
    classification: Crash
    created: "2014-09-30T20:34:53.149863Z"
    description: "Summary:\r\nclass A<T> : NSObject {\t\r\n\tvar v : T? = nil // crash\r\n}\r\n\r\nDoesn't crash if I don't subclass NSObject.\r\n\r\nSteps to Reproduce:\r\n1. Subclass NSObject\r\n2. Make the class generic with <T>\r\n3. Add an optional ivar of the generic type\r\n\r\n\r\nExpected Results:\r\n4. Does not crash compiler\r\n\r\n\r\nActual Results:\r\n4. Crashes compiler\r\n\r\n\r\nVersion:\r\nXcode 6.1/6A1042b\r\nOS X 10.10/14A343f\r\n\r\nLog output:\r\n\r\nCompileSwift normal x86_64 /Users/nevyn/Desktop/RecursiveGenericCompilerCrash/RecursiveGenericCompilerCrash/main.swift\r\n    cd /Users/nevyn/Desktop/RecursiveGenericCompilerCrash\r\n    /Applications/Xcode61.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -frontend -c -primary-file /Users/nevyn/Desktop/RecursiveGenericCompilerCrash/RecursiveGenericCompilerCrash/main.swift -target x86_64-apple-macosx10.10 -target-cpu core2 -sdk /Applications/Xcode61.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk -I /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Products/Debug -F /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Products/Debug -g -module-cache-path /Users/nevyn/Library/Developer/Xcode/DerivedData/ModuleCache -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/swift-overrides.hmap -Xcc -iquote -Xcc /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-generated-files.hmap -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-own-target-headers.hmap -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-all-target-headers.hmap -Xcc -iquote -Xcc /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-project-headers.hmap -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Products/Debug/include -Xcc -I/Applications/Xcode61.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/DerivedSources/x86_64 -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/DerivedSources -Xcc -DDEBUG=1 -emit-module-doc-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main~partial.swiftdoc -Onone -module-name RecursiveGenericCompilerCrash -emit-module-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main~partial.swiftmodule -serialize-diagnostics-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main.dia -emit-dependencies-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main.d -o /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main.o\r\n\r\n0  swift                    0x000000010b0b3f68 llvm::sys::PrintStackTrace(__sFILE*) + 40\r\n1  swift                    0x000000010b0b4454 SignalHandler(int) + 452\r\n2  libsystem_platform.dylib 0x00007fff8adcdf1a _sigtramp + 26\r\n3  libsystem_platform.dylib 0x00007fff55805b28 _sigtramp + 3399711784\r\n4  swift                    0x000000010a44aa58 swift::irgen::IRGenFunction::emitTypeMetadataRef(swift::CanType) + 280\r\n5  swift                    0x000000010a44b320 llvm::Value* swift::CanTypeVisitor<(anonymous namespace)::EmitTypeMetadataRefForLayout, llvm::Value*>::visit<>(swift::CanType) + 64\r\n6  swift                    0x000000010a44b2d9 swift::irgen::IRGenFunction::emitTypeMetadataRefForLayout(swift::SILType) + 25\r\n7  swift                    0x000000010a483528 (anonymous namespace)::OpaqueArchetypeTypeInfo::destroy(swift::irgen::IRGenFunction&, swift::irgen::Address, swift::SILType) const + 24\r\n8  swift                    0x000000010a4bc2e2 swift::SILVisitor<(anonymous namespace)::IRGenSILFunction, void>::visit(swift::ValueBase*) + 13266\r\n9  swift                    0x000000010a4b82cb swift::irgen::IRGenModule::emitSILFunction(swift::SILFunction*) + 9179\r\n10 swift                    0x000000010a431810 swift::irgen::IRGenModule::emitGlobalTopLevel() + 208\r\n11 swift                    0x000000010a4a4ffc performIRGeneration(swift::IRGenOptions&, swift::Module*, swift::SILModule*, llvm::StringRef, llvm::LLVMContext&, swift::SourceFile*, unsigned int) + 1900\r\n12 swift                    0x000000010a4a5a03 swift::performIRGeneration(swift::IRGenOptions&, swift::SourceFile&, swift::SILModule*, llvm::StringRef, llvm::LLVMContext&, unsigned int) + 51\r\n13 swift                    0x000000010a3facf4 frontend_main(llvm::ArrayRef<char const*>, char const*, void*) + 5444\r\n14 swift                    0x000000010a3f806d main + 1677\r\n15 libdyld.dylib            0x00007fff8bfb25c9 start + 1\r\nStack dump:\r\n0.\tProgram arguments: /Applications/Xcode61.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -frontend -c -primary-file /Users/nevyn/Desktop/RecursiveGenericCompilerCrash/RecursiveGenericCompilerCrash/main.swift -target x86_64-apple-macosx10.10 -target-cpu core2 -sdk /Applications/Xcode61.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk -I /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Products/Debug -F /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Products/Debug -g -module-cache-path /Users/nevyn/Library/Developer/Xcode/DerivedData/ModuleCache -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/swift-overrides.hmap -Xcc -iquote -Xcc /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-generated-files.hmap -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-own-target-headers.hmap -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-all-target-headers.hmap -Xcc -iquote -Xcc /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/RecursiveGenericCompilerCrash-project-headers.hmap -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Products/Debug/include -Xcc -I/Applications/Xcode61.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/DerivedSources/x86_64 -Xcc -I/Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/DerivedSources -Xcc -DDEBUG=1 -emit-module-doc-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main~partial.swiftdoc -Onone -module-name RecursiveGenericCompilerCrash -emit-module-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main~partial.swiftmodule -serialize-diagnostics-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main.dia -emit-dependencies-path /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main.d -o /Users/nevyn/Library/Developer/Xcode/DerivedData/RecursiveGenericCompilerCrash-fxirwxyeyecaqsdcmvjsbomnrnhn/Build/Intermediates/RecursiveGenericCompilerCrash.build/Debug/RecursiveGenericCompilerCrash.build/Objects-normal/x86_64/main.o \r\n1.\tWhile emitting IR SIL function @_TToFC29RecursiveGenericCompilerCrash1AE for 'deinit' at /Users/nevyn/Desktop/RecursiveGenericCompilerCrash/RecursiveGenericCompilerCrash/main.swift:11:7"
    email: joachimb@gmail.com
    modified: "2015-08-27T14:22:58.3862Z"
    number: "18505295"
    number_intvalue: 18505295
    originated: 30-Sep-2014 10:33 PM
    parent_number: '&{NULL_VALUE}'
    product: OS X DevTools
    product_version: Xcode 6.1/6A1042b, OS X 10.10/14A343f
    reproducible: Always
    resolved: 01-Jul-2015 10:18 AM (Xcode 7 beta)
    status: Closed
    title: 'Swift: Optional generic variable in NSObject subclass crashes compiler'
