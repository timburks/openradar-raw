apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: FB13513463
    labels:
        datastore_id: "5594571127914496"
data:
    classification: ""
    created: "2024-01-04T01:35:08.687996Z"
    description: "=== Environment ===\r\n\r\niOS 17.2.1 (21C66)\r\nXcode 15.1 (15C65)\r\n\r\nNote: It’s reproducible on iOS 17.2.1 (21C66), but I suspect it happens across all iOS 17 builds, since I’ve gotten crash reports coming from 17.1 to 17.3 Beta.\r\n\r\n=== Current Behavior ===\r\n\r\nUsing PhaseAnimator causes a ‘Simultaneous accesses’ crash when killing the app. While force quitting apps is not recommended, users perform this action regularly and it’s causing issues in my app.\r\n\r\n=== Expected Behavior ===\r\n\r\nThe app should not crash upon quitting.\r\n\r\n=== Reproduction Steps ===\r\n\r\n1. Create a new SwiftUI project\r\n2. Add a PhaseAnimator that doesn't use a trigger.\r\n3. Run the project on an iPhone.\r\n4. Force quit the app from the iPhone’s task manager.\r\n5. Crash.\r\n\r\n=== Stack Trace ===\r\n\r\nSimultaneous accesses to 0x101705d70, but modification requires exclusive access.\r\nPrevious access (a modification) started at SwiftUI`<redacted> + 12108 (0x1b15062cc).\r\nCurrent access (a read) started at:\r\n0    libswiftCore.dylib                 0x00000001a57cf470 <redacted> + 432\r\n1    libswiftCore.dylib                 0x00000001a57cf688 swift_beginAccess + 84\r\n2    SwiftUI                            0x00000001b1503380 <redacted> + 14364\r\n3    SwiftUI                            0x00000001b16565ac <redacted> + 15408\r\n4    SwiftUI                            0x00000001b089a518 <redacted> + 9464\r\n5    SwiftUI                            0x00000001b089a518 <redacted> + 9148\r\n6    SwiftUI                            0x00000001b17d997c <redacted> + 1944\r\n7    SwiftUI                            0x00000001b08b9870 <redacted> + 44636\r\n8    SwiftUI                            0x00000001b08b9870 <redacted> + 47116\r\n9    libswiftCore.dylib                 0x00000001a57d38dc <redacted> + 56\r\n10   libswiftCore.dylib                 0x00000001a57d4f28 <redacted> + 136\r\n11   SwiftUI                            0x00000001b111fc28 <redacted> + 15256\r\n12   AttributeGraph                     0x00000001d426507c <redacted> + 1236\r\n13   AttributeGraph                     0x00000001d4250c9c <redacted> + 196\r\n14   AttributeGraph                     0x00000001d425f3e4 <redacted> + 352\r\n15   AttributeGraph                     0x00000001d4272c20 AGGraphInvalidate + 36\r\n16   SwiftUI                            0x00000001b1503380 <redacted> + 12156\r\n17   SwiftUI                            0x00000001b16565ac <redacted> + 41600\r\n18   SwiftUI                            0x00000001b16565ac <redacted> + 41340\r\n19   SwiftUI                            0x00000001b16565ac <redacted> + 41648\r\n20   libobjc.A.dylib                    0x00000001a43b9300 <redacted> + 116\r\n21   libobjc.A.dylib                    0x00000001a43b904c objc_destructInstance + 80\r\n22   libobjc.A.dylib                    0x00000001a43b8fec _objc_rootDealloc + 80\r\n23   UIKitCore                          0x00000001ae315234 <redacted> + 124\r\n24   UIKitCore                          0x00000001ae3138ec <redacted> + 1032\r\n25   libobjc.A.dylib                    0x00000001a43b6ab0 <redacted> + 196\r\n26   libobjc.A.dylib                    0x00000001a43b690c objc_autoreleasePoolPop + 260\r\n27   UIKitCore                          0x00000001ae3138ec <redacted> + 1004\r\n28   libobjc.A.dylib                    0x00000001a43b6ab0 <redacted> + 196\r\n29   libobjc.A.dylib                    0x00000001a43b690c objc_autoreleasePoolPop + 260\r\n30   UIKitCore                          0x00000001ae3138ec <redacted> + 1004\r\n31   UIKitCore                          0x00000001af0ccb60 <redacted> + 1124\r\n32   libobjc.A.dylib                    0x00000001a43b6ab0 <redacted> + 196\r\n33   libobjc.A.dylib                    0x00000001a43b690c objc_autoreleasePoolPop + 260\r\n34   UIKitCore                          0x00000001ae340314 <redacted> + 92\r\n35   UIKitCore                          0x00000001ae34009c <redacted> + 164\r\n36   UIKitCore                          0x00000001ae33fe68 <redacted> + 496\r\n37   UIKitCore                          0x00000001ae33fd80 <redacted> + 100\r\n38   UIKitCore                          0x00000001ae33fc98 <redacted> + 72\r\n39   UIKitCore                          0x00000001ae33f790 <redacted> + 84\r\n40   UIKitCore                          0x00000001ae33ee44 <redacted> + 144\r\n41   UIKitCore                          0x00000001ae33ef34 <redacted> + 92\r\n42   CoreFoundation                     0x00000001ac0a1110 <redacted> + 28\r\n43   CoreFoundation                     0x00000001ac0a02f8 <redacted> + 176\r\n44   CoreFoundation                     0x00000001ac09ea68 <redacted> + 340\r\n45   CoreFoundation                     0x00000001ac09d55c <redacted> + 828\r\n46   CoreFoundation                     0x00000001ac09d218 CFRunLoopRunSpecific + 608\r\n47   GraphicsServices                   0x00000001ef61e454 GSEventRunModal + 164\r\n48   UIKitCore                          0x00000001ae4c12b4 <redacted> + 888\r\n49   UIKitCore                          0x00000001ae4c0b14 UIApplicationMain + 340\r\n50   SwiftUI                            0x00000001b0ed125c <redacted> + 604\r\n51   SwiftUI                            0x00000001b0ed125c <redacted> + 160\r\n52   SwiftUI                            0x00000001b0b415fc <redacted> + 2196\r\n53   PhaseAnimatorBug                   0x00000001003f9008 static PhaseAnimatorBugApp.$main() + 40\r\n54   PhaseAnimatorBug                   0x00000001003f91bc main + 12\r\n55   dyld                               0x00000001cedd650c <redacted> + 2240\r\nMessage from debugger: Terminated due to signal 9"
    email: fred@ephread.com
    modified: "2024-01-04T01:35:39.913145Z"
    number: FB13513463
    number_intvalue: 13513463
    originated: January 3, 2024
    parent_number: '&{NULL_VALUE}'
    product: SwiftUI
    product_version: 21C66
    reproducible: ""
    resolved: ""
    status: Open
    title: Using PhaseAnimator causes a 'Simultaneous accesses' crash when force-quitting the app from the task manager
