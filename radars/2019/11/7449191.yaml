apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "7449191"
    labels:
        datastore_id: "5021833522839552"
data:
    classification: Bug
    created: "2019-11-15T19:04:01.564398Z"
    description: "When UIToolbar is initialized programmatically with a CGSizeZero frame (e.g., CGRectZero), it has unsatisfiable constraints and spews the standard unsatisfiable constraints logging. This is despite being assigned a reasonable frame in layoutSubviews / viewDidLayoutSubviews.\r\n\r\nSteps to reproduce:\r\n_toolbar = [[UIToolbar alloc] initWithFrame:CGRectZero];\r\n    _toolbar.items = @[\r\n        [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:nil action:nil],\r\n    ];\r\n    [self.view addSubview:_toolbar];\r\n\r\nExpected Behavior:\r\nNo log spew, no unsatisfiable constraints.\r\n\r\nActual behavior:\r\n2019-11-15 10:51:09.132227-0800 UIToolbarConstraints[90133:2064452] [LayoutConstraints] Unable to simultaneously satisfy constraints.\r\n\tProbably at least one of the constraints in the following list is one you don't want. \r\n\tTry this: \r\n\t\t(1) look at each constraint and try to figure out which you don't expect; \r\n\t\t(2) find the code that added the unwanted constraint or constraints and fix it. \r\n\t(Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) \r\n(\r\n    \"<NSAutoresizingMaskLayoutConstraint:0x60000139fb60 h=--& v=--& _UIToolbarContentView:0x7fa0e890a620.height == 0   (active)>\",\r\n    \"<NSLayoutConstraint:0x6000013bf980 V:|-(0)-[_UIButtonBarStackView:0x7fa0e890d340]   (active, names: '|':_UIToolbarContentView:0x7fa0e890a620 )>\",\r\n    \"<NSLayoutConstraint:0x6000013bf9d0 _UIButtonBarStackView:0x7fa0e890d340.bottom == _UIToolbarContentView:0x7fa0e890a620.bottom   (active)>\",\r\n    \"<NSLayoutConstraint:0x6000013814a0 UIImageView:0x7fa0e5706fa0.centerY == _UIModernBarButton:0x7fa0e5704e90.centerY   (active)>\",\r\n    \"<NSLayoutConstraint:0x60000139e8a0 'IB_Baseline_Baseline' _UIModernBarButton:0x7fa0e5704e90.lastBaseline == UILayoutGuide:0x600000980380'UIViewLayoutMarginsGuide'.bottom   (active)>\",\r\n    \"<NSLayoutConstraint:0x60000139e8f0 'IB_Top_Top' V:|-(>=0)-[_UIModernBarButton:0x7fa0e5704e90]   (active, names: '|':_UIButtonBarButton:0x7fa0e5704110 )>\",\r\n    \"<NSLayoutConstraint:0x60000139ef30 'UIButtonBar.maximumAlignmentSize' _UIButtonBarButton:0x7fa0e5704110.height == UILayoutGuide:0x600000984380'UIViewLayoutMarginsGuide'.height   (active)>\",\r\n    \"<NSLayoutConstraint:0x6000013bf660 'UIView-bottomMargin-guide-constraint' V:[UILayoutGuide:0x600000984380'UIViewLayoutMarginsGuide']-(0)-|   (active, names: '|':_UIButtonBarStackView:0x7fa0e890d340 )>\",\r\n    \"<NSLayoutConstraint:0x60000139e800 'UIView-bottomMargin-guide-constraint' V:[UILayoutGuide:0x600000980380'UIViewLayoutMarginsGuide']-(11)-|   (active, names: '|':_UIButtonBarButton:0x7fa0e5704110 )>\",\r\n    \"<NSLayoutConstraint:0x6000013bf430 'UIView-topMargin-guide-constraint' V:|-(0)-[UILayoutGuide:0x600000984380'UIViewLayoutMarginsGuide']   (active, names: '|':_UIButtonBarStackView:0x7fa0e890d340 )>\"\r\n)\r\n\r\nWill attempt to recover by breaking constraint \r\n<NSLayoutConstraint:0x6000013814a0 UIImageView:0x7fa0e5706fa0.centerY == _UIModernBarButton:0x7fa0e5704e90.centerY   (active)>\r\n\r\nMake a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.\r\nThe methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKitCore/UIView.h> may also be helpful.\r\n2019-11-15 10:51:09.134663-0800 UIToolbarConstraints[90133:2064452] [LayoutConstraints] Unable to simultaneously satisfy constraints.\r\n\tProbably at least one of the constraints in the following list is one you don't want. \r\n\tTry this: \r\n\t\t(1) look at each constraint and try to figure out which you don't expect; \r\n\t\t(2) find the code that added the unwanted constraint or constraints and fix it. \r\n\t(Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) \r\n(\r\n    \"<NSAutoresizingMaskLayoutConstraint:0x60000139fa20 h=--& v=--& _UIToolbarContentView:0x7fa0e890a620.width == 0   (active)>\",\r\n    \"<NSLayoutConstraint:0x6000013bf8e0 H:|-(0)-[_UIButtonBarStackView:0x7fa0e890d340]   (active, names: '|':_UIToolbarContentView:0x7fa0e890a620 )>\",\r\n    \"<NSLayoutConstraint:0x6000013bf930 _UIButtonBarStackView:0x7fa0e890d340.trailing == _UIToolbarContentView:0x7fa0e890a620.trailing   (active)>\",\r\n    \"<NSLayoutConstraint:0x60000139e5d0 'IB_Leading_Leading' H:|-(16)-[_UIModernBarButton:0x7fa0e5704e90]   (active, names: '|':_UIButtonBarButton:0x7fa0e5704110 )>\",\r\n    \"<NSLayoutConstraint:0x60000139e620 'IB_Trailing_Trailing' H:[_UIModernBarButton:0x7fa0e5704e90]-(16)-|   (active, names: '|':_UIButtonBarButton:0x7fa0e5704110 )>\",\r\n    \"<NSLayoutConstraint:0x60000139f250 'UISV-canvas-connection' UILayoutGuide:0x600000984380'UIViewLayoutMarginsGuide'.leading == _UIButtonBarButton:0x7fa0e5704110.leading   (active)>\",\r\n    \"<NSLayoutConstraint:0x60000139f2a0 'UISV-canvas-connection' UILayoutGuide:0x600000984380'UIViewLayoutMarginsGuide'.trailing == UIView:0x7fa0e57075a0.trailing   (active)>\",\r\n    \"<NSLayoutConstraint:0x60000139f2f0 'UISV-spacing' H:[_UIButtonBarButton:0x7fa0e5704110]-(0)-[UIView:0x7fa0e57075a0]   (active)>\",\r\n    \"<NSLayoutConstraint:0x6000013bf570 'UIView-leftMargin-guide-constraint' H:|-(0)-[UILayoutGuide:0x600000984380'UIViewLayoutMarginsGuide'](LTR)   (active, names: '|':_UIButtonBarStackView:0x7fa0e890d340 )>\",\r\n    \"<NSLayoutConstraint:0x6000013bf6b0 'UIView-rightMargin-guide-constraint' H:[UILayoutGuide:0x600000984380'UIViewLayoutMarginsGuide']-(0)-|(LTR)   (active, names: '|':_UIButtonBarStackView:0x7fa0e890d340 )>\"\r\n)\r\n\r\nWill attempt to recover by breaking constraint \r\n<NSLayoutConstraint:0x60000139e620 'IB_Trailing_Trailing' H:[_UIModernBarButton:0x7fa0e5704e90]-(16)-|   (active, names: '|':_UIButtonBarButton:0x7fa0e5704110 )>\r\n\r\nMake a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch this in the debugger.\r\nThe methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKitCore/UIView.h> may also be helpful.\r\n\r\nNotes: See attached sample project that demonstrates this. Using any non-zero sized frame will fix this issue."
    email: brian@thoughtful.community
    modified: "2019-11-15T19:04:01.564703Z"
    number: "7449191"
    number_intvalue: 7449191
    originated: 11/15/19
    parent_number: '&{NULL_VALUE}'
    product: UIKit
    product_version: 13.2.2
    reproducible: Yes
    resolved: ""
    status: Open
    title: UIToolbar Has Unsatisfiable Constraints When Initialized Programmatically with CGRectZero
