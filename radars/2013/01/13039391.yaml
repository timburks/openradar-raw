apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "13039391"
    labels:
        datastore_id: "2575403"
data:
    classification: Other Bug
    created: "2013-01-18T03:36:30.682758Z"
    description: "Summary:\r\n\r\nA sandboxed app will generate incomplete Quick Look previews of vCard (.vcf) files unless the app meets these two requirements:\r\n\r\n1.  The app has the \"com.apple.security.personal-information.addressbook\" entitlement.\r\n2.  The system prompts the user for access to the address book and the user accepts.\r\n\r\nSince the only information that Quick Look displays is in the vCard file to which the app has access, I do not believe it should be necessary for the app to have access to the address book.\r\n\r\nSteps to Reproduce:\r\n\r\nI am attaching an Xcode project that demonstrates the issue.\r\n\r\n1.  Compile and launch the app.\r\n2.  Click on the Quick Look button in the app's window.  \r\n\r\nExpected Results:\r\n\r\nI expect to see all the information in the vCard, such as my name, title, company, email address, web site link, and Twitter handles.  I would see that information if the app was not sandboxed.\r\n\r\nActual Results:\r\n\r\nInstead I see a preview of the vCard that displays my picture but is missing my contact information.\r\n\r\nRegression:\r\n\r\nNotes:\r\n\r\nThe vCard file in the sample is included as a resource file, \"contactinfo.vcf\".\r\n\r\nThe following is written to the console output when attempting to generate a Quick Look preview of the vCard file:\r\n\r\n2013-01-17 22:23:57.594 QuickLookContactIssue[61529:4817] Address book access is denied for executable at path: /Users/jbrayton/Library/Developer/Xcode/DerivedData/QuickLookContactIssue-ehucdvxhqbvxylclttudrsoymjtc/Build/Products/Debug/QuickLookContactIssue.app/Contents/MacOS/QuickLookContactIssue\r\n(\r\n\t0   AddressBook                         0x00007fff8cd421ec __ABIsAccessGranted_block_invoke_0 + 36\r\n\t1   libdispatch.dylib                   0x00007fff8388c0b6 _dispatch_client_callout + 8\r\n\t2   libdispatch.dylib                   0x00007fff8388c041 dispatch_once_f + 50\r\n\t3   AddressBook                         0x00007fff8cd42148 ABIsAccessGranted + 40\r\n\t4   AddressBook                         0x00007fff8cd642b2 +[ABAddressBook addressBookWithDatabaseDirectory:options:] + 29\r\n\t5   Contact                             0x0000000101af151b Contact + 5403\r\n\t6   QuickLookUI                         0x00007fff83925655 -[QLPreviewDocument _loadWithDisplayBundleID:hints:canBeRemote:] + 1094\r\n\t7   QuickLookUI                         0x00007fff83924f05 __block_global_0 + 226\r\n\t8   QuickLook                           0x00007fff87278fb1 _Z18QLTryCatchAndCrashU13block_pointerFvvE + 17\r\n\t9   libdispatch.dylib                   0x00007fff8388ff01 _dispatch_call_block_and_release + 15\r\n\t10  libdispatch.dylib                   0x00007fff8388c0b6 _dispatch_client_callout + 8\r\n\t11  libdispatch.dylib                   0x00007fff838910c8 _dispatch_main_queue_callback_4CF + 275\r\n\t12  CoreFoundation                      0x00007fff88fcb0fe __CFRunLoopRun + 1614\r\n\t13  CoreFoundation                      0x00007fff88fca6b2 CFRunLoopRunSpecific + 290\r\n\t14  HIToolbox                           0x00007fff88ca70a4 RunCurrentEventLoopInMode + 209\r\n\t15  HIToolbox                           0x00007fff88ca6d84 ReceiveNextEventCommon + 166\r\n\t16  HIToolbox                           0x00007fff88ca6cd3 BlockUntilNextEventMatchingListInMode + 62\r\n\t17  AppKit                              0x00007fff8aa1d613 _DPSNextEvent + 685\r\n\t18  AppKit                              0x00007fff8aa1ced2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128\r\n\t19  AppKit                              0x00007fff8aa14283 -[NSApplication run] + 517\r\n\t20  AppKit                              0x00007fff8a9b8cb6 NSApplicationMain + 869\r\n\t21  QuickLookContactIssue               0x0000000100000df2 main + 34\r\n\t22  libdyld.dylib                       0x00007fff892227e1 start + 0\r\n)"
    email: jbrayton@goldenhillsoftware.com
    modified: "2013-01-18T03:36:30.682893Z"
    number: "13039391"
    number_intvalue: 13039391
    originated: 17-Jan-2013 10:33 PM
    parent_number: '&{NULL_VALUE}'
    product: Mac OS X
    product_version: OS X 10.8.2 (12C3006)
    reproducible: yes
    resolved: ""
    status: Open
    title: Quick Look Preview of vCard (.vcf) Files in a sandboxed app
