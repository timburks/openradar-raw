apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "14161127"
    labels:
        datastore_id: "3150404"
data:
    classification: Serious Bug
    created: "2013-06-27T21:00:46.806528Z"
    description: "14-Jun-2013 03:22 PM Daniel DeCovnick:\r\nSummary: I have a Zoho Mail account, which has an SMTP server at smtp.zoho.com. My username is \"daniel@decovnick.com\". I can't log into this server in Mail.app. I may have originally input the wrong username or password, but even with the right one it's not working. I can only conclude something's gone wrong with encoding/sending the encoded credentials, or Mail is caching the wrong credentials, as I can log into via 'openssl s_client -crlf -connect smtp.zoho.com:465' using AUTH PLAIN with my base64 encoded credentials. \r\n\r\nSteps to Reproduce:\r\n1. Register domain name.\r\n2. Create Zoho mail free account, associate it with the domain name.\r\n3. create additional account with Zoho for the domain. \r\n4. Add account in Mail (already had an iCloud account there).\r\n5. Enter wrong credentials. \r\n6. Fail to connect as seen in connection doctor.\r\n7. Enter right credentials and save. \r\n8. Open connection doctor and click check again. \r\n\r\n\r\nExpected Results:\r\n220 mx.zohomail.com SMTP Server ready June 14, 2013 2:48:25 PM PDT\r\nehlo testing\r\n250-mx.zohomail.com Hello testing (204.79.190.74 (204.79.190.74))\r\n250-SIZE 25000000\r\n250 AUTH LOGIN PLAIN\r\nAUTH PLAIN <redacted>\r\n235 Authentication Successful\r\n\r\nIn Mail: Connection and login to server successful.\r\n\r\nActual Results:\r\nINITIATING CONNECTION Jun 14 14:34:45.976 [kCFStreamSocketSecurityLevelNone] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x600001468680\r\n\r\nCONNECTED Jun 14 14:34:46.044 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x6000002733c0\r\n\r\nREAD Jun 14 14:34:46.123 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x6000002733c0\r\n220 mx.zohomail.com SMTP Server ready June 14, 2013 2:34:46 PM PDT\r\n\r\nWROTE Jun 14 14:34:46.133 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x6000002733c0\r\nEHLO event-10-1-71-98.venue.apple.com\r\n\r\nREAD Jun 14 14:34:46.153 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x6000002733c0\r\n250-mx.zohomail.com Hello event-10-1-71-98.venue.apple.com (204.79.190.74 (204.79.190.74))\r\n\r\nREAD Jun 14 14:34:46.183 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x600000a7b300\r\n250-SIZE 25000000\r\n250 AUTH LOGIN PLAIN\r\n\r\nWROTE Jun 14 14:34:46.184 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x600000a7b300\r\nAUTH PLAIN  (*** 72 bytes hidden ***)\r\n\r\nREAD Jun 14 14:34:46.276 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x6000002733c0\r\n535 Authentication Failed\r\n\r\nWROTE Jun 14 14:34:46.276 [kCFStreamSocketSecurityLevelTLSv1_0] -- host:smtp.zoho.com -- port:465 -- socket:0x6200008dabe0 -- thread:0x6000002733c0\r\nQUIT\r\n\r\n\"Trying to log into this SMTP account failed. Verify that the username and password are correct.\"\r\n\r\n\r\nRegression: If it's a matter of incorrectly encoding the @ in the username, this is a regression from 10.6, possibly later.  \r\n\r\nNotes: My credentials are only 44 bytes base64-encoded, not 72, which makes me thing this is very likely an encoding bug. Additionally, I can log into the IMAP server with the same credentials just fine. Deleting the SMTP server from the list and re-adding it did not fix the problem. \r\n\r\n14-Jun-2013 03:37 PM Daniel DeCovnick:\r\nLogging in to the SMTP server works in Thuderbird. This is definitely a Mail bug. \r\n\r\n18-Jun-2013 12:19 PM Daniel DeCovnick:\r\nThis does not happen if the account was created in Mountain Lion and upgraded to Mavericks.\r\n\r\n27-Jun-2013 01:54 PM Daniel DeCovnick:\r\nAs of Mavericks DP2 the problem occurs in my accounts created on Mountain Lion as well. So at least it's consistently broken.\r\n\r\nAs of 6/27/13 - duplicate of 14039513\r\n\r\nAs of 7/23/13 - fixed in Mavericks DP4, original bug not yet closed"
    email: chaos42@gmail.com
    modified: "2013-07-24T08:05:08.531438Z"
    number: "14161127"
    number_intvalue: 14161127
    originated: 14-Jun-2013 03:22 PM
    parent_number: "14039513"
    product: Mac OS X
    product_version: 10.9 (DP1, DP2)
    reproducible: Always
    resolved: ""
    status: Duplicate/14039513
    title: 10.9 Mail not correctly encoding/sending SMTP SSL login (maybe with @) to Zoho
