apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "10593227"
    labels:
        datastore_id: "1475401"
data:
    classification: Crash
    created: "2011-12-16T16:47:14.445863Z"
    description: "16-Dec-2011 05:45 PM Joachim Bengtsson:\r\n'IVarAccessFromClassLLVMCrash.zip' was successfully uploaded\r\n\r\n16-Dec-2011 05:45 PM Joachim Bengtsson:\r\nSummary:\r\nAccessing a synthesized instance variable from a class method crashes LLVM.\r\n\r\nExample input (also attached, and http://cl.ly/1d3N3T3E06410X2v0i43):\r\n@interface CNAppDelegate ()\r\n@property (nonatomic,retain) id foo;\r\n@end\r\n\r\n@implementation CNAppDelegate\r\n@synthesize foo;\r\n+(void)myClassMethod;\r\n{\r\n\tfoo = [NSObject new];\r\n}\r\n@end\r\n\r\nExample output:\r\n\r\n\r\nCompileC /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/Objects-normal/i386/CNAppDelegate.o IVarAccessFromClassLLVMCrash/CNAppDelegate.mm normal i386 objective-c++ com.apple.compilers.llvm.clang.1_0.compiler\r\n    cd /Users/nevyn/Desktop/IVarAccessFromClassLLVMCrash\r\n    setenv LANG en_US.US-ASCII\r\n    setenv PATH \"/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin\"\r\n    /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/clang -x objective-c++ -arch i386 -fmessage-length=0 -fdiagnostics-print-source-range-info -fdiagnostics-show-category=id -fdiagnostics-parseable-fixits -Wno-trigraphs -fpascal-strings -O0 -Wmissing-prototypes -Wreturn-type -Wparentheses -Wswitch -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-shorten-64-to-32 -Wno-arc-abi -Wc++0x-extensions -DDEBUG=1 -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -fexceptions -fasm-blocks -mmacosx-version-min=10.6 -gdwarf-2 -fvisibility-inlines-hidden -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch \"-DIBOutlet=__attribute__((iboutlet))\" \"-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))\" \"-DIBAction=void)__attribute__((ibaction)\" -D__IPHONE_OS_VERSION_MIN_REQUIRED=50000 -iquote /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-generated-files.hmap -I/Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-own-target-headers.hmap -I/Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-all-target-headers.hmap -iquote /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-project-headers.hmap -I/Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Products/Debug-iphonesimulator/include -I/Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/DerivedSources/i386 -I/Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/DerivedSources -F/Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Products/Debug-iphonesimulator -include /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/PrecompiledHeaders/IVarAccessFromClassLLVMCrash-Prefix-gbunedaqhbshfnediifnyyygyxsj/IVarAccessFromClassLLVMCrash-Prefix.pch -MMD -MT dependencies -MF /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/Objects-normal/i386/CNAppDelegate.d -c /Users/nevyn/Desktop/IVarAccessFromClassLLVMCrash/IVarAccessFromClassLLVMCrash/CNAppDelegate.mm -o /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/Objects-normal/i386/CNAppDelegate.o\r\n\r\n0  clang             0x0000000109c42312 _ZL15PrintStackTracePv + 34\r\n1  clang             0x0000000109c427e9 _ZL13SignalHandleri + 633\r\n2  libsystem_c.dylib 0x00007fff993cecfa _sigtramp + 26\r\n3  libsystem_c.dylib 0x0000000000000277 _sigtramp + 18446603337945257367\r\n4  clang             0x0000000108f76094 clang::ASTContext::getDeclAlign(clang::Decl const*, bool) const + 964\r\n5  clang             0x000000010910bf53 clang::CodeGen::CodeGenFunction::EmitDeclRefLValue(clang::DeclRefExpr const*) + 51\r\n6  clang             0x000000010910bb6a clang::CodeGen::CodeGenFunction::EmitLValue(clang::Expr const*) + 250\r\n7  clang             0x000000010910f902 clang::CodeGen::CodeGenFunction::EmitCheckedLValue(clang::Expr const*) + 34\r\n8  clang             0x000000010949e321 clang::StmtVisitorBase<clang::make_ptr, (anonymous namespace)::ScalarExprEmitter, llvm::Value*>::Visit(clang::Stmt*) + 3601\r\n9  clang             0x0000000108f770f8 clang::CodeGen::CodeGenFunction::EmitScalarExpr(clang::Expr const*, bool) + 72\r\n10 clang             0x000000010910d129 clang::CodeGen::CodeGenFunction::EmitAnyExpr(clang::Expr const*, clang::CodeGen::AggValueSlot, bool) + 57\r\n11 clang             0x000000010910f8c9 clang::CodeGen::CodeGenFunction::EmitIgnoredExpr(clang::Expr const*) + 41\r\n12 clang             0x0000000108f76722 clang::CodeGen::CodeGenFunction::EmitStmt(clang::Stmt const*) + 194\r\n13 clang             0x0000000108f76cdb clang::CodeGen::CodeGenFunction::EmitCompoundStmt(clang::CompoundStmt const&, bool, clang::CodeGen::AggValueSlot) + 267\r\n14 clang             0x0000000108f76a98 clang::CodeGen::CodeGenFunction::EmitSimpleStmt(clang::Stmt const*) + 152\r\n15 clang             0x0000000108f76680 clang::CodeGen::CodeGenFunction::EmitStmt(clang::Stmt const*) + 32\r\n16 clang             0x00000001094a54ca clang::CodeGen::CodeGenFunction::GenerateObjCMethod(clang::ObjCMethodDecl const*) + 58\r\n17 clang             0x0000000108ecf331 clang::CodeGen::CodeGenModule::EmitTopLevelDecl(clang::Decl*) + 881\r\n18 clang             0x0000000108ecef9f (anonymous namespace)::CodeGeneratorImpl::HandleTopLevelDecl(clang::DeclGroupRef) + 95\r\n19 clang             0x0000000108ecef11 clang::BackendConsumer::HandleTopLevelDecl(clang::DeclGroupRef) + 161\r\n20 clang             0x0000000108ea2ff2 clang::ParseAST(clang::Sema&, bool) + 290\r\n21 clang             0x0000000108ea1aaf clang::CodeGenAction::ExecuteAction() + 671\r\n22 clang             0x0000000108e8d89b clang::CompilerInstance::ExecuteAction(clang::FrontendAction&) + 875\r\n23 clang             0x0000000108e8b918 clang::ExecuteCompilerInvocation(clang::CompilerInstance*) + 2696\r\n24 clang             0x0000000108e80115 cc1_main(char const**, char const**, char const*, void*) + 5333\r\n25 clang             0x0000000108e6327b main + 667\r\n26 clang             0x0000000108e62fd4 start + 52\r\n27 clang             0x0000000000000060 start + 18446744069265281216\r\nStack dump:\r\n0.\tProgram arguments: /Developer/usr/bin/clang -cc1 -triple i386-apple-macosx10.6.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name CNAppDelegate.mm -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -target-cpu yonah -target-linker-version 127.2 -g -coverage-file /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/Objects-normal/i386/CNAppDelegate.o -resource-dir /Developer/usr/bin/../lib/clang/3.0 -dependency-file /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/Objects-normal/i386/CNAppDelegate.d -MT dependencies -isysroot /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk -iquote /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-generated-files.hmap -iquote /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-project-headers.hmap -include-pch /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/PrecompiledHeaders/IVarAccessFromClassLLVMCrash-Prefix-gbunedaqhbshfnediifnyyygyxsj/IVarAccessFromClassLLVMCrash-Prefix.pch.pth -D DEBUG=1 -D IBOutlet=__attribute__((iboutlet)) -D IBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName))) -D IBAction=void)__attribute__((ibaction) -D __IPHONE_OS_VERSION_MIN_REQUIRED=50000 -I /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-own-target-headers.hmap -I /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/IVarAccessFromClassLLVMCrash-all-target-headers.hmap -I /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Products/Debug-iphonesimulator/include -I /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/DerivedSources/i386 -I /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/DerivedSources -F/Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Products/Debug-iphonesimulator -O0 -Wno-trigraphs -Wmissing-prototypes -Wreturn-type -Wparentheses -Wswitch -Wno-unused-parameter -Wunused-variable -Wunused-value -Wno-shorten-64-to-32 -Wno-arc-abi -Wc++0x-extensions -Wno-sign-conversion -fdeprecated-macro -ferror-limit 19 -fmessage-length 0 -fvisibility-inlines-hidden -fdiagnostics-print-source-range-info -fdiagnostics-parseable-fixits -stack-protector 1 -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-nonfragile-abi -fobjc-exceptions -fcxx-exceptions -fexceptions -fpascal-strings -fdiagnostics-show-option -fdiagnostics-show-category id -o /Users/nevyn/Library/Developer/Xcode/DerivedData/IVarAccessFromClassLLVMCrash-aazfeggntetrdncnoevsqrxoduun/Build/Intermediates/IVarAccessFromClassLLVMCrash.build/Debug-iphonesimulator/IVarAccessFromClassLLVMCrash.build/Objects-normal/i386/CNAppDelegate.o -x objective-c++ /Users/nevyn/Desktop/IVarAccessFromClassLLVMCrash/IVarAccessFromClassLLVMCrash/CNAppDelegate.mm \r\n1.\t/Users/nevyn/Desktop/IVarAccessFromClassLLVMCrash/IVarAccessFromClassLLVMCrash/CNAppDelegate.mm:23:1: current parser token '@'\r\n2.\t/Users/nevyn/Desktop/IVarAccessFromClassLLVMCrash/IVarAccessFromClassLLVMCrash/CNAppDelegate.mm:19:1: LLVM IR generation of declaration 'CNAppDelegate::myClassMethod'\r\n3.\t/Users/nevyn/Desktop/IVarAccessFromClassLLVMCrash/IVarAccessFromClassLLVMCrash/CNAppDelegate.mm:20:1: LLVM IR generation of compound statement ('{}')\r\nclang: error: unable to execute command: Segmentation fault: 11\r\nclang: error: clang frontend command failed due to signal 2 (use -v to see invocation)\r\n\r\n\r\n16-Dec-2011 05:46 PM Joachim Bengtsson:\r\nSorry, forgot to mention: This is only from Objective-C++."
    email: joachimb@gmail.com
    modified: "2011-12-16T16:47:14.446332Z"
    number: "10593227"
    number_intvalue: 10593227
    originated: 16-Dec-2011 05:45 PM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: 4.2.1
    reproducible: Always
    resolved: ""
    status: Open
    title: Accessing synthesized ivar from cmethod in ObjC++ crashes LLVM
