apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "8957939"
    labels:
        datastore_id: "1096403"
data:
    classification: Crash/Hang/Data Loss
    created: "2011-02-04T06:22:56.038034Z"
    description: "04-Feb-2011 01:22 AM Jeremy Sherman:\r\nSummary:\r\nPackageMaker v3.0.4/179 mangles .pmdocs created by v3.0.3/174. The original PackageMaker document, as created using v3.0.3, had packages beneath choices. When opened using PackageMaker v3.0.4, the packages are no longer nested within any choices: all choices contain nothing, and the packages are listed at top-level beneath the choices. If you save the pmdoc under v3.0.4, then the mangled state is retained when it is opened by v3.0.3. \r\n\r\nThis appears to affect all packages created using v3.0.3.\r\n\r\nSteps to Reproduce:\r\n1. Open PackageMaker v3.0.3/174.\r\n2. Select to target either 10.4 or 10.5. (10.3 might fail to work as well, but I have not tested it.)\r\n3. Click the plus button at the bottom left.\r\n4. Select a file.\r\n5. Save the document.\r\n6. Open it using PackageMaker v3.0.4.\r\n7. The problem is evident.\r\n\r\nExpected Results:\r\nPackageMaker v3.0.4 can read PackageMaker v3.0.3 files without problem.\r\n\r\nActual Results:\r\nPackageMaker v3.0.4 loses all nesting of packages beneath choices; this loss if made permanent when the file is saved.\r\n\r\nRegression:\r\nIntroduced with v3.0.4.\r\n\r\nNotes:\r\nI tested this using v3.0.3 under 10.5 and v3.0.4 under 10.6.\r\n\r\nHere is a diff of the changes introduced by v3.0.4 to a simple pmdoc with one choice having one package:\r\n\r\ndiff -u LeopardOneFile.pmdoc/01achp-contents.xml LeopardOneFile-v3.0.4.pmdoc/01achp-contents.xml\r\n--- LeopardOneFile.pmdoc/01achp-contents.xml\t2011-02-04 01:04:12.000000000 -0500\r\n+++ LeopardOneFile-v3.0.4.pmdoc/01achp-contents.xml\t2011-02-04 01:18:11.000000000 -0500\r\n@@ -1 +1 @@\r\n-<pkg-contents spec=\"1.12\"><f n=\"achp08-FDPE08-SoccerFun.pdf\" o=\"student\" g=\"staff\" p=\"33188\" pt=\"/Users/student/Desktop/achp08-FDPE08-SoccerFun.pdf\" m=\"false\" t=\"file\"/></pkg-contents>\r\n\\ No newline at end of file\r\n+<pkg-contents spec=\"1.12\"/>\r\n\\ No newline at end of file\r\ndiff -u LeopardOneFile.pmdoc/01achp.xml LeopardOneFile-v3.0.4.pmdoc/01achp.xml\r\n--- LeopardOneFile.pmdoc/01achp.xml\t2011-02-04 01:04:12.000000000 -0500\r\n+++ LeopardOneFile-v3.0.4.pmdoc/01achp.xml\t2011-02-04 01:18:11.000000000 -0500\r\n@@ -1 +1 @@\r\n-<pkgref spec=\"1.12\" uuid=\"0D90FEB4-2114-4756-9F3D-6B55A61C280C\"><config><identifier>com.leopard.achp08fdpe08soccerfun.pkg</identifier><version>1</version><description/><post-install type=\"none\"/><requireAuthorization/><installFrom>/Users/student/Desktop/achp08-FDPE08-SoccerFun.pdf</installFrom><installTo>/</installTo><flags><followSymbolicLinks/></flags><packageStore type=\"internal\"/><mod>parent</mod></config><contents><file-list>01achp-contents.xml</file-list><filter>/CVS$</filter><filter>/\\.svn$</filter><filter>/\\.cvsignore$</filter><filter>/\\.cvspass$</filter><filter>/\\.DS_Store$</filter></contents></pkgref>\r\n\\ No newline at end of file\r\n+<pkgref spec=\"1.12\" uuid=\"0D90FEB4-2114-4756-9F3D-6B55A61C280C\"><config><identifier>com.leopard.achp08-FDPE08-SoccerFun.pkg</identifier><version>1</version><description></description><post-install type=\"none\"/><requireAuthorization/><installFrom>/Users/student/Desktop/achp08-FDPE08-SoccerFun.pdf</installFrom><installTo>/</installTo><flags><followSymbolicLinks/></flags><packageStore type=\"internal\"></packageStore><mod>parent</mod></config></pkgref>\r\n\\ No newline at end of file\r\ndiff -u LeopardOneFile.pmdoc/index.xml LeopardOneFile-v3.0.4.pmdoc/index.xml\r\n--- LeopardOneFile.pmdoc/index.xml\t2011-02-04 01:04:12.000000000 -0500\r\n+++ LeopardOneFile-v3.0.4.pmdoc/index.xml\t2011-02-04 01:18:11.000000000 -0500\r\n@@ -1 +1 @@\r\n-<pkmkdoc spec=\"1.12\"><properties><organization>com.leopard</organization><userSees ui=\"easy\"/><min-target os=\"3\"/><domain anywhere=\"true\"/></properties><distribution><versions min-spec=\"1.000000\"/><scripts></scripts></distribution><contents><choice title=\"achp08-FDPE08-SoccerFun\" id=\"choice3\" starts_selected=\"true\" starts_enabled=\"true\" starts_hidden=\"false\"><pkgref id=\"com.leopard.achp08fdpe08soccerfun.pkg\"/></choice></contents><resources bg-scale=\"none\" bg-align=\"topleft\"><locale lang=\"en\"/></resources><flags/><item type=\"file\">01achp.xml</item></pkmkdoc>\r\n\\ No newline at end of file\r\n+<pkmkdoc spec=\"1.12\"><properties><organization>com.leopard</organization><userSees ui=\"easy\"/><min-target os=\"3\"/><domain anywhere=\"true\"/></properties><distribution><versions min-spec=\"1.000000\"/><scripts></scripts></distribution><contents><choice title=\"achp08-FDPE08-SoccerFun\" id=\"choice3\" starts_selected=\"true\" starts_enabled=\"true\" starts_hidden=\"false\"/></contents><resources bg-scale=\"none\" bg-align=\"topleft\"><locale lang=\"en\"/></resources><flags/><item type=\"file\">01achp.xml</item></pkmkdoc>\r\n\\ No newline at end of file\r\n\r\n\r\n04-Feb-2011 02:58 AM Jeremy Sherman:\r\nAfter experimenting with creating similar pmdocs in 3.0.3 and 3.0.4, the culprit appears to be the package identifier. v3.0.3 initially adopts it from the name of the file to be installed, but it alters the filename:\r\n\r\n* removes all spaces\r\n* removes punctuation\r\n* lowercases all text.\r\n\r\nv3.0.4 also generates the identifier from the filename, but its method differs:\r\n\r\n* removes all spaces\r\n* leaves all punctuation, including greater-than signs (!), which are not encoded as &gt;\r\n* leaves the case of text the same.\r\n\r\nWhen I edit the XML files of a v3.0.3 pmdoc to bring the identifier in line with how v3.0.4 would generate the identifier name, v3.0.4 appears to open the modified v3.0.3 pmdoc without problems.\r\n\r\nGenerating the v3.0.4-style identifier is easy to mess up. A more reliable approach is to open the v3.0.3 pmdoc in v3.0.4, select the package that no longer is under its choice, copy the identifier shown, and then edit the XML files to match that value. This might not work in all cases, but it fixed my problem.\r\n\r\nPerhaps you could have a future v3.0.5:\r\n* upgrade the v3.0.3 files to be openable by v3.0.4 / v3.0.5\r\n* provide a \"Check for Compatibility\" option that will advise of package identifiers that will be interpreted differently by v3.0.3 and later versions."
    email: jeremyw.sherman@gmail.com
    modified: "2011-08-28T05:38:05.087618Z"
    number: "8957939"
    number_intvalue: 8957939
    originated: 04-Feb-2011 01:22 AM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: v3.0.4/179
    reproducible: Always
    resolved: ""
    status: Open
    title: PackageMaker v3.0.4/179 mangles .pmdocs created by v3.0.3/174
