apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "11765613"
    labels:
        datastore_id: "1789409"
data:
    classification: ""
    created: "2012-07-02T18:29:53.019147Z"
    description: "27-Jun-2012 06:23 PM W Lewis:\r\nSummary:\r\n\r\nThe behavior of the SecKeyGetBlockSize() has changed between 12A154q and 12A239; it no longer returns a useful value for asymmetric keys.\r\n\r\nSteps to Reproduce:\r\n\r\nCompile and run attached program. (Or just call SecKeyGetBlockSize() on the asymmetric key refs of your choice.)\r\n\r\nExpected Results:\r\n\r\nFor asymmetric keys, SecKeyGetBlockSize() has previously returned the key \"size\" in bits (for algorithms based on a discrete-logarithm style problem, this is the number of bits needed to count the members of the group). This information is necessary in order to implement some cryptographic formats, which is presumably why there's an API to get it.\r\n\r\nActual Results:\r\n\r\nStarting with 12A239, SecKeyGetBlockSize() returns a different number. For RSA and DSA keys, the new number is 1/8 the old number. For ECDSA keys, the new number is slightly more than 1/4 the old number.\r\n\r\nRegression:\r\n\r\nI compiled the test program on 10.6.8/10K549, 10.7.4/11E53, 10.8/12A154q, and 10.8/12A239, with various target OS settings, and ran the resulting executables on the four OSes; in all cases, running on 12A239 resulted in failure and 12A154q and earlier resulted in correct behavior.\r\n\r\n Compiled   Targeting   Run   Results\r\n   10.6       10.6      10.6   OK\r\n   10.7       10.6      10.6   OK\r\n\r\n   10.8a      10.6      10.6   OK\r\n   10.6       10.6      10.7   OK\r\n   10.7       10.6      10.7   OK\r\n   10.7       10.7      10.7   OK\r\n   10.6       10.6      10.8a  OK\r\n   10.7       10.6      10.8a  OK\r\n   10.7       10.7      10.8a  OK\r\n   10.8a      10.6      10.8a  OK\r\n   10.8a      10.7      10.8a  OK\r\n   10.8a      10.8      10.8a  OK\r\n   10.6       10.6      10.8b  FAIL\r\n   10.7       10.6      10.8b  FAIL\r\n   10.7       10.7      10.8b  FAIL\r\n   10.8a      10.6      10.8b  FAIL\r\n   10.8a      10.7      10.8b  FAIL\r\n   10.8a      10.8      10.8b  FAIL\r\n\r\n\r\n(In this table 10.8a is 12A154q and 10.8b is 12A239.)\r\n\r\nAn example of correct output is:\r\n\r\n<SecKey 0x100428360 [0x7fff703faee0]>   RSA-2048 [EDRSVWU] perm  SecKeyGetBlockSize=2048\r\n<SecKey 0x102f006a0 [0x7fff703faee0]>   RSA-2048 [EDRSVWU] perm  SecKeyGetBlockSize=2048\r\n<SecKey 0x102f007f0 [0x7fff703faee0]>   RSA-2048 [EDRSVWU] perm  SecKeyGetBlockSize=2048\r\n<SecKey 0x102f00640 [0x7fff703faee0]>   ECDSA-256 [EDRSVWU] perm  SecKeyGetBlockSize=256\r\n<SecKey 0x102f0cb80 [0x7fff703faee0]>   ECDSA-384 [EDRSVWU] perm  SecKeyGetBlockSize=384\r\n<SecKey 0x10040ddd0 [0x7fff703faee0]>   ECDSA-384 [EDRSVWU] perm  SecKeyGetBlockSize=384\r\n<SecKey 0x10041c9f0 [0x7fff703faee0]>   RSA-1024 [EdrsVWu] perm  SecKeyGetBlockSize=1024\r\n<SecKey 0x102e00580 [0x7fff703faee0]>   RSA-1024 [EdrsVWu] perm  SecKeyGetBlockSize=1024\r\n\r\n\r\nAn example of incorrect output is:\r\n\r\n<SecKey 0x7f947d813080 [0x7fff79503190]>   RSA-2048 [EDRSVWU] perm  SecKeyGetBlockSize=256\r\n<SecKey 0x7f947be06560 [0x7fff79503190]>   RSA-2048 [EDRSVWU] perm  SecKeyGetBlockSize=256\r\n<SecKey 0x7f947dc01460 [0x7fff79503190]>   RSA-2048 [EDRSVWU] perm  SecKeyGetBlockSize=256\r\n<SecKey 0x7f947be06560 [0x7fff79503190]>   ECDSA-256 [EDRSVWU] perm  SecKeyGetBlockSize=72\r\n<SecKey 0x7f947dc012b0 [0x7fff79503190]>   DSA-1024 [EDRSVWU] perm  SecKeyGetBlockSize=128\r\n<SecKey 0x7f947dd12ca0 [0x7fff79503190]>   ECDSA-384 [EDRSVWU] perm  SecKeyGetBlockSize=104\r\n<SecKey 0x7f947de141f0 [0x7fff79503190]>   ECDSA-384 [EDRSVWU] perm  SecKeyGetBlockSize=104\r\n<SecKey 0x7f947dc0df70 [0x7fff79503190]>   RSA-1024 [EdrsVWu] perm  SecKeyGetBlockSize=128\r\n<SecKey 0x7f947d809220 [0x7fff79503190]>   RSA-1024 [EdrsVWu] perm  SecKeyGetBlockSize=128\r\n<SecKey 0x7f947be06720 [0x7fff79503190]>   RSA-1024 [EdrsVWu] perm  SecKeyGetBlockSize=128\r\n\r\n\r\nNotes:\r\n\r\nThere doesn't seem to be another way to get the key size using the post-10.7 APIs. (The 10.6 APIs still work, fortunately.)"
    email: wiml@omnigroup.com
    modified: "2013-10-07T18:28:53.67449Z"
    number: "11765613"
    number_intvalue: 11765613
    originated: 27-Jun-2012
    parent_number: '&{NULL_VALUE}'
    product: OS X
    product_version: 10.8/12A239
    reproducible: Always
    resolved: 18-Apr-2013 07:59 AM
    status: Closed/Behaves Correctly
    title: SecKeyGetBlockSize() returns wrong value in 10.8/12A239
