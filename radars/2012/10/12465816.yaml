apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "12465816"
    labels:
        datastore_id: "2129402"
data:
    classification: Serious Bug (aren't they all!)
    created: "2012-10-10T00:42:16.64689Z"
    description: "10-Oct-2012 11:39 AM Mark Aufflick:\r\nSummary:\r\n\r\nIf you have an NSPopover with something as first responder (eg. an NSTextField) that has been detached to a window, and then attempt to open another similar NSPopover, an exception occurs and the second NSPopover does not open:\r\n\r\nNSWindow: -_newFirstResponderAfterResigining is not a valid message outside of a responder's implementation of -resignFirstResponder.\r\n\r\nSteps to Reproduce:\r\n\r\n1. Open an NSPopover with an NSTextField.\r\n2. Detach it to a window\r\n3. Attempt to open a new NSPopover that also has an NSTextField\r\n\r\nExpected Results:\r\n\r\nNSPopover shows.\r\n\r\nActual Results:\r\n\r\nNo NSPopover, and logs show exception:\r\n\r\n2012-10-10 10:31:00.069 PopoverTest[30774:303] NSWindow: -_newFirstResponderAfterResigining is not a valid message outside of a responder's implementation of -resignFirstResponder.\r\n2012-10-10 10:31:00.074 PopoverTest[30774:303] (\r\n\t0   CoreFoundation                      0x00007fff8c62c0a6 __exceptionPreprocess + 198\r\n\t1   libobjc.A.dylib                     0x00007fff8ce003f0 objc_exception_throw + 43\r\n\t2   CoreFoundation                      0x00007fff8c62be7c +[NSException raise:format:] + 204\r\n\t3   AppKit                              0x00007fff93606cf9 -[NSWindow _newFirstResponderAfterResigning] + 117\r\n\t4   AppKit                              0x00007fff936068cf -[NSTextView(NSSharing) resignFirstResponder] + 53\r\n\t5   AppKit                              0x00007fff934d07d8 -[NSWindow makeFirstResponder:] + 430\r\n\t6   AppKit                              0x00007fff93a030a2 -[NSWindow _makeParentWindowHaveFirstResponder:] + 51\r\n\t7   AppKit                              0x00007fff934d067a -[NSWindow makeFirstResponder:] + 80\r\n\t8   AppKit                              0x00007fff934f6ad8 -[NSWindow _selectFirstKeyView] + 812\r\n\t9   AppKit                              0x00007fff934f678b -[NSWindow _setUpFirstResponder] + 182\r\n\t10  AppKit                              0x00007fff934f4abf -[NSWindow _reallyDoOrderWindow:relativeTo:findKey:forCounter:force:isModal:] + 1288\r\n\t11  AppKit                              0x00007fff934f3f7c -[NSWindow _doOrderWindow:relativeTo:findKey:forCounter:force:isModal:] + 496\r\n\t12  AppKit                              0x00007fff934f3d1f -[NSWindow orderWindow:relativeTo:] + 159\r\n\t13  AppKit                              0x00007fff935c12b1 -[NSWindow addChildWindow:ordered:] + 924\r\n\t14  AppKit                              0x00007fff93b951a4 -[NSPopover showRelativeToRect:ofView:preferredEdge:] + 1693\r\n\t15  PopoverTest                         0x00000001000016d9 -[PTYAppDelegate button2:] + 601\r\n\t16  AppKit                              0x00007fff93524a59 -[NSApplication sendAction:to:from:] + 342\r\n\t17  AppKit                              0x00007fff935248b7 -[NSControl sendAction:to:] + 85\r\n\t18  AppKit                              0x00007fff935247eb -[NSCell _sendActionFrom:] + 138\r\n\t19  AppKit                              0x00007fff93522cd3 -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1855\r\n\t20  AppKit                              0x00007fff93522521 -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 504\r\n\t21  AppKit                              0x00007fff93521c9c -[NSControl mouseDown:] + 820\r\n\t22  AppKit                              0x00007fff9351960e -[NSWindow sendEvent:] + 6853\r\n\t23  AppKit                              0x00007fff93515744 -[NSApplication sendEvent:] + 5761\r\n\t24  AppKit                              0x00007fff9342b2fa -[NSApplication run] + 636\r\n\t25  AppKit                              0x00007fff933cfcb6 NSApplicationMain + 869\r\n\t26  PopoverTest                         0x00000001000011d2 main + 34\r\n\t27  libdyld.dylib                       0x00007fff924427e1 start + 0\r\n)\r\n\r\nRegression:\r\n\r\nI'm pretty confident this didn't happen with the SDK shipped with 4.5.0.\r\n\r\nNotes:\r\n\r\nI have attached a sample project that demonstrates the issues if you follow the steps above.\r\n#For OpenRadar readers, here's the sample app: https://dl.dropbox.com/u/12615608/PopoverTest%20Project.zip\r\n\r\nIf the NSPopovers have nothing capable of being first responder it works fine."
    email: aufflick@gmail.com
    modified: "2012-10-10T00:42:16.647134Z"
    number: "12465816"
    number_intvalue: 12465816
    originated: 10/10/12
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: Xcode 4.5.1
    reproducible: Always
    resolved: ""
    status: New
    title: Exception when opening NSPopover if existing detached firstResponder
