apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "11033943"
    labels:
        datastore_id: "1596409"
data:
    classification: ""
    created: "2012-03-12T23:33:30.876392Z"
    description: "12-Mar-2012 11:29 PM Stig Brautaset:\r\nSummary:\r\n\r\nTests, even the ones created by default for a newly created iOS static library, fail to run in iOS 5 simulator on Xcode 4.3.1. (They _do_ run correctly in iOS 4.3 simulator.)\r\n\r\nSteps to Reproduce:\r\n\r\n1. Create new iOS Static library named \"Foo\"\r\n2. Include unit tests\r\n3. Without changing any of the code, run tests in iPhone (or iPad) simulator\r\n\r\nExpected Results:\r\n\r\nError saying \"Unit tests are not implemented yet in FooTests\"\r\n\r\nActual Results:\r\n\r\nError saying EXC_BAD_ACCESS\r\n\r\n\r\nStack trace from lldb:\r\n\r\n(lldb) bt\r\n* thread #1: tid = 0x2107, 0x00000000 otest, stop reason = EXC_BAD_ACCESS (code=2, address=0x0)\r\n    frame #0: 0x00000000 otest\r\n    frame #1: 0x9a3b5ef3 libsystem_kernel.dylib`mig_get_reply_port + 12\r\n    frame #2: 0x9a3af70c libsystem_kernel.dylib`mach_ports_lookup + 33\r\n    frame #3: 0x0103a124 libxpc_sim.dylib`_xpc_domain_init_local + 59\r\n    frame #4: 0x01037eb1 libxpc_sim.dylib`_libxpc_initializer + 46\r\n    frame #5: 0x8fe94203 dyld`ImageLoaderMachO::doModInitFunctions(ImageLoader::LinkContext const&) + 251\r\n    frame #6: 0x8fe93d68 dyld`ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) + 64\r\n    frame #7: 0x8fe912c8 dyld`ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 256\r\n    frame #8: 0x8fe9125e dyld`ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 150\r\n    frame #9: 0x8fe9125e dyld`ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 150\r\n    frame #10: 0x8fe9125e dyld`ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 150\r\n    frame #11: 0x8fe9125e dyld`ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 150\r\n    frame #12: 0x8fe92268 dyld`ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) + 62\r\n    frame #13: 0x8fe86664 dyld`dyld::initializeMainExecutable() + 166\r\n    frame #14: 0x8fe8af99 dyld`dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**) + 2238\r\n    frame #15: 0x8fe842ef dyld`dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*) + 637\r\n(lldb) \r\n\r\nRegression:\r\n\r\nYes. The tests _do_ run correctly in the iOS 4.3 simulator.\r\n\r\nNotes:\r\n\r\nErrors in Console:\r\n\r\n\r\n12/03/2012 23:27:52.139 com.apple.debugserver-170: 1 +0.000000 sec [4fbf/0303]: error: ::ptrace (request = PT_THUPDATE, pid = 0x4fc0, tid = 0x2107, signal = 0) err = Resource busy (0x00000010)\r\n12/03/2012 23:27:52.141 com.apple.debugserver-170: 2 +0.001920 sec [4fbf/0303]: error: ::task_info ( target_task = 0x1c03, flavor = TASK_BASIC_INFO, task_info_out => 0x7fff6e9d3070, task_info_outCnt => 10 ) err = (ipc/send) invalid destination port (0x10000003)\r\n12/03/2012 23:27:52.149 Xcode: [MT] DVTAssertions: Warning in /SourceCache/IDEKit/IDEKit-1202/Framework/Classes/Editor/IDEEditorContext.m:600\r\nDetails:  Lost history for x-xcode-disassembly://stack_frame?processID=20416&threadID=1&frameID=0\r\nObject:   <IDEEditorContext: 0x4024ac2a0>\r\nMethod:   -_greatestDocumentAncestorWasForgotten\r\nThread:   <NSThread: 0x40010a220>{name = (null), num = 1}\r\nPlease file a bug at http://bugreport.apple.com with this warning message and any useful information you can provide.\r\n12/03/2012 23:27:52.351 Xcode: Error launching simulated application: Error Domain=DTiPhoneSimulatorErrorDomain Code=1 \"Unknown error.\" UserInfo=0x403b602c0 {NSLocalizedDescription=Unknown error., DTiPhoneSimulatorUnderlyingErrorCodeKey=-1}\r\n12/03/2012 23:27:52.892 com.apple.debugserver-170: debugserver-170 for x86_64.\r\n12/03/2012 23:27:52.893 com.apple.debugserver-170: Listening to port 18518...\r\n12/03/2012 23:27:52.989 com.apple.debugserver-170: Got a connection, waiting for process information for launching or attaching.\r\n12/03/2012 23:27:53.020 com.apple.debugserver-170: Got a connection, waiting for debugger instructions.\r\n12/03/2012 23:27:53.614 Xcode: Bookmark failed to issue extension for item  (depth=1): No such file or directory"
    email: stig@brautaset.org
    modified: "2012-03-12T23:33:30.876742Z"
    number: "11033943"
    number_intvalue: 11033943
    originated: 12-Mar-2012 11:29 PM
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: Version 4.3 (4E109)
    reproducible: Always
    resolved: ""
    status: Open
    title: EXC_BAD_ACCESS in Xcode 4.3.1 when running tests in iOS 5 simulator
