apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "11571828"
    labels:
        datastore_id: "1760404"
data:
    classification: Crash/Hang/Data Loss
    created: "2012-06-01T01:18:46.41476Z"
    description: "I came across this situation last night. The app had just finished launching (under LLDB), and then hung. Most threads are waiting on the method cache lock, apparently held by the main thread. The main thread is attempting to mark a class as initialized.\r\n\r\nI feel like I've seen this issue once or twice before, but it's (clearly) fairly rare.\r\n\r\n\r\nThread 1, Queue : com.apple.main-thread\r\n#0\t0x00007fff971866b6 in semaphore_wait_trap ()\r\n#1\t0x00007fff8bdc677d in _class_setInitialized ()\r\n#2\t0x00007fff8bdc664c in _finishInitializing ()\r\n#3\t0x00007fff8bdc56af in _class_initialize ()\r\n#4\t0x00007fff8bdc5517 in prepareForMethodLookup ()\r\n#5\t0x00007fff8bdc52bb in lookUpMethod ()\r\n#6\t0x00007fff8bdc2f3c in objc_msgSend ()\r\n#7\t0x00007fff97662ccc in -[NSURLRequest initWithURL:cachePolicy:timeoutInterval:] ()\r\n#8\t0x00007fff97662c4d in +[NSURLRequest requestWithURL:cachePolicy:timeoutInterval:] ()\r\n#9\t0x000000010030c6eb in -[LINetworkWatcher _testNetworkConnectionAndChangeStatusBasedOnResults] at /Users/jonathon/Documents/Streams/Delicious Monster/UberLibrary/Library/LINetworkWatcher.m:95\r\n#10\t0x000000010030c33d in networkReachabilityChanged at /Users/jonathon/Documents/Streams/Delicious Monster/UberLibrary/Library/LINetworkWatcher.m:138\r\n#11\t0x00007fff9794d999 in rlsPerform ()\r\n#12\t0x00007fff8ec3d4f1 in __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ ()\r\n#13\t0x00007fff8ec3cd5d in __CFRunLoopDoSources0 ()\r\n#14\t0x00007fff8ec63b49 in __CFRunLoopRun ()\r\n#15\t0x00007fff8ec63486 in CFRunLoopRunSpecific ()\r\n#16\t0x00007fff92e1f4d3 in RunCurrentEventLoopInMode ()\r\n#17\t0x00007fff92e26781 in ReceiveNextEventCommon ()\r\n#18\t0x00007fff92e2660e in BlockUntilNextEventMatchingListInMode ()\r\n#19\t0x00007fff94656e31 in _DPSNextEvent ()\r\n#20\t0x00007fff94656735 in -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] ()\r\n#21\t0x00007fff94653071 in -[NSApplication run] ()\r\n#22\t0x00007fff948cf244 in NSApplicationMain ()\r\n#23\t0x00000001000032e6 in main at /Users/jonathon/Documents/Streams/Delicious Monster/UberLibrary/Library/main.m:52\r\n#24\t0x0000000100002664 in start ()\r\n\r\nThread 2, Queue : com.apple.libdispatch-manager\r\n#0\t0x00007fff971887e6 in kevent ()\r\n#1\t0x00007fff9014778a in _dispatch_mgr_invoke ()\r\n#2\t0x00007fff9014631a in _dispatch_mgr_thread ()\r\n\r\nThread 3, Queue : com.apple.root.default-priority\r\n#0\t0x00007fff971866b6 in semaphore_wait_trap ()\r\n#1\t0x00007fff8bdc5af8 in lockForMethodLookup ()\r\n#2\t0x00007fff8bdc5367 in lookUpMethod ()\r\n#3\t0x00007fff8bdc2f3c in objc_msgSend ()\r\n#4\t0x00007fff9483744d in _addTextReplacement ()\r\n#5\t0x00007fff94833936 in NSSpellCheckerCheckString ()\r\n#6\t0x00007fff94832e70 in -[NSTextCheckingOperation main] ()\r\n#7\t0x00007fff976456b4 in -[__NSOperationInternal start] ()\r\n#8\t0x00007fff97658912 in ____NSOQSchedule_block_invoke_2 ()\r\n#9\t0x00007fff90145a86 in _dispatch_call_block_and_release ()\r\n#10\t0x00007fff90146965 in _dispatch_worker_thread2 ()\r\n#11\t0x00007fff96f463da in _pthread_wqthread ()\r\n#12\t0x00007fff96f47b85 in start_wqthread ()\r\n\r\nThread 4, Queue : CFPreferences Background Sync Queue\r\n#0\t0x00007fff971866b6 in semaphore_wait_trap ()\r\n#1\t0x00007fff8bdc5af8 in lockForMethodLookup ()\r\n#2\t0x00007fff8bdc5367 in lookUpMethod ()\r\n#3\t0x00007fff8bdc2f3c in objc_msgSend ()\r\n#4\t0x00007fff8ecb24a8 in __AUTOSYNC_ESTABLISH_block_invoke_1 ()\r\n#5\t0x00007fff90145a86 in _dispatch_call_block_and_release ()\r\n#6\t0x00007fff90147dd3 in _dispatch_after_timer_callback ()\r\n#7\t0x00007fff9014a497 in _dispatch_source_invoke ()\r\n#8\t0x00007fff90147143 in _dispatch_queue_invoke ()\r\n#9\t0x00007fff901472a0 in _dispatch_queue_drain ()\r\n#10\t0x00007fff90147132 in _dispatch_queue_invoke ()\r\n#11\t0x00007fff9014692c in _dispatch_worker_thread2 ()\r\n#12\t0x00007fff96f463da in _pthread_wqthread ()\r\n#13\t0x00007fff96f47b85 in start_wqthread ()\r\n\r\nThread 5, Queue : com.apple.root.default-priority\r\n#0\t0x00007fff971866b6 in semaphore_wait_trap ()\r\n#1\t0x00007fff8bdc5af8 in lockForMethodLookup ()\r\n#2\t0x00007fff8bdc5367 in lookUpMethod ()\r\n#3\t0x00007fff8bdc2f3c in objc_msgSend ()\r\n#4\t0x00007fff90d8b4a8 in __+[ABAddressBook nts_CreateSharedAddressBook]_block_invoke_1 ()\r\n#5\t0x00007fff90145a86 in _dispatch_call_block_and_release ()\r\n#6\t0x00007fff90147dd3 in _dispatch_after_timer_callback ()\r\n#7\t0x00007fff9014a497 in _dispatch_source_invoke ()\r\n#8\t0x00007fff90147143 in _dispatch_queue_invoke ()\r\n#9\t0x00007fff9014692c in _dispatch_worker_thread2 ()\r\n#10\t0x00007fff96f463da in _pthread_wqthread ()\r\n#11\t0x00007fff96f47b85 in start_wqthread ()\r\n\r\nThread 6, Queue : (null)\r\n#0\t0x00007fff9718667a in mach_msg_trap ()\r\n#1\t0x00007fff97185dda in mach_msg ()\r\n#2\t0x00007fff8ec5b50c in __CFRunLoopServiceMachPort ()\r\n#3\t0x00007fff8ec63c74 in __CFRunLoopRun ()\r\n#4\t0x00007fff8ec63486 in CFRunLoopRunSpecific ()\r\n#5\t0x00007fff931e9fe9 in CMIO::DAL::RunLoop::OwnThread(void*) ()\r\n#6\t0x00007fff931e015a in CAPThread::Entry(CAPThread*) ()\r\n#7\t0x00007fff96f448bf in _pthread_start ()\r\n#8\t0x00007fff96f47b75 in thread_start ()\r\n\r\nThread 7 com.apple.CFSocket.private, Queue : (null)\r\n#0\t0x00007fff97187df2 in select$DARWIN_EXTSN ()\r\n#1\t0x00007fff8ecacc8b in __CFSocketManager ()\r\n#2\t0x00007fff96f448bf in _pthread_start ()\r\n#3\t0x00007fff96f47b75 in thread_start ()\r\n\r\nThread 8 CVDisplayLink, Queue : (null)\r\n#0\t0x00007fff97187bca in __psynch_cvwait ()\r\n#1\t0x00007fff96f48274 in _pthread_cond_wait ()\r\n#2\t0x00007fff97d846c8 in CVDisplayLink::runIOThread() ()\r\n#3\t0x00007fff97d843e9 in _ZL13startIOThreadPv ()\r\n#4\t0x00007fff96f448bf in _pthread_start ()\r\n#5\t0x00007fff96f47b75 in thread_start ()\r\n\r\nThread 9, Queue : com.apple.root.default-overcommit-priority\r\n#0\t0x00007fff971866b6 in semaphore_wait_trap ()\r\n#1\t0x00007fff8bdc5af8 in lockForMethodLookup ()\r\n#2\t0x00007fff8bdc5367 in lookUpMethod ()\r\n#3\t0x00007fff8bdc2f3c in objc_msgSend ()\r\n#4\t0x00007fff8eb7451e in _Block_object_assign ()\r\n#5\t0x00007fff8eb74305 in _Block_copy_internal ()\r\n#6\t0x00007fff8ec831c5 in CFRunLoopPerformBlock ()\r\n#7\t0x00007fff8ecb1fc8 in __CFXNotificationPostToken ()\r\n#8\t0x00007fff97fd07b3 in ___notify_dispatch_handle_block_invoke_1 ()\r\n#9\t0x00007fff90145a86 in _dispatch_call_block_and_release ()\r\n#10\t0x00007fff90146965 in _dispatch_worker_thread2 ()\r\n#11\t0x00007fff96f463da in _pthread_wqthread ()\r\n#12\t0x00007fff96f47b85 in start_wqthread ()\r\n\r\nThread 11, Queue : com.apple.root.default-priority\r\n#0\t0x00007fff971866b6 in semaphore_wait_trap ()\r\n#1\t0x00007fff8bdc5af8 in lockForMethodLookup ()\r\n#2\t0x00007fff8bdc5367 in lookUpMethod ()\r\n#3\t0x00007fff8bdc2f3c in objc_msgSend ()\r\n#4\t0x00007fff9468b6de in __-[NSPersistentUIManager tearDownStateRestorationApparatusAndResumeWindowOrdering]_block_invoke_1 ()\r\n#5\t0x00007fff90145a86 in _dispatch_call_block_and_release ()\r\n#6\t0x00007fff90147dd3 in _dispatch_after_timer_callback ()\r\n#7\t0x00007fff9014a497 in _dispatch_source_invoke ()\r\n#8\t0x00007fff90147143 in _dispatch_queue_invoke ()\r\n#9\t0x00007fff9014692c in _dispatch_worker_thread2 ()\r\n#10\t0x00007fff96f463da in _pthread_wqthread ()\r\n#11\t0x00007fff96f47b85 in start_wqthread ()"
    email: me@JonathonMah.com
    modified: "2012-06-01T01:18:46.415022Z"
    number: "11571828"
    number_intvalue: 11571828
    originated: 31-May-2012 06:17 PM
    parent_number: '&{NULL_VALUE}'
    product: Mac OS X
    product_version: 10.7.4 (11E53)
    reproducible: Rarely
    resolved: ""
    status: Open
    title: Deadlock on app launch in (ObjC method cache)
