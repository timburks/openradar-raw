apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "45715123"
    labels:
        datastore_id: "6125925083119616"
data:
    classification: ""
    created: "2018-10-31T22:56:36.299007Z"
    description: "Summary:\r\n\r\nMany printer drivers (particularly for those used in commercial settings) use Print Dialog Extensions to provide custom user interfaces.\r\n\r\nIn Mojave the PDEs aren't loaded in Apple apps and in many cases this results in the printer being unusable from those apps. If a printer requires authentication to use it (for example, a Xerox copier) then if a PDE is loaded the user may not be able to enter authentication information. In that case the user will NOT be able to print.\r\n\r\n\r\nSteps to Reproduce:\r\n1. Set up a Xerox C70 copier to require username/password authentication.\r\n2. Install the Xerox printer drivers on a Mac running Mojave.\r\n3. Configure the Mac to print to the Xerox C70.\r\n4. Open the Print dialog in Safari or TextEdit.\r\n5. Choose the C70\r\n5. Go to the Printer Features settings\r\n6. Attempt to configure authentication\r\n7. You can't, because there's no place to enter the username/password.\r\n8. Thus you can't print at all, because the copier rejects the unauthenticated print job.\r\n\r\nNote: This is NOT a bug in the Xerox driver. The same thing happens with ANY printer driver that uses a PDE, even if the \"PMSandboxCompatiblePDEs\" key is set in Info.plist (as it is in the Xerox driver). I'm just using the Xerox one as an example because I happen to be trying to print something to my department's C70 copier at the moment.\r\n\r\nIt still works normally in a non-Apple app even when sandboxed.\r\n\r\nThe only workaround is to print to PDF and then print the PDF from Acrobat Reader (NOT Apple's Preview, obviously). But that's a painful workaround.\r\n\r\nI'm guessing one could also get around it by disabling SIP but I don't want to do that.\r\n\r\n\r\nExpected Results:\r\n\r\nThe print dialog should load the Print Dialog Extension to provide a custom user interface for Printer Features.\r\n\r\n\r\nActual Results:\r\n\r\nThe print dialog fails to load the Print Dialog Extension and instead falls back to the generic UI generated by parsing the PPD.\r\n\r\nThis is the error listed in Console.app for an app that's bundled with the operating system:\r\n\r\nLibrary Validation failed: Rejecting '/Library/Printers/Xerox/PDEs/XeroxFeatures.plugin/Contents/MacOS/XeroxFeatures' (Team ID: G59Y3XFNFR, platform: no) for process 'Safari(38982)' (Team ID: none, platform: yes), reason: mapping process is a platform binary, but mapped file is not\r\n\r\nAnd the error for an app that isn't:\r\n\r\nLibrary Validation failed: Rejecting '/Library/Printers/Xerox/PDEs/XeroxFeatures.plugin/Contents/MacOS/XeroxFeatures' (Team ID: G59Y3XFNFR, platform: no) for process 'Pages(38906)' (Team ID: K36BKF7T3D, platform: no), reason: mapping process and mapped file (non-platform) have different Team IDs\r\n\r\n\r\nVersion/Build:\r\n\r\nmacOS 10.14.1 Beta (18B73a)\r\n\r\n\r\nConfiguration:\r\niMac (Retina 5K, 27-inch, Late 2014)\r\n4 GHz Intel Core i7\r\n16 GB 1600 MHz DDR3\r\nInternal SSD\r\nAMD Radeon R9 M295X 4096 MB"
    email: tim1724@gmail.com
    modified: "2018-11-05T23:47:46.042853Z"
    number: "45715123"
    number_intvalue: 45715123
    originated: 10/31/2018
    parent_number: '&{NULL_VALUE}'
    product: 'macOS: Printing & Faxing'
    product_version: "10.14"
    reproducible: Always
    resolved: ""
    status: Duplicate/45000321 (Open)
    title: Print Dialog Extensions don't load in Apple apps
