apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "39671522"
    labels:
        datastore_id: "4940600990236672"
data:
    classification: Crash
    created: "2018-04-24T03:29:02.37097Z"
    description: "Summary:\r\nCrash after playing video in web view.\r\n\r\nSteps to Reproduce:\r\n1. Plays YouTube video through UIWebView in youtube_ios_player_helper.framework.\r\n2. Stops playing video.\r\n\r\nExpected Results:\r\nStops playing video without crash.\r\n\r\nActual Results:\r\nCrash after stopped playing video.\r\n\r\n---- crash dump\r\n\r\nThread 36 Crashed:\r\n0   JavaScriptCore                \t0x000000018a860298 JSC::JSLock::DropAllLocks::DropAllLocks+ 9192088 (JSC::VM&) + 176\r\n1   JavaScriptCore                \t0x000000018a86026c JSC::JSLock::DropAllLocks::DropAllLocks+ 9192044 (JSC::VM&) + 132\r\n2   WebCore                       \t0x000000018b5a3794 SendDelegateMessage+ 354196 (NSInvocation*) + 360\r\n3   WebKitLegacy                  \t0x000000018ccbfc68 CallDelegate(void (*)+ 691304 (), WebView*, objc_object*, objc_selector*, objc_object*, objc_object*, objc_object*) + 144\r\n4   WebKitLegacy                  \t0x000000018cc338d0 WebFrameLoaderClient::dispatchDidFailLoading+ 116944 (WebCore::DocumentLoader*, unsigned long, WebCore::ResourceError const&) + 276\r\n5   WebCore                       \t0x000000018b5d2660 WebCore::ResourceLoadNotifier::didFailToLoad+ 546400 (WebCore::ResourceLoader*, WebCore::ResourceError const&) + 128\r\n6   WebCore                       \t0x000000018b5d2118 WebCore::ResourceLoader::cancel+ 545048 (WebCore::ResourceError const&) + 464\r\n7   WebCore                       \t0x000000018b5d1ea4 WebCore::ResourceLoader::cancel+ 544420 () + 64\r\n8   WebCore                       \t0x000000018c4d3e90 WebCore::CachedResource::removeClient+ 16281232 (WebCore::CachedResourceClient&) + 264\r\n9   WebCore                       \t0x000000018c498558 WebCore::MediaResource::~MediaResource+ 16037208 () + 64\r\n10  WebCore                       \t0x000000018c498608 WebCore::MediaResource::~MediaResource+ 16037384 () + 12\r\n11  libobjc.A.dylib               \t0x00000001825f2ef4 object_cxxDestructFromClass+ 28404 (objc_object*, objc_class*) + 148\r\n12  libobjc.A.dylib               \t0x0000000182600990 objc_destructInstance + 68\r\n13  libobjc.A.dylib               \t0x00000001826009f8 object_dispose + 16\r\n14  WebCore                       \t0x000000018ca178f0 -[WebCoreNSURLSessionDataTask dealloc] + 320\r\n15  CoreFoundation                \t0x000000018330a4e4 -[__NSDictionaryM dealloc] + 164\r\n16  AVFoundation                  \t0x0000000188f48cf8 -[AVAssetCustomURLBridgeForNSURLSession dealloc] + 68\r\n17  AVFoundation                  \t0x0000000188f94e54 -[AVAssetResourceLoader dealloc] + 356\r\n18  AVFoundation                  \t0x0000000188e78460 -[AVURLAsset dealloc] + 248\r\n19  AVFoundation                  \t0x0000000188eafc34 -[AVPlayerItemTrack dealloc] + 192\r\n20  WebCore                       \t0x000000018b6c1fac WebCore::AVTrackPrivateAVFObjCImpl::~AVTrackPrivateAVFObjCImpl+ 1527724 () + 92\r\n21  WebCore                       \t0x000000018ca089dc WebCore::VideoTrackPrivateAVFObjC::~VideoTrackPrivateAVFObjC+ 21739996 () + 48\r\n22  WebCore                       \t0x000000018ca07c7c WebCore::VideoTrack::~VideoTrack+ 21736572 () + 96\r\n23  WebCore                       \t0x000000018b79a390 WebCore::TrackEvent::~TrackEvent+ 2413456 () + 72\r\n24  JavaScriptCore                \t0x000000018a83e228 void JSC::MarkedBlock::Handle::specializedSweep<true, (JSC::MarkedBlock::Handle::EmptyMode)1, (JSC::MarkedBlock::Handle::SweepMode)1, (JSC::MarkedBlock::Handle::SweepDestructionMode)1, (JSC::MarkedBlock::Handle::ScribbleMode)0, (JSC::MarkedBlock::Handle::NewlyAllocatedMode)1, (JSC::MarkedBlock::Handle::MarksMode)1, JSC::JSDestructibleObjectDestroyFunc>+ 9052712 (JSC::FreeList*, JSC::MarkedBlock::Handle::EmptyMode, JSC::MarkedBlock::Handle::SweepMode, JSC::MarkedBlock::Handle::SweepDestructionMode, JSC::MarkedBlock::Handle::ScribbleMode, JSC::MarkedBlock::Handle::NewlyAllocatedMode, JSC::MarkedBlock::Handle::MarksMode, JSC::JSDestructibleObjectDestroyFunc const&) + 212\r\n25  JavaScriptCore                \t0x000000018a83c950 void JSC::MarkedBlock::Handle::finishSweepKnowingHeapCellType<JSC::JSDestructibleObjectDestroyFunc>(JSC::FreeList*, JSC::JSDestructibleObjectDestroyFunc const&)::'lambda'()::operator()+ 9046352 () const + 408\r\n26  JavaScriptCore                \t0x000000018a83c44c void JSC::MarkedBlock::Handle::finishSweepKnowingHeapCellType<JSC::JSDestructibleObjectDestroyFunc>+ 9045068 (JSC::FreeList*, JSC::JSDestructibleObjectDestroyFunc const&) + 320\r\n27  JavaScriptCore                \t0x000000018a83c300 JSC::JSDestructibleObjectHeapCellType::finishSweep+ 9044736 (JSC::MarkedBlock::Handle&, JSC::FreeList*) + 32\r\n28  JavaScriptCore                \t0x000000018a5c4538 JSC::MarkedBlock::Handle::sweep+ 6456632 (JSC::FreeList*) + 372\r\n29  JavaScriptCore                \t0x000000018a5c26fc JSC::LocalAllocator::tryAllocateIn+ 6448892 (JSC::MarkedBlock::Handle*) + 40\r\n30  JavaScriptCore                \t0x000000018a5c2608 JSC::LocalAllocator::tryAllocateWithoutCollecting+ 6448648 () + 48\r\n31  JavaScriptCore                \t0x000000018a5c24c8 JSC::LocalAllocator::allocateSlowCase+ 6448328 (JSC::GCDeferralContext*, JSC::AllocationFailureMode) + 292\r\n32  JavaScriptCore                \t0x000000018a5a74b8 JSC::CompleteSubspace::allocateNonVirtual+ 6337720 (JSC::VM&, unsigned long, JSC::GCDeferralContext*, JSC::AllocationFailureMode) + 216\r\n33  WebCore                       \t0x000000018bf89e3c std::__1::enable_if<std::is_same<WebCore::Event, WebCore::Event>::value, WebCore::JSDOMWrapperConverterTraits<WebCore::Event>::WrapperClass*>::type WebCore::createWrapper<WebCore::Event, WebCore::Event>+ 10735164 (WebCore::JSDOMGlobalObject*, WTF::Ref<WebCore::Event, WTF::DumbPtrTraits<WebCore::Event> >&&) + 216\r\n34  WebCore                       \t0x000000018bf88be0 WebCore::toJSNewlyCreated+ 10730464 (JSC::ExecState*, WebCore::JSDOMGlobalObject*, WTF::Ref<WebCore::Event, WTF::DumbPtrTraits<WebCore::Event> >&&) + 100\r\n35  WebCore                       \t0x000000018bf88444 WebCore::JSEventListener::handleEvent+ 10728516 (WebCore::ScriptExecutionContext&, WebCore::Event&) + 872\r\n36  WebCore                       \t0x000000018c1c4be0 WebCore::EventTarget::fireEventListeners+ 13073376 (WebCore::Event&, WTF::Vector<WTF::RefPtr<WebCore::RegisteredEventListener, WTF::DumbPtrTraits<WebCore::RegisteredEventListener> >, 1ul, WTF::CrashOnOverflow, 16ul, WTF::FastMalloc>) + 760\r\n37  WebCore                       \t0x000000018c1c0798 WebCore::EventTarget::fireEventListeners+ 13055896 (WebCore::Event&) + 596\r\n38  WebCore                       \t0x000000018c4f961c WebCore::DOMWindow::dispatchEvent+ 16434716 (WebCore::Event&, WebCore::EventTarget*) + 284\r\n39  WebCore                       \t0x000000018b63562c WebCore::DocumentEventQueue::pendingEventTimerFired+ 951852 () + 224\r\n40  WebCore                       \t0x000000018b55bff0 WebCore::ThreadTimers::sharedTimerFiredInternal+ 61424 () + 352\r\n41  WebCore                       \t0x000000018b55be7c WebCore::timerFired+ 61052 (__CFRunLoopTimer*, void*) + 28\r\n42  CoreFoundation                \t0x00000001833e3aa8 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 28\r\n43  CoreFoundation                \t0x00000001833e376c __CFRunLoopDoTimer + 864\r\n44  CoreFoundation                \t0x00000001833e3010 __CFRunLoopDoTimers + 248\r\n45  CoreFoundation                \t0x00000001833e0b60 __CFRunLoopRun + 2168\r\n46  CoreFoundation                \t0x0000000183300da8 CFRunLoopRunSpecific + 552\r\n47  WebCore                       \t0x000000018b58ddcc RunWebThread+ 265676 (void*) + 592\r\n48  libsystem_pthread.dylib       \t0x0000000183061220 _pthread_body + 272\r\n49  libsystem_pthread.dylib       \t0x0000000183061110 _pthread_body + 0\r\n50  libsystem_pthread.dylib       \t0x000000018305fb10 thread_start + 4"
    email: oliverhuang@kkbox.com
    modified: "2018-05-03T08:20:46.49204Z"
    number: "39671522"
    number_intvalue: 39671522
    originated: 24/03/2018
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK (WebKit)
    product_version: iPhone OS 11.3 (15E216)
    reproducible: rarely
    resolved: Duplicated
    status: Closed
    title: Crash in JavaScriptCore
