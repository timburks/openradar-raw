apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "36794914"
    labels:
        datastore_id: "4926614831890432"
data:
    classification: Crash/Hang/Data Loss
    created: "2018-01-23T22:46:24.43878Z"
    description: "Summary:\r\nWe started seeing hundreds of crashes in MPAVRoutingController that only seem to affect 11.2.x.\r\n\r\nSteps to Reproduce:\r\nUnclear\r\n\r\nExpected Results:\r\nOur app doesnâ€™t crash with `MPAVRoutingController` in the stack trace.\r\n\r\nActual Results:\r\nOur app crashes in `MPAVRoutingController`\r\n\r\nVersion:\r\n11.2\r\n\r\nNotes:\r\nCrash info:\r\n\r\nEXC_BAD_ACCESS KERN_INVALID_ADDRESS 0x0000000d4e23beb8\r\n\r\nCrashed: com.apple.main-thread\r\n0  libobjc.A.dylib                0x1823b0430 objc_msgSend + 16\r\n1  CoreFoundation                 0x18306d15c +[NSSet setWithArray:] + 48\r\n2  MediaPlayer                    0x193bb7238 __62-[MPAVRoutingController _pickableRoutesDidChangeNotification:]_block_invoke + 92\r\n3  MediaPlayer                    0x193bb4bc0 __67-[MPAVRoutingController fetchAvailableRoutesWithCompletionHandler:]_block_invoke_4 + 168\r\n4  libdispatch.dylib              0x182ad2a54 _dispatch_call_block_and_release + 24\r\n5  libdispatch.dylib              0x182ad2a14 _dispatch_client_callout + 16\r\n6  libdispatch.dylib              0x182adf698 _dispatch_main_queue_callback_4CF$VARIANT$mp + 1016\r\n7  CoreFoundation                 0x1830fe544 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 12\r\n8  CoreFoundation                 0x1830fc120 __CFRunLoopRun + 2012\r\n9  CoreFoundation                 0x18301be58 CFRunLoopRunSpecific + 436\r\n10 GraphicsServices               0x184ec8f84 GSEventRunModal + 100\r\n11 UIKit                          0x18c69b67c UIApplicationMain + 236\r\n12 Twitch                         0x100f5fe34 main (main.m:22)\r\n\r\ncom.apple.coremedia.routingcontext.xpc.notifications\r\n0  libsystem_kernel.dylib         0x182c47568 mach_msg_trap + 8\r\n1  libsystem_kernel.dylib         0x182c473e0 mach_msg + 72\r\n2  libdispatch.dylib              0x182aec068 _dispatch_mach_msg_send + 752\r\n3  libdispatch.dylib              0x182aeb6b8 _dispatch_mach_send_drain + 480\r\n4  libdispatch.dylib              0x182ae8448 _dispatch_mach_send_msg + 456\r\n5  libdispatch.dylib              0x182ae8728 _dispatch_mach_send_and_wait_for_reply + 284\r\n6  libdispatch.dylib              0x182ae8d3c dispatch_mach_send_with_result_and_wait_for_reply$VARIANT$mp + 56\r\n7  libxpc.dylib                   0x182db7d7c xpc_connection_send_message_with_reply_sync + 196\r\n8  CoreMedia                      0x186397f78 FigXPCRemoteClientSendSyncMessageCreatingReply + 36\r\n9  CoreMedia                      0x186315ba4 routingContextRemoteXPC_CopySelectedRouteDescriptors + 92\r\n10 AVFoundation                   0x188b54b18 -[AVFigRouteDescriptorFigRoutingContextOutputDeviceTranslator outputDevicesFromRoutingContext:] + 88\r\n11 MediaRemote                    0x18e8453e4 -[MRAVOutputContext _outputDevicesDidChangeNotification:] + 236\r\n12 CoreFoundation                 0x1830e833c __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 20\r\n13 CoreFoundation                 0x1830e78dc _CFXRegistrationPost + 420\r\n14 CoreFoundation                 0x1830e7640 ___CFXNotificationPost_block_invoke + 60\r\n15 CoreFoundation                 0x183165024 -[_CFXNotificationRegistrar find:object:observer:enumerator:] + 1408\r\n16 CoreFoundation                 0x18301df60 _CFXNotificationPost + 380\r\n17 Foundation                     0x183a4b348 -[NSNotificationCenter postNotificationName:object:userInfo:] + 68\r\n18 AVFoundation                   0x188b02be8 AVCMNotificationDispatcherCallback + 200\r\n19 CoreFoundation                 0x1830e833c __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 20\r\n20 CoreFoundation                 0x1830e78dc _CFXRegistrationPost + 420\r\n21 CoreFoundation                 0x1830e7640 ___CFXNotificationPost_block_invoke + 60\r\n22 CoreFoundation                 0x183165024 -[_CFXNotificationRegistrar find:object:observer:enumerator:] + 1408\r\n23 CoreFoundation                 0x18301df60 _CFXNotificationPost + 380\r\n24 CoreFoundation                 0x18304137c CFNotificationCenterPostNotification + 132\r\n25 CoreMedia                      0x1862927a0 CMNotificationCenterPostNotification + 124\r\n26 CoreMedia                      0x18639b0ec __figXPC_HandleNotificationMessage_block_invoke + 164\r\n27 libdispatch.dylib              0x182ad2a54 _dispatch_call_block_and_release + 24\r\n28 libdispatch.dylib              0x182ad2a14 _dispatch_client_callout + 16\r\n29 libdispatch.dylib              0x182adc96c _dispatch_queue_serial_drain$VARIANT$mp + 528\r\n30 libdispatch.dylib              0x182add2fc _dispatch_queue_invoke$VARIANT$mp + 340\r\n31 libdispatch.dylib              0x182addd20 _dispatch_root_queue_drain_deferred_wlh$VARIANT$mp + 404\r\n32 libdispatch.dylib              0x182ae603c _dispatch_workloop_worker_thread$VARIANT$mp + 644\r\n33 libsystem_pthread.dylib        0x182d7af1c _pthread_wqthread + 932\r\n34 libsystem_pthread.dylib        0x182d7ab6c start_wqthread + 4"
    email: javier.api@gmail.com
    modified: "2018-01-23T22:47:31.69979Z"
    number: "36794914"
    number_intvalue: 36794914
    originated: 23-Jan-2018 02:46 PM
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK
    product_version: "11.2"
    reproducible: Sometimes
    resolved: ""
    status: Open
    title: Crash in MPAVRoutingController introduced in iOS 11.2
