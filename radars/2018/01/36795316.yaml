apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "36795316"
    labels:
        datastore_id: "4940451874340864"
data:
    classification: Crash/Hang/Data Loss
    created: "2018-01-23T22:53:04.88259Z"
    description: "Summary:\r\nThis is one of the top crashers in our app. See attached crash log.\r\n\r\nSteps to Reproduce:\r\nUnclear, but our app makes heavy use of the AV frameworks.\r\n\r\nExpected Results:\r\nThe app doesnâ€™t crash.\r\n\r\nActual Results:\r\nThe app crashes.\r\n\r\nVersion:\r\n11.x\r\n\r\nNotes:\r\n\r\n#23. Crashed: MRAVConcreteRoutingDiscoverySession\r\n0  libobjc.A.dylib                0x1805197f4 objc_object::release() + 16\r\n1  libobjc.A.dylib                0x18051a138 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 836\r\n2  libdispatch.dylib              0x180c60f14 _dispatch_last_resort_autorelease_pool_pop + 36\r\n3  libdispatch.dylib              0x180c3d328 _dispatch_queue_invoke$VARIANT$mp + 384\r\n4  libdispatch.dylib              0x180c3dd20 _dispatch_root_queue_drain_deferred_wlh$VARIANT$mp + 404\r\n5  libdispatch.dylib              0x180c4603c _dispatch_workloop_worker_thread$VARIANT$mp + 644\r\n6  libsystem_pthread.dylib        0x180edaf1c _pthread_wqthread + 932\r\n7  libsystem_pthread.dylib        0x180edab6c start_wqthread + 4\r\n\r\n--\r\n\r\n#0. <AVCMNotificationDispatcher: 0x1c045e000> serial queue\r\n0  libobjc.A.dylib                0x180510448 objc_msgSend + 40\r\n1  CoreFoundation                 0x181185ca8 -[__NSDictionaryM objectForKey:] + 212\r\n2  AVFoundation                   0x186c62f9c __111-[AVCMNotificationDispatcher _copyAndRemoveListenerAndCallbackForWeakReferenceToListener:callback:name:object:]_block_invoke + 96\r\n3  libdispatch.dylib              0x180c32a14 _dispatch_client_callout + 16\r\n4  libdispatch.dylib              0x180c3b618 _dispatch_queue_barrier_sync_invoke_and_complete + 56\r\n5  AVFoundation                   0x186c62f14 -[AVCMNotificationDispatcher _copyAndRemoveListenerAndCallbackForWeakReferenceToListener:callback:name:object:] + 144\r\n6  AVFoundation                   0x186c62c38 -[AVCMNotificationDispatcher removeListenerWithWeakReference:callback:name:object:] + 44\r\n7  AVFoundation                   0x186c3cda4 -[AVFigRouteDescriptorOutputDeviceImpl dealloc] + 140\r\n8  AVFoundation                   0x186c3a1a0 -[AVOutputDevice dealloc] + 236\r\n9  MediaRemote                    0x18ca51d54 -[MRAVConcreteOutputDevice dealloc] + 48\r\n10 CoreFoundation                 0x18124f8b8 -[__NSSingleObjectArrayI dealloc] + 44\r\n11 MediaRemote                    0x18ca4f4dc -[MRAVLocalEndpoint setOutputDevices:] + 88\r\n12 MediaRemote                    0x18ca4f91c -[MRAVLocalEndpoint _reloadOutputDevicesFromContext] + 220\r\n13 CoreFoundation                 0x18124833c __CFNOTIFICATIONCENTER_IS_CALLING_OUT_TO_AN_OBSERVER__ + 20\r\n14 CoreFoundation                 0x1812478dc _CFXRegistrationPost + 420\r\n15 CoreFoundation                 0x181247640 ___CFXNotificationPost_block_invoke + 60\r\n16 CoreFoundation                 0x1812c5024 -[_CFXNotificationRegistrar find:object:observer:enumerator:] + 1408\r\n17 CoreFoundation                 0x18117df60 _CFXNotificationPost + 380\r\n18 Foundation                     0x181bab348 -[NSNotificationCenter postNotificationName:object:userInfo:] + 68\r\n19 MediaRemote                    0x18ca7990c __38-[MRAVOutputContext setOutputDevices:]_block_invoke_2 + 188\r\n20 libdispatch.dylib              0x180c32a54 _dispatch_call_block_and_release + 24\r\n21 libdispatch.dylib              0x180c32a14 _dispatch_client_callout + 16\r\n22 libdispatch.dylib              0x180c3f698 _dispatch_main_queue_callback_4CF$VARIANT$mp + 1016\r\n23 CoreFoundation                 0x18125e544 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 12\r\n24 CoreFoundation                 0x18125c120 __CFRunLoopRun + 2012\r\n25 CoreFoundation                 0x18117be58 CFRunLoopRunSpecific + 436\r\n26 GraphicsServices               0x183028f84 GSEventRunModal + 100\r\n27 UIKit                          0x18a8d067c UIApplicationMain + 236\r\n28 Twitch                         0x104b415f8 main (main.m:22)\r\n29 libdyld.dylib                  0x180c9856c start + 4\r\n\r\n#1. Thread\r\n0  libsystem_kernel.dylib         0x180dc80f0 __psynch_cvwait + 8\r\n1  libsystem_pthread.dylib        0x180edece4 _pthread_cond_wait$VARIANT$mp + 640\r\n2  libc++.1.dylib                 0x18047fea4 std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 24\r\n3  JavaScriptCore                 0x18861ff2c void std::__1::condition_variable_any::wait<std::__1::unique_lock<bmalloc::Mutex> >(std::__1::unique_lock<bmalloc::Mutex>&) + 96\r\n4  JavaScriptCore                 0x18861fe54 bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>::threadRunLoop() + 172\r\n5  JavaScriptCore                 0x1886201b8 void* std::__1::__thread_proxy<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct> >, void (*)(bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>*), bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>*> >(void*) + 44\r\n6  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n7  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n8  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#2. WebThread\r\n0  libsystem_kernel.dylib         0x180da7568 mach_msg_trap + 8\r\n1  libsystem_kernel.dylib         0x180da73e0 mach_msg + 72\r\n2  CoreFoundation                 0x18125e308 __CFRunLoopServiceMachPort + 196\r\n3  CoreFoundation                 0x18125bed4 __CFRunLoopRun + 1424\r\n4  CoreFoundation                 0x18117be58 CFRunLoopRunSpecific + 436\r\n5  WebCore                        0x1890eca34 RunWebThread(void*) + 560\r\n6  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n7  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n8  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#3. com.apple.uikit.eventfetch-thread\r\n0  libsystem_kernel.dylib         0x180da7568 mach_msg_trap + 8\r\n1  libsystem_kernel.dylib         0x180da73e0 mach_msg + 72\r\n2  CoreFoundation                 0x18125e308 __CFRunLoopServiceMachPort + 196\r\n3  CoreFoundation                 0x18125bed4 __CFRunLoopRun + 1424\r\n4  CoreFoundation                 0x18117be58 CFRunLoopRunSpecific + 436\r\n5  Foundation                     0x181bb1594 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 304\r\n6  Foundation                     0x181bd09ac -[NSRunLoop(NSRunLoop) runUntilDate:] + 96\r\n7  UIKit                          0x18b43a7b8 -[UIEventFetcher threadMain] + 136\r\n8  Foundation                     0x181cb30f4 __NSThread__start__ + 996\r\n9  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n10 libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n11 libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#4. com.twitter.crashlytics.ios.MachExceptionServer\r\n0  Twitch                         0x104f7c2ec CLSProcessRecordAllThreads + 1572\r\n1  Twitch                         0x104f7c2ec CLSProcessRecordAllThreads + 1572\r\n2  Twitch                         0x104f7c1a8 CLSProcessRecordAllThreads + 1248\r\n3  Twitch                         0x104f6bee8 CLSHandler + 48\r\n4  Twitch                         0x104f66efc CLSMachExceptionServer + 424\r\n5  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n6  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n7  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#7. com.apple.NSURLConnectionLoader\r\n0  libsystem_kernel.dylib         0x180da7568 mach_msg_trap + 8\r\n1  libsystem_kernel.dylib         0x180da73e0 mach_msg + 72\r\n2  CoreFoundation                 0x18125e308 __CFRunLoopServiceMachPort + 196\r\n3  CoreFoundation                 0x18125bed4 __CFRunLoopRun + 1424\r\n4  CoreFoundation                 0x18117be58 CFRunLoopRunSpecific + 436\r\n5  CFNetwork                      0x181a6b128 -[__CoreSchedulingSetRunnable runForever] + 780\r\n6  Foundation                     0x181cb30f4 __NSThread__start__ + 996\r\n7  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n8  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n9  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#11. com.apple.CFSocket.private\r\n0  libsystem_kernel.dylib         0x180dc8534 __select + 8\r\n1  CoreFoundation                 0x181266840 __CFSocketManager + 644\r\n2  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n3  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n4  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#12. AVAudioSession Notify Thread\r\n0  libsystem_kernel.dylib         0x180da7568 mach_msg_trap + 8\r\n1  libsystem_kernel.dylib         0x180da73e0 mach_msg + 72\r\n2  CoreFoundation                 0x18125e308 __CFRunLoopServiceMachPort + 196\r\n3  CoreFoundation                 0x18125bed4 __CFRunLoopRun + 1424\r\n4  CoreFoundation                 0x18117be58 CFRunLoopRunSpecific + 436\r\n5  AVFAudio                       0x186ae1dc4 GenericRunLoopThread::Entry(void*) + 164\r\n6  AVFAudio                       0x186b0c830 CAPThread::Entry(CAPThread*) + 84\r\n7  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n8  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n9  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#20. Thread\r\n0  libsystem_pthread.dylib        0x180edab68 start_wqthread + 122\r\n\r\n#21. Thread\r\n0  libsystem_kernel.dylib         0x180dc8d80 __workq_kernreturn + 8\r\n1  libsystem_pthread.dylib        0x180edaeec _pthread_wqthread + 884\r\n2  libsystem_pthread.dylib        0x180edab6c start_wqthread + 4\r\n\r\n#22. com.apple.root.default-qos\r\n0  libsystem_kernel.dylib         0x180dc97c4 kevent_id + 8\r\n1  libdispatch.dylib              0x180c4e498 _dispatch_kq_poll + 208\r\n2  libdispatch.dylib              0x180c4ee88 _dispatch_event_loop_wait_for_ownership$VARIANT$mp + 432\r\n3  libdispatch.dylib              0x180c40b44 _dispatch_sync_wait + 416\r\n4  MediaRemote                    0x18cb4f644 -[MRAVConcreteRoutingDiscoverySession availableOutputDevices] + 136\r\n5  MediaRemote                    0x18caef494 MRAVRoutingDiscoverySessionCopyAvailableOutputDevices + 40\r\n6  MediaPlayer                    0x19200d9f0 __73-[MPAVOutputDeviceRoutingDataSource getRoutesForCategory:withCompletion:]_block_invoke + 76\r\n7  libdispatch.dylib              0x180c32a54 _dispatch_call_block_and_release + 24\r\n8  libdispatch.dylib              0x180c32a14 _dispatch_client_callout + 16\r\n9  libdispatch.dylib              0x180c39bc8 _dispatch_queue_override_invoke$VARIANT$mp + 716\r\n10 libdispatch.dylib              0x180c3fcf4 _dispatch_root_queue_drain + 600\r\n11 libdispatch.dylib              0x180c3fa38 _dispatch_worker_thread3 + 120\r\n12 libsystem_pthread.dylib        0x180edb06c _pthread_wqthread + 1268\r\n13 libsystem_pthread.dylib        0x180edab6c start_wqthread + 4\r\n\r\n#23. Crashed: MRAVConcreteRoutingDiscoverySession\r\n0  libobjc.A.dylib                0x1805197f4 objc_object::release() + 16\r\n1  libobjc.A.dylib                0x18051a138 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 836\r\n2  libdispatch.dylib              0x180c60f14 _dispatch_last_resort_autorelease_pool_pop + 36\r\n3  libdispatch.dylib              0x180c3d328 _dispatch_queue_invoke$VARIANT$mp + 384\r\n4  libdispatch.dylib              0x180c3dd20 _dispatch_root_queue_drain_deferred_wlh$VARIANT$mp + 404\r\n5  libdispatch.dylib              0x180c4603c _dispatch_workloop_worker_thread$VARIANT$mp + 644\r\n6  libsystem_pthread.dylib        0x180edaf1c _pthread_wqthread + 932\r\n7  libsystem_pthread.dylib        0x180edab6c start_wqthread + 4\r\n\r\n#24. Thread\r\n0  libsystem_kernel.dylib         0x180da75bc semaphore_timedwait_trap + 8\r\n1  libdispatch.dylib              0x180c35000 _dispatch_sema4_timedwait$VARIANT$mp + 84\r\n2  libdispatch.dylib              0x180c35870 _dispatch_semaphore_wait_slow + 72\r\n3  libdispatch.dylib              0x180c411d8 _dispatch_worker_thread + 256\r\n4  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n5  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n6  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#27. Thread\r\n0  libsystem_kernel.dylib         0x180da75bc semaphore_timedwait_trap + 8\r\n1  libdispatch.dylib              0x180c35000 _dispatch_sema4_timedwait$VARIANT$mp + 84\r\n2  libdispatch.dylib              0x180c35870 _dispatch_semaphore_wait_slow + 72\r\n3  libdispatch.dylib              0x180c411d8 _dispatch_worker_thread + 256\r\n4  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n5  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n6  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#28. WTF::AutomaticThread\r\n0  libsystem_kernel.dylib         0x180dc80f0 __psynch_cvwait + 8\r\n1  libsystem_pthread.dylib        0x180edece4 _pthread_cond_wait$VARIANT$mp + 640\r\n2  JavaScriptCore                 0x187c85340 WTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 148\r\n3  JavaScriptCore                 0x18860533c WTF::ParkingLot::parkConditionallyImpl(void const*, WTF::ScopedLambda<bool ()> const&, WTF::ScopedLambda<void ()> const&, WTF::TimeWithDynamicClockType const&) + 2256\r\n4  JavaScriptCore                 0x188170170 bool WTF::ConditionBase::waitUntil<WTF::Lock>(WTF::Lock&, WTF::TimeWithDynamicClockType const&) + 172\r\n5  JavaScriptCore                 0x1885f127c WTF::Function<void ()>::CallableWrapper<WTF::AutomaticThread::start(WTF::AbstractLocker const&)::$_0>::call() + 204\r\n6  JavaScriptCore                 0x187c8170c WTF::threadEntryPoint(void*) + 120\r\n7  JavaScriptCore                 0x187c8164c WTF::wtfThreadEntryPoint(void*) + 84\r\n8  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n9  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n10 libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#29. Thread\r\n0  libsystem_kernel.dylib         0x180da75bc semaphore_timedwait_trap + 8\r\n1  libdispatch.dylib              0x180c35000 _dispatch_sema4_timedwait$VARIANT$mp + 84\r\n2  libdispatch.dylib              0x180c35870 _dispatch_semaphore_wait_slow + 72\r\n3  libdispatch.dylib              0x180c411d8 _dispatch_worker_thread + 256\r\n4  libsystem_pthread.dylib        0x180edc2b4 _pthread_body + 308\r\n5  libsystem_pthread.dylib        0x180edc180 _pthread_body + 310\r\n6  libsystem_pthread.dylib        0x180edab74 thread_start + 4\r\n\r\n#30. Thread\r\n0  libsystem_pthread.dylib        0x180edab68 start_wqthread + 122\r\n\r\n#31. Thread\r\n0  libsystem_pthread.dylib        0x180edab68 start_wqthread + 122\r\n\r\n#32. Thread\r\n0  libsystem_pthread.dylib        0x180edab68 start_wqthread + 122\r\n\r\n#33. Thread\r\n0  libsystem_kernel.dylib         0x180dc8d80 __workq_kernreturn + 8\r\n1  libsystem_pthread.dylib        0x180edb080 _pthread_wqthread + 1288\r\n2  libsystem_pthread.dylib        0x180edab6c start_wqthread + 4\r\n\r\n#34. Thread\r\n0  libsystem_kernel.dylib         0x180dc8d80 __workq_kernreturn + 8\r\n1  libsystem_pthread.dylib        0x180edaeec _pthread_wqthread + 884\r\n2  libsystem_pthread.dylib        0x180edab6c start_wqthread + 4"
    email: javier.api@gmail.com
    modified: "2018-01-23T22:54:53.53403Z"
    number: "36795316"
    number_intvalue: 36795316
    originated: 23-Jan-2018 02:53 PM
    parent_number: '&{NULL_VALUE}'
    product: iOS + SDK
    product_version: 11.x
    reproducible: Sometimes
    resolved: ""
    status: Open
    title: Thousands of crashes in MRAVConcreteRoutingDiscoverySession introduced in iOS 11
