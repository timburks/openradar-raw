apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "20482382"
    labels:
        datastore_id: "5899127044964352"
data:
    classification: Other Bug
    created: "2015-04-09T14:38:05.459066Z"
    description: "Summary:\r\n\r\nAs part of my testing with the release version of 10.10.3, I noticed that the following command was not creating an AD mobile user:\r\n\r\n-------\r\n\r\nsudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -n username_goes_here\r\n\r\n-------\r\n\r\nInstead, I was receiving an error indicating that the mobile account could not be created.\r\n\r\nSteps to Reproduce:\r\n\r\n1. Open Terminal\r\n2. Run the following command with root privileges:\r\n\r\n/System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -n username_goes_here\r\n\r\nExpected Results:\r\n\r\nA new mobile account and home folder be set up on the machine for the \"username_goes_here\" AD account.\r\n\r\nActual Results:\r\n\r\nI received an error indicating that the mobile account could not be created. Error message attached as file named \"error_output.txt\"\r\n\r\ncomputername:~ username$ sudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -n username_goes_here\r\ncreatemobileaccount built Mar  4 2015 21:45:09\r\n2015-04-09 09:22:13.922 createmobileaccount[69912:277627] ### syncProxyWithSemaphore error:Error Domain=NSCocoaErrorDomain Code=4097 \"Couldn’t communicate with a helper application.\" (connection to service named com.apple.systemadministration.writeconfig) UserInfo=0x7f89a9c162b0 {NSDebugDescription=connection to service named com.apple.systemadministration.writeconfig}\r\n2015-04-09 09:22:13.982 createmobileaccount[69912:277616] MCXCCacheMCXRecordAndGraph(): vproc_swap_integer(NULL, VPROC_GSK_PERUSER_SUSPEND, &(uid=699453718), NULL) failed\r\n2015-04-09 09:22:14.433 createmobileaccount[69912:277616] MCXCCacheMCXRecordAndGraph(): vproc_swap_integer(NULL, VPROC_GSK_PERUSER_RESUME, &(uid=699453718), NULL) failed\r\n2015-04-09 09:22:14.542 createmobileaccount[69912:277643] ### syncProxyWithSemaphore error:Error Domain=NSCocoaErrorDomain Code=4097 \"Couldn’t communicate with a helper application.\" (connection to service named com.apple.systemadministration.writeconfig) UserInfo=0x7f89a9d0e980 {NSDebugDescription=connection to service named com.apple.systemadministration.writeconfig}\r\n2015-04-09 09:22:14.542 createmobileaccount[69912:277616] MCXCCreateMobileAccount(): Failed to create account. Error = -6304 (mobile account file path is either not a directory or could not be properly created). Cleaning up mobile account record.\r\n2015-04-09 09:22:14.546 createmobileaccount[69912:277643] ### syncProxyWithSemaphore error:Error Domain=NSCocoaErrorDomain Code=4097 \"Couldn’t communicate with a helper application.\" (connection to service named com.apple.systemadministration.writeconfig) UserInfo=0x7f89a9d5a840 {NSDebugDescription=connection to service named com.apple.systemadministration.writeconfig}\r\n2015-04-09 09:22:14.549 createmobileaccount[69912:277616] MCXCDeleteAccount(): vproc_swap_integer(NULL, VPROC_GSK_PERUSER_SUSPEND, &(uid=699453718), NULL) failed\r\n2015-04-09 09:22:14.550 createmobileaccount[69912:277620] ### syncProxyWithSemaphore error:Error Domain=NSCocoaErrorDomain Code=4097 \"Couldn’t communicate with a helper application.\" (connection to service named com.apple.systemadministration.writeconfig) UserInfo=0x7f89a9c392c0 {NSDebugDescription=connection to service named com.apple.systemadministration.writeconfig}\r\n2015-04-09 09:22:14.578 createmobileaccount[69912:277643] ### syncProxyWithSemaphore error:Error Domain=NSCocoaErrorDomain Code=4097 \"Couldn’t communicate with a helper application.\" (connection to service named com.apple.systemadministration.writeconfig) UserInfo=0x7f89ac101990 {NSDebugDescription=connection to service named com.apple.systemadministration.writeconfig}\r\n2015-04-09 09:22:14.578 createmobileaccount[69912:277616] MCXCDeleteAccount(): vproc_swap_integer(NULL, VPROC_GSK_PERUSER_RESUME, &(uid=699453718), NULL)failed\r\n*** mobile account could not be created: -6304 (MCXCCreateMobileAccount(): [newUser createHomeDirectory] failed)\r\ncomputername:~ username$\r\n\r\n\r\nRegression:\r\n\r\nRetested in a VMware VM running OS X 10.10.2 build 14C1514. Error did not occur:\r\n\r\n------\r\n\r\ncomputername:~ username$ sudo /System/Library/CoreServices/ManagedClient.app/Contents/Resources/createmobileaccount -n username_goes_here\r\ncreatemobileaccount built Nov 16 2014 15:10:36\r\n2015-04-09 10:28:29.316 createmobileaccount[968:5545] MCXCCacheMCXRecordAndGraph(): vproc_swap_integer(NULL, VPROC_GSK_PERUSER_SUSPEND, &(uid=699453718), NULL) failed\r\n2015-04-09 10:28:29.809 createmobileaccount[968:5545] MCXCCacheMCXRecordAndGraph(): vproc_swap_integer(NULL, VPROC_GSK_PERUSER_RESUME, &(uid=699453718), NULL) failed\r\ncomputername:~ username$\r\n\r\n------\r\n\r\nNotes:"
    email: rtrouton@gmail.com
    modified: "2015-04-10T18:20:35.512723Z"
    number: "20482382"
    number_intvalue: 20482382
    originated: 09-Apr-2015 10:37 AM
    parent_number: '&{NULL_VALUE}'
    product: OS X
    product_version: Mac OS X 10.10.3 (14D131)
    reproducible: Always
    resolved: ""
    status: Closed (Duplicate)
    title: Unable to create AD mobile accounts from the command line on OS X 10.10.3
