apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "20468156"
    labels:
        datastore_id: "5495584802734080"
data:
    classification: Serious Bug
    created: "2015-04-08T17:53:24.678383Z"
    description: "Summary:\r\nSubmitting an iOS/Apple Watch app combined bundle using the Application Loader returns errors about invalid code signing entitlements on binaries which don't match the findings from the Xcode Organizer's \"Validate\" feature. Additionally, binaries which cannot be submitted through the Application Loader (due to the entitlements errors) can be submitted successfully via the Xcode Organizer's \"Submit\" feature.\r\n\r\nSteps to Reproduce: \r\n1. Add a WatchKit app to an iOS app project \r\n2. Create an App Group for the WatchKit extension and iOS app to use for sharing data \r\n3. Add the App Group to the App ID for both the WatchKit extension and iOS app \r\n4. Add the com.apple.security.application-groups entitlement to both the WatchKit extension and iOS app \r\n5. Create app store distribution provisioning profiles for each of the iOS app, WatchKit extension and Watch app \r\n6. Create a Release build on a build server\r\n\r\nExpected Results:\r\nAny errors or warnings produced by the Application Loader app will match the output of the Xcode Organizer's \"Validate\" and \"Submit\" functions.\r\n\r\nActual Results:\r\nThe entitlements errors produced by the Application Loader app do not appear in the output of the Xcode Organizer's \"Validate\" and \"Submit\" functions. \r\n\r\nBelow are the error messages produced by the Application Loader: \r\n\r\nERROR ITMS-90075: \"This bundle is invalid. The application-identifier entitlement is missing; it should contain your 10-character Apple Developer ID, followed by a dot, followed by your bundle identifier.\" \r\nERROR ITMS-90164: \"Invalid Code Signing Entitlements. The entitlements in your app bundle signature do not match the ones that are contained in the provisioning profile. According to the provisioning profile, the bundle contains a key value that is not allowed: '[ \"org.kp.consumer.everybodywalk.watchapp\" ]' for the key 'keychain-access-groups' in 'Payload/EveryBodyWalk.app/PlugIns/EveryBodyWalk WatchKit Extension.appex/EveryBodyWalk Watch App.app/EveryBodyWalk Watch App'\" \r\nERROR ITMS-90164: \"Invalid Code Signing Entitlements. The entitlements in your app bundle signature do not match the ones that are contained in the provisioning profile. According to the provisioning profile, the bundle contains a key value that is not allowed: 'org.kp.consumer.everybodywalk.watchapp' for the key 'application-identifier' in 'Payload/EveryBodyWalk.app/PlugIns/EveryBodyWalk WatchKit Extension.appex/EveryBodyWalk Watch App.app/EveryBodyWalk Watch App'\" \r\nERROR ITMS-90046: \"Invalid Code Signing Entitlements. Your application bundle's signature contains code signing entitlements that are not supported on iOS. Specifically, value 'org.kp.consumer.everybodywalk.watchapp' for key 'application-identifier' in 'Payload/EveryBodyWalk.app/PlugIns/EveryBodyWalk WatchKit Extension.appex/EveryBodyWalk Watch App.app/EveryBodyWalk Watch App' is not supported. This value should be a string starting with your TEAMID, followed by a dot '.', followed by the bundle identifier.\" \r\n\r\nVersion: \r\nXcode 6.2 (6C131e) \r\nOS X 10.10.2 (14C1514) \r\n\r\nNotes: \r\n\r\nAttempting to provide custom entitlements to the watch app by manually editing the project.pbxproj file and adding a CODE_SIGN_ENTITLEMENTS entry to the watch app target (since there is no UI for this as yet) simply shifts the above error messages around. While initially, Application Loader was complaining about the watch app's application-identifier entitlement not containing the TEAMID, specifying one with this value included generates an error that this application-identifier doesn't match the one in the provisioning profile. This is incorrect and again, only the Application Loader complains about this. \r\n\r\nConfiguration: \r\nMacBook Pro (Retina, 15-inch, Late 2013)\r\nOS X 10.10.2 (14C1514)\r\n\r\n----------\r\n\r\nUpdate 2015-04-22\r\n\r\nApplication Loader 3.1 (670) included with Xcode 6.3.1 (6D1002) still has this issue. We just tried submitting an update to our app containing a watch app and got the first two errors again.\r\n\r\nERROR ITMS-90075: \"This bundle is invalid. The application-identifier entitlement is missing; it should contain your 10-character Apple Developer ID, followed by a dot, followed by your bundle identifier.\"\r\nERROR ITMS-90164: \"Invalid Code Signing Entitlements. The entitlements in your app bundle signature do not match the ones that are contained in the provisioning profile. According to the provisioning profile, the bundle contains a key value that is not allowed: 'NP763NDP24.org.kp.consumer.everybodywalk.watchapp' for the key 'application-identifier' in 'Payload/EveryBodyWalk.app/PlugIns/EveryBodyWalk WatchKit Extension.appex/EveryBodyWalk Watch App.app/EveryBodyWalk Watch App'\"\r\n\r\nAgain, loading the .xcarchive into the Xcode Organizer and using both \"Validate\" and \"Submit to App Store\" worked flawlessly with none of these errors."
    email: benchatelain@gmail.com
    modified: "2015-04-22T17:26:17.83064Z"
    number: "20468156"
    number_intvalue: 20468156
    originated: "2015-04-07"
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: Application Loader 3.0 (670)
    reproducible: Always
    resolved: ""
    status: Open
    title: Application Loader generates entitlements errors when uploading an iOS app containing an embedded Apple Watch app
