apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "20423016"
    labels:
        datastore_id: "5065332158889984"
data:
    classification: ""
    created: "2015-04-06T20:46:42.961411Z"
    description: "Our top reported crash at the moment is due to a background crash that appears to be caused by UINavigationBar attempting to create a GL surface while it is in the background. In the latest release, this issue has had an alarming number of instances, so we've started looking into the issue more. It is currently believed to only be an issue that impacts 32-bit devices running iOS 8.\r\n\r\nWe've found a post on the apple dev forums that we believe describes other users hitting this same issue:\r\nhttps://devforums.apple.com/thread/246744?tstart=0\r\n\r\nSteps to Reproduce: (Closest guess to the repro)\r\n1. Have the app backgrounded\r\n2. The app requires \"background fetch\" capability\r\n3. The app gets restored by iOS at background fetch time\r\n4. On launch, the app attempts to load the default UI, which contains a UINavigationBar\r\n\r\nExpected Results:\r\nThe app shouldn't crash when being launched in the background.\r\n\r\nActual Results:\r\nThe app crashes with gpus_ReturnNotPermittedKillClient.\r\n\r\nVersion:\r\niOS 8.x\r\n\r\nConfiguration:\r\n32-bit iOS devices\r\n\r\nStack:\r\nThread : Crashed: com.apple.main-thread\r\n0  libGPUSupportMercury.dylib     0x2b6448fe gpus_ReturnNotPermittedKillClient\r\n1  libGPUSupportMercury.dylib     0x2b6453cb gpusSubmitDataBuffers\r\n2  libGPUSupportMercury.dylib     0x2b645249 gldCreateContext\r\n3  GLEngine                       0x2709391b gliCreateContextWithShared\r\n4  OpenGLES                       0x2716fab3 -[EAGLContext initWithAPI:properties:] + 406\r\n5  CoreImage                      0x24d7da8b ___ZN2CI11can_use_gpuEv_block_invoke + 142\r\n6  libdispatch.dylib              0x32b3d2cf _dispatch_client_callout + 22\r\n7  libdispatch.dylib              0x32b3df13 dispatch_once_f + 62\r\n8  CoreImage                      0x24d7d9fb CI::can_use_gpu() + 98\r\n9  CoreImage                      0x24cfbb79 +[CIContext contextWithOptions:] + 188\r\n10 CoreUI                         0x2a55760f CreateSharedCIContext + 78\r\n11 libsystem_pthread.dylib        0x32ca6d5f __pthread_once_handler + 50\r\n12 libsystem_platform.dylib       0x32c9f867 _os_once + 42\r\n13 libsystem_pthread.dylib        0x32ca4f1b pthread_once + 50\r\n14 CoreUI                         0x2a5575b1 +[CUIShapeEffectStack sharedCIContext] + 28\r\n15 CoreUI                         0x2a55e9c7 -[CUICatalog imageByStylingImage:stylePresetName:styleConfiguration:foregroundColor:scale:] + 82\r\n16 UIKit                          0x27ed8bcb -[UIImage _imageWithStylePresets:withTintColor:] + 542\r\n17 UIKit                          0x27c66665 -[UIImageView _setImageViewContents:] + 1076\r\n18 UIKit                          0x27c65da5 +[UIView(Animation) performWithoutAnimation:] + 72\r\n19 UIKit                          0x27f58efd -[UIImageView _updateImageViewForOldImage:newImage:] + 676\r\n20 UIKit                          0x27c657b7 -[UIImageView setImage:] + 266\r\n21 UIKit                          0x27cffd85 -[UINavigationBar _updateBackIndicatorImage] + 348\r\n22 UIKit                          0x27ce3ccb -[UINavigationBar layoutSubviews] + 2514\r\n23 App                            0x0039901f\r\n24 UIKit                          0x27c567ff -[UIView(CALayerDelegate) layoutSublayersOfLayer:] + 514\r\n25 QuartzCore                     0x2767c835 -[CALayer layoutSublayers] + 136\r\n26 QuartzCore                     0x2767820d CA::Layer::layout_if_needed(CA::Transaction*) + 360\r\n27 UIKit                          0x27c68f77 -[UIView(Hierarchy) layoutBelowIfNeeded] + 138\r\n28 UIKit                          0x27c65da5 +[UIView(Animation) performWithoutAnimation:] + 72\r\n29 UIKit                          0x27ce2b2d -[UINavigationController _positionNavigationBarHidden:edge:initialOffset:] + 788\r\n30 UIKit                          0x27ce27cb -[UINavigationController _positionNavigationBarHidden:edge:] + 202\r\n31 UIKit                          0x27ce1f49 -[UINavigationController setNavigationBar:] + 800\r\n32 UIKit                          0x27f4aacb -[UINavigationController _navigationBarHiddenByDefault:] + 142\r\n33 App                            0x00399e5d\r\n34 App                            0x00399adf\r\n35 App                            0x005adf77\r\n36 App                            0x005da203\r\n37 App                            0x000f7577\r\n38 App                            0x0071f38b\r\n39 App                            0x000f690b\r\n40 App                            0x007203a9\r\n41 App                            0x0071f039\r\n42 UIKit                          0x27c6eb1f -[UIViewController _setViewAppearState:isAnimating:] + 438\r\n43 CoreFoundation                 0x2466846d __53-[__NSArrayI enumerateObjectsWithOptions:usingBlock:]_block_invoke + 48\r\n44 CoreFoundation                 0x246614c3 -[__NSArrayI enumerateObjectsWithOptions:usingBlock:] + 234\r\n45 UIKit                          0x27c6ec9b -[UIViewController _setViewAppearState:isAnimating:] + 818\r\n46 CoreFoundation                 0x2466846d __53-[__NSArrayI enumerateObjectsWithOptions:usingBlock:]_block_invoke + 48\r\n47 CoreFoundation                 0x246614c3 -[__NSArrayI enumerateObjectsWithOptions:usingBlock:] + 234\r\n48 UIKit                          0x27c6ec9b -[UIViewController _setViewAppearState:isAnimating:] + 818\r\n49 App                            0x006ff9ef\r\n50 App                            0x006fea41\r\n51 App                            0x006ff0f3\r\n52 App                            0x0097d94d\r\n53 App                            0x0097d759\r\n54 libdispatch.dylib              0x32b3d2e3 _dispatch_call_block_and_release + 10\r\n55 libdispatch.dylib              0x32b3d2cf _dispatch_client_callout + 22\r\n56 libdispatch.dylib              0x32b40d2f _dispatch_main_queue_callback_4CF + 1330\r\n57 CoreFoundation                 0x24702619 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 8\r\n58 CoreFoundation                 0x24700d19 __CFRunLoopRun + 1512\r\n59 CoreFoundation                 0x2464e3b1 CFRunLoopRunSpecific + 476\r\n60 CoreFoundation                 0x2464e1c3 CFRunLoopRunInMode + 106\r\n61 GraphicsServices               0x2bc7b201 GSEventRunModal + 136\r\n62 UIKit                          0x27cb843d UIApplicationMain + 1440\r\n63 App                            0x000ecd4b"
    email: JSM_2001@hotmail.com
    modified: "2015-04-06T20:48:09.81592Z"
    number: "20423016"
    number_intvalue: 20423016
    originated: 03-Apr-2015 05:18 PM
    parent_number: '&{NULL_VALUE}'
    product: ""
    product_version: ""
    reproducible: ""
    resolved: ""
    status: Open
    title: iOS 8.x SDK App crashes on background task app start in -[UINavigationBar layoutSubviews] by gpus_ReturnNotPermittedKillClient
