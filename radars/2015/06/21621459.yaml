apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "21621459"
    labels:
        datastore_id: "5151368675328000"
data:
    classification: ""
    created: "2015-06-30T23:00:30.28379Z"
    description: "Andr√© Neves30-Jun-2015 11:57 PM\r\n\r\n\r\nSummary:\r\nWhen attempting to set `NSOperationQueue.maxConcurrentOperationCount` to `NSOperationQueueDefaultMaxConcurrentOperationCount` the build fails due to the compiler crashing with a segmentation fault.\r\n\r\nThe issue is always reproducible and I've attached the build log transcript\r\n\r\nSteps to Reproduce:\r\nCompile the given example source file\r\n\r\nExpected Results:\r\nThe file should compile successfully\r\n\r\nActual Results:\r\nThe file fails to compile\r\n\r\nVersion:\r\nVersion 7.0 beta (7A121l)\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\nHappens in Xcode7b2, Swift2\r\n\r\nAttachments:\r\n\r\nCompileSwiftCrash.swift:\r\n\r\nimport Foundation\r\n\r\nstruct CompileSwiftCrash {\r\n    \r\n    let queue : NSOperationQueue = {\r\n        let operationQueue = NSOperationQueue()\r\n        operationQueue.maxConcurrentOperationCount = NSOperationQueueDefaultMaxConcurrentOperationCount\r\n        \r\n        return operationQueue\r\n        }()\r\n}\r\n\r\nCompileSwiftCrash-Command_failed_due_to_signal-Segmentation_fault_11.txt\r\n\r\n\r\nBuild target CompileSwiftCrash of project CompileSwiftCrash with configuration Debug\r\n\r\nCompileSwiftSources normal x86_64 com.apple.xcode.tools.swift.compiler\r\n    cd /Users/apneves/Desktop/CompileSwiftCrash\r\n    export PATH=\"/Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode-beta.app/Contents/Developer/usr/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\"\r\n    /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swiftc -incremental -module-name CompileSwiftCrash -Onone -sdk /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.0.sdk -target x86_64-apple-ios9.0 -g -module-cache-path /Users/apneves/Library/Developer/Xcode/DerivedData/ModuleCache -Xfrontend -serialize-debugging-options -enable-testing -I /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator -F /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator -c -j2 /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/CompileSwiftCrash.swift /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/ViewController.swift /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/AppDelegate.swift -output-file-map /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash-OutputFileMap.json -parseable-output -serialize-diagnostics -emit-dependencies -emit-module -emit-module-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.swiftmodule -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/swift-overrides.hmap -Xcc -iquote -Xcc /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-generated-files.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-own-target-headers.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-all-target-headers.hmap -Xcc -iquote -Xcc /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-project-headers.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator/include -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/DerivedSources/x86_64 -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/DerivedSources -Xcc -DDEBUG=1 -emit-objc-header -emit-objc-header-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash-Swift.h -Xcc -working-directory/Users/apneves/Desktop/CompileSwiftCrash\r\n\r\n<unknown>:0: error: unable to execute command: Segmentation fault: 11\r\n<unknown>:0: error: swift frontend command failed due to signal (use -v to see invocation)\r\n\r\nCompileSwift normal x86_64 /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/CompileSwiftCrash.swift\r\n    cd /Users/apneves/Desktop/CompileSwiftCrash\r\n    /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -frontend -c -primary-file /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/CompileSwiftCrash.swift /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/ViewController.swift /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/AppDelegate.swift -target x86_64-apple-ios9.0 -enable-objc-interop -sdk /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.0.sdk -I /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator -F /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator -enable-testing -g -module-cache-path /Users/apneves/Library/Developer/Xcode/DerivedData/ModuleCache -serialize-debugging-options -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/swift-overrides.hmap -Xcc -iquote -Xcc /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-generated-files.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-own-target-headers.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-all-target-headers.hmap -Xcc -iquote -Xcc /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-project-headers.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator/include -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/DerivedSources/x86_64 -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/DerivedSources -Xcc -DDEBUG=1 -Xcc -working-directory/Users/apneves/Desktop/CompileSwiftCrash -emit-module-doc-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash~partial.swiftdoc -Onone -module-name CompileSwiftCrash -emit-module-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash~partial.swiftmodule -serialize-diagnostics-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.dia -emit-dependencies-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.d -emit-reference-dependencies-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.swiftdeps -o /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.o\r\n\r\n0  swift                    0x000000010c1f4b9b llvm::sys::PrintStackTrace(__sFILE*) + 43\r\n1  swift                    0x000000010c1f52db SignalHandler(int) + 379\r\n2  libsystem_platform.dylib 0x00007fff9217af1a _sigtramp + 26\r\n3  libsystem_platform.dylib 0x00007fff55a08303 _sigtramp + 3280524291\r\n4  swift                    0x000000010bfaefaf llvm::ConstantFoldGetElementPtr(llvm::Constant*, bool, llvm::ArrayRef<llvm::Value*>) + 1743\r\n5  swift                    0x000000010bfbf658 llvm::ConstantExpr::getGetElementPtr(llvm::Constant*, llvm::ArrayRef<llvm::Value*>, bool, llvm::Type*) + 56\r\n6  swift                    0x000000010a2d96c4 llvm::IRBuilder<true, llvm::ConstantFolder, llvm::IRBuilderDefaultInserter<true> >::CreateConstInBoundsGEP2_32(llvm::Value*, unsigned int, unsigned int, llvm::Twine const&) + 308\r\n7  swift                    0x000000010a34c08c swift::irgen::ElementLayout::project(swift::irgen::IRGenFunction&, swift::irgen::Address, llvm::Optional<swift::irgen::NonFixedOffsetsImpl*>, llvm::Twine const&) const + 828\r\n8  swift                    0x000000010a2fe26f swift::irgen::SequentialField<(anonymous namespace)::StructFieldInfo>::projectAddress(swift::irgen::IRGenFunction&, swift::irgen::Address, llvm::Optional<swift::irgen::NonFixedOffsetsImpl*>) const + 159\r\n9  swift                    0x000000010a2ff233 swift::irgen::SequentialTypeInfo<(anonymous namespace)::LoadableStructTypeInfo, swift::irgen::LoadableTypeInfo, (anonymous namespace)::StructFieldInfo, true>::loadAsTake(swift::irgen::IRGenFunction&, swift::irgen::Address, swift::irgen::Explosion&) const + 99\r\n10 swift                    0x000000010a33ad45 swift::SILVisitor<(anonymous namespace)::IRGenSILFunction, void>::visit(swift::ValueBase*) + 26773\r\n11 swift                    0x000000010a3302e5 (anonymous namespace)::IRGenSILFunction::emitSILFunction() + 11781\r\n12 swift                    0x000000010a32d083 swift::irgen::IRGenModule::emitSILFunction(swift::SILFunction*) + 659\r\n13 swift                    0x000000010a27b65b swift::irgen::IRGenModuleDispatcher::emitLazyDefinitions() + 923\r\n14 swift                    0x000000010a313416 performIRGeneration(swift::IRGenOptions&, swift::ModuleDecl*, swift::SILModule*, llvm::StringRef, llvm::LLVMContext&, swift::SourceFile*, unsigned int) + 1030\r\n15 swift                    0x000000010a313766 swift::performIRGeneration(swift::IRGenOptions&, swift::SourceFile&, swift::SILModule*, llvm::StringRef, llvm::LLVMContext&, unsigned int) + 70\r\n16 swift                    0x000000010a1fd8bf performCompile(swift::CompilerInstance&, swift::CompilerInvocation&, llvm::ArrayRef<char const*>, int&) + 11663\r\n17 swift                    0x000000010a1fa913 frontend_main(llvm::ArrayRef<char const*>, char const*, void*) + 2515\r\n18 swift                    0x000000010a1f6a9f main + 1983\r\n19 libdyld.dylib            0x00007fff964f95c9 start + 1\r\nStack dump:\r\n0.\tProgram arguments: /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -frontend -c -primary-file /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/CompileSwiftCrash.swift /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/ViewController.swift /Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/AppDelegate.swift -target x86_64-apple-ios9.0 -enable-objc-interop -sdk /Applications/Xcode-beta.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.0.sdk -I /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator -F /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator -enable-testing -g -module-cache-path /Users/apneves/Library/Developer/Xcode/DerivedData/ModuleCache -serialize-debugging-options -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/swift-overrides.hmap -Xcc -iquote -Xcc /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-generated-files.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-own-target-headers.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-all-target-headers.hmap -Xcc -iquote -Xcc /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/CompileSwiftCrash-project-headers.hmap -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Products/Debug-iphonesimulator/include -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/DerivedSources/x86_64 -Xcc -I/Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/DerivedSources -Xcc -DDEBUG=1 -Xcc -working-directory/Users/apneves/Desktop/CompileSwiftCrash -emit-module-doc-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash~partial.swiftdoc -Onone -module-name CompileSwiftCrash -emit-module-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash~partial.swiftmodule -serialize-diagnostics-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.dia -emit-dependencies-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.d -emit-reference-dependencies-path /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.swiftdeps -o /Users/apneves/Library/Developer/Xcode/DerivedData/CompileSwiftCrash-dpsmzebpotphrtemdopjrtqbtxox/Build/Intermediates/CompileSwiftCrash.build/Debug-iphonesimulator/CompileSwiftCrash.build/Objects-normal/x86_64/CompileSwiftCrash.o\r\n1.\tWhile emitting IR SIL function @_TFIvV17CompileSwiftCrash17CompileSwiftCrash5queueCSo16NSOperationQueueiU_FT_S1_ for expression at [/Users/apneves/Desktop/CompileSwiftCrash/CompileSwiftCrash/CompileSwiftCrash.swift:13:36 - line:18:9] RangeText=\"{\r\n        let operationQueue = NSOperationQueue()\r\n        operationQueue.maxConcurrentOperationCount = NSOperationQueueDefaultMaxConcurrentOperationCount\r\n\r\n        return operationQueue\r\n        }\""
    email: p4checo@gmail.com
    modified: "2018-05-16T12:28:50.15809Z"
    number: "21621459"
    number_intvalue: 21621459
    originated: 30-Jun-2015
    parent_number: '&{NULL_VALUE}'
    product: Xcode7b2
    product_version: ""
    reproducible: Always
    resolved: ""
    status: Closed
    title: '[Swift2][Xcode7b2] Swift compiler crashes when setting `NSOperation.maxConcurrentOperationCount`'
