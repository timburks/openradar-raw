apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "20890684"
    labels:
        datastore_id: "6191825677189120"
data:
    classification: Serious Bug
    created: "2015-05-10T19:02:20.91701Z"
    description: "Summary:\r\nSetting the maximumNumberOfTouches parameter on the UIPanGestureRecognizer underlying a UIScrollView yields different results from setting the same parameter on an independently initialized UIPanGestureRecognizer.\r\n\r\nSteps to Reproduce:\r\n(Sample code below)\r\n1. Initialize a UIScrollView.\r\n2. Set the UIScrollView's PanGestureRecognizer's maximumNumberOfTouches to 2.\r\n3. Scroll with 3 fingers in the UIScrollView.\r\n\r\nExpected Results:\r\nUIScrollView should ignore 3-fingered scrolling. Underlying UIPanGestureRecognizer should not report any gesture.\r\n\r\nActual Results:\r\nUIScrollView scrolls. Underlying UIPanGestureRecognizer reports a gesture with numberOfTouches==2.\r\n\r\nNotes:\r\nWhen I set maximumNumberOfTouches to 2 in an independently initialized UIPanGestureRecognizer attached to a fresh UIView, the behavior is as expected: it reports a pan gesture when panning with 1 or 2 fingers, but ignores pans with 3 fingers.\r\n\r\nAdditionally, in the UIScrollView setup, if you start scrolling with 3 fingers, then reduce to 2 fingers, and then to 1, the number of reported touches sometimes goes from 2 to 1 to 0, and at 0, it stops scrolling, even though there is still one finger scrolling on the device.\r\n\r\nSample UIViewController implementation below, which creates a UIView and UIScrollView, demonstrating the different behavior of two identically configured UIPanGestureRecognizers.\r\n\r\n\r\n#import \"ViewController.h\"\r\n\r\n@interface ViewController () {\r\n\tUILabel *_panLabel, *_scrollLabel;\r\n}\r\n\r\n@end\r\n\r\n@implementation ViewController\r\n\r\n- (void)viewDidLoad {\r\n\t[super viewDidLoad];\r\n\t\r\n\tCGRect topRect, bottomRect;\r\n\tCGRectDivide(self.view.frame, &topRect, &bottomRect, CGRectGetMidY(self.view.frame), CGRectMinYEdge);\r\n\t\r\n\t// This section works as expected.\r\n\tUIPanGestureRecognizer *panRecog = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];\r\n\tpanRecog.maximumNumberOfTouches=2;\r\n\tpanRecog.minimumNumberOfTouches=1;\r\n\tUIView *panView = [[UIView alloc] initWithFrame:topRect];\r\n\t[panView addGestureRecognizer:panRecog];\r\n\t[self.view addSubview:panView];\r\n\t_panLabel = [[UILabel alloc] initWithFrame:topRect];\r\n\t_panLabel.text = @\"Pan area\\n\";\r\n\t_panLabel.numberOfLines = 2;\r\n\t_panLabel.textAlignment = NSTextAlignmentCenter;\r\n\t[panView addSubview:_panLabel];\r\n\t\r\n\t// This section does not work as expected. Scrolling with 3 fingers reports 2 fingers detected.\r\n\t// Even weirder, if you start scrolling with 3 fingers, then reduce to 2, then to 1, it reports 2 -> 1 -> 0, and stops scrolling when you're down to 1 finger.\r\n\tUIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:bottomRect];\r\n\tCGSize tripleSize = CGSizeMake(bottomRect.size.width, bottomRect.size.height * 3);\r\n\tscrollView.backgroundColor = [UIColor yellowColor];\r\n\t[scrollView setContentSize:tripleSize];\r\n\t[self.view addSubview:scrollView];\r\n\t[scrollView.panGestureRecognizer addTarget:self action:@selector(handlePan:)];\r\n\tscrollView.panGestureRecognizer.maximumNumberOfTouches=2;\r\n\tscrollView.panGestureRecognizer.minimumNumberOfTouches=1;\r\n\t_scrollLabel = [[UILabel alloc] initWithFrame:bottomRect];\r\n\t_scrollLabel.text = @\"Scroll area\\n\";\r\n\t_scrollLabel.numberOfLines = 2;\r\n\t_scrollLabel.textAlignment = NSTextAlignmentCenter;\r\n\t[self.view addSubview:_scrollLabel];\r\n}\r\n\r\n- (void)handlePan:(UIPanGestureRecognizer *)sender {\r\n\tlong touches = sender.numberOfTouches;\r\n\tNSString *touchReport = @\"\";\t// Clear 2nd line of label when number of touches is zero\r\n\tif (touches)\r\n\t\ttouchReport = [NSString stringWithFormat:@\"Detected pan with %ld touches\",touches];\r\n\tif ([sender.view isKindOfClass:[UIScrollView class]]) {\r\n\t\t_scrollLabel.text = [NSString stringWithFormat:@\"Scroll area\\n%@\",touchReport];\r\n\t} else {\r\n\t\t_panLabel.text = [NSString stringWithFormat:@\"Pan area \\n%@\",touchReport];\r\n\t}\r\n}\r\n\r\n@end"
    email: list@bonuslight.com
    modified: "2015-05-10T19:02:20.91747Z"
    number: "20890684"
    number_intvalue: 20890684
    originated: 10 May 2015
    parent_number: '&{NULL_VALUE}'
    product: iOS SDK
    product_version: 8.3 (12F70)
    reproducible: Always
    resolved: ""
    status: Open
    title: UIScrollView ignores maximumNumberOfTouches parameter
