apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "20898925"
    labels:
        datastore_id: "4931980403671040"
data:
    classification: Serious Bug
    created: "2015-05-11T16:57:31.09126Z"
    description: "Creating an archive of an iOS app containing a WatchKit app (containing some Swift) using xcodebuild's -exportArchive generates an invalid .ipa file. Attempting to install this .ipa file onto an iPhone using Xcode works, but the Watch app deployment fails with the message \"Application Verification Failed\"\r\n\r\nSteps to Reproduce:\r\n1. Create an iPhone app using only Objective-C\r\n2. Add a Watch extension and app target that uses mixed Objective-C and Swift\r\n3. Build the app using the xcodebuild \"archive\" command\r\n4. Package up an .ipa file from the resulting .xcarchive using the xcodebuild -exportArchive option\r\n5. Deploy the .ipa file to a device using the Xcode Devices window\r\n6. Deploy the watch app to a device\r\n\r\nExpected Results:\r\nThe watch app will deploy successfully.\r\n\r\nActual Results:\r\nThe watch app deployment fails with a generic message: \r\n\r\n    <App Name>\r\n    Failed to install <App Name>, error: Application Verification Failed\r\n\r\nConfiguration: (hardware)\r\nMacBook Pro (Retina, 15-inch, Late 2013)\r\nOS X 10.10.3 (14D136)\r\n\r\nVersion & Build:\r\nXcode 6.3.1 (6D1002)\r\n\r\nRegression:\r\n\r\n\r\nAdditional Notes:\r\nNote that importing the .xcarchive file into Xcode and using the \"Export...\" button to export for Enterprise Deployment generates an .ipa file that deploys to a watch successfully. Inspecting the contents of these working .ipa files reveals two folders not present in the .ipa generated by xcodebuild -exportArchive: SwiftSupport and WatchKitSupport.\r\n\r\nHere is shell script that packages up the .ipa file correctly using an .xcarchive:\r\nhttps://gist.github.com/phatblat/6eb8895e2202f796960e"
    email: benchatelain@gmail.com
    modified: "2015-06-29T15:54:06.14421Z"
    number: "20898925"
    number_intvalue: 20898925
    originated: "2015-05-11"
    parent_number: '&{NULL_VALUE}'
    product: Developer Tools
    product_version: Xcode 6.3.1 (6D1002)
    reproducible: Always
    resolved: ""
    status: Dup of 16703091
    title: Archives created by xcodebuild -exportArchive are missing SwiftSupport and WatchKitSupport folders
