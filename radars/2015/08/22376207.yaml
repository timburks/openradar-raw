apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "22376207"
    labels:
        datastore_id: "4960408624431104"
data:
    classification: Crash
    created: "2015-08-21T08:30:35.04422Z"
    description: "Summary:\r\nIn the case that the user does not give permission to access the Photos framework, and the uses dismisses the view controller in which the permission was requested, the app crashes.\r\n\r\nSteps to Reproduce:\r\n1: on the ViewWillAppear, we call: PHAuthorizationStatus status = [PHPhotoLibrary authorizationStatus];\r\n2: The user denies access, on the status return block on the status case PHAuthorizationStatusDenied: we dismiss the view controller using [self.navigationController dismissViewControllerAnimated:YES completion:nil];\r\n3: App Crashes\r\n\r\nExpected Results:\r\nApp does not crash.\r\n\r\nActual Results:\r\nApp Crash, below the stack trace. \r\n\r\n2015-08-21 09:57:16.446 <redacted>[93092:14603781] *** This application is not allowed to access Photo data. (\r\n\t0   PhotoLibraryServices                0x000000010a0a5cb3 -[PLPhotoLibrary initWithTransientContext:name:] + 642\r\n\t1   Photos                              0x0000000104fb35a4 __30-[PHPhotoLibrary photoLibrary]_block_invoke + 59\r\n\t2   libdispatch.dylib                   0x0000000108c14614 _dispatch_client_callout + 8\r\n\t3   libdispatch.dylib                   0x0000000108c00881 dispatch_once_f + 565\r\n\t4   Photos                              0x0000000104fb3563 -[PHPhotoLibrary photoLibrary] + 140\r\n\t5   Photos                              0x0000000104f88af2 -[PHCoreImageManager _cancelAndFlushPreheatItemsForAssets:CPLPrefetching:domain:operation:passingTestHandler:didCancelHandler:] + 178\r\n\t6   Photos                              0x0000000104fa26cf -[PHImageManager dealloc] + 176\r\n\t7   libobjc.A.dylib                     0x0000000107ecc28e _ZN11objc_object17sidetable_releaseEb + 236\r\n\t8   <redacted>                           0x0000000104aeef3a -[ViewController .cxx_destruct] + 106\r\n\t9   libobjc.A.dylib                     0x0000000107eb6448 _ZL27object_cxxDestructFromClassP11objc_objectP10objc_class + 127\r\n\t10  libobjc.A.dylib                     0x0000000107ec49b1 objc_destructInstance + 96\r\n\t11  libobjc.A.dylib                     0x0000000107ec49e4 object_dispose + 22\r\n\t12  UIKit                               0x0000000106d6df4a -[UIResponder dealloc] + 90\r\n\t13  UIKit                               0x0000000106d19398 -[UIViewController dealloc] + 1891\r\n\t14  CoreFoundation                      0x00000001085148eb CFRelease + 603\r\n\t15  CoreFoundation                      0x000000010852821d -[__NSArrayM dealloc] + 157\r\n\t16  libobjc.A.dylib                     0x0000000107ecc28e _ZN11objc_object17sidetable_releaseEb + 236\r\n\t17  UIKit                               0x0000000106d19020 -[UIViewController dealloc] + 1003\r\n\t18  UIKit                               0x0000000106d3c1bc -[UINavigationController dealloc] + 452\r\n\t19  <redacted>                           0x0000000104b6174e -[ViewController .cxx_destruct] + 158\r\n\t20  libobjc.A.dylib                     0x0000000107eb6448 _ZL27object_cxxDestructFromClassP11objc_objectP10objc_class + 127\r\n\t21  libobjc.A.dylib                     0x0000000107ec49b1 objc_destructInstance + 96\r\n\t22  libobjc.A.dylib                     0x0000000107ec49e4 object_dispose + 22\r\n\t23  UIKit                               0x0000000106d6df4a -[UIResponder dealloc] + 90\r\n\t24  UIKit                               0x0000000106d19398 -[UIViewController dealloc] + 1891\r\n\t25  libobjc.A.dylib                     0x0000000107ecc8cd _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 591\r\n\t26  CoreFoundation                      0x0000000108533f06 _CFAutoreleasePoolPop + 22\r\n\t27  CoreFoundation                      0x0000000108567dd3 __CFRunLoopRun + 2051\r\n\t28  CoreFoundation                      0x0000000108567366 CFRunLoopRunSpecific + 470\r\n\t29  GraphicsServices                    0x000000010a661a3e GSEventRunModal + 161\r\n\t30  UIKit                               0x0000000106bea8c0 UIApplicationMain + 1282\r\n\t31  <redacted>                           0x0000000104aa666b main + 379\r\n\t32  libdyld.dylib                       0x0000000108c49145 start + 1\r\n\t33  ???                                 0x0000000000000001 0x0 + 1\r\n)\r\n2015-08-21 09:57:16.451 <redacted>[93092:14603781] *** Terminating app due to uncaught exception 'NSObjectInaccessibleException', reason: 'This application is not allowed to access Photo data.'\r\n*** First throw call stack:\r\n(\r\n\t0   CoreFoundation                      0x000000010863ec65 __exceptionPreprocess + 165\r\n\t1   libobjc.A.dylib                     0x0000000107eb7bb7 objc_exception_throw + 45\r\n\t2   PhotoLibraryServices                0x000000010a0a5d06 -[PLPhotoLibrary initWithTransientContext:name:] + 725\r\n\t3   Photos                              0x0000000104fb35a4 __30-[PHPhotoLibrary photoLibrary]_block_invoke + 59\r\n\t4   libdispatch.dylib                   0x0000000108c14614 _dispatch_client_callout + 8\r\n\t5   libdispatch.dylib                   0x0000000108c00881 dispatch_once_f + 565\r\n\t6   Photos                              0x0000000104fb3563 -[PHPhotoLibrary photoLibrary] + 140\r\n\t7   Photos                              0x0000000104f88af2 -[PHCoreImageManager _cancelAndFlushPreheatItemsForAssets:CPLPrefetching:domain:operation:passingTestHandler:didCancelHandler:] + 178\r\n\t8   Photos                              0x0000000104fa26cf -[PHImageManager dealloc] + 176\r\n\t9   libobjc.A.dylib                     0x0000000107ecc28e _ZN11objc_object17sidetable_releaseEb + 236\r\n\t10  <redacted>                           0x0000000104aeef3a -[ViewController .cxx_destruct] + 106\r\n\t11  libobjc.A.dylib                     0x0000000107eb6448 _ZL27object_cxxDestructFromClassP11objc_objectP10objc_class + 127\r\n\t12  libobjc.A.dylib                     0x0000000107ec49b1 objc_destructInstance + 96\r\n\t13  libobjc.A.dylib                     0x0000000107ec49e4 object_dispose + 22\r\n\t14  UIKit                               0x0000000106d6df4a -[UIResponder dealloc] + 90\r\n\t15  UIKit                               0x0000000106d19398 -[UIViewController dealloc] + 1891\r\n\t16  CoreFoundation                      0x00000001085148eb CFRelease + 603\r\n\t17  CoreFoundation                      0x000000010852821d -[__NSArrayM dealloc] + 157\r\n\t18  libobjc.A.dylib                     0x0000000107ecc28e _ZN11objc_object17sidetable_releaseEb + 236\r\n\t19  UIKit                               0x0000000106d19020 -[UIViewController dealloc] + 1003\r\n\t20  UIKit                               0x0000000106d3c1bc -[UINavigationController dealloc] + 452\r\n\t21  <redacted>                           0x0000000104b6174e -[ViewController .cxx_destruct] + 158\r\n\t22  libobjc.A.dylib                     0x0000000107eb6448 _ZL27object_cxxDestructFromClassP11objc_objectP10objc_class + 127\r\n\t23  libobjc.A.dylib                     0x0000000107ec49b1 objc_destructInstance + 96\r\n\t24  libobjc.A.dylib                     0x0000000107ec49e4 object_dispose + 22\r\n\t25  UIKit                               0x0000000106d6df4a -[UIResponder dealloc] + 90\r\n\t26  UIKit                               0x0000000106d19398 -[UIViewController dealloc] + 1891\r\n\t27  libobjc.A.dylib                     0x0000000107ecc8cd _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 591\r\n\t28  CoreFoundation                      0x0000000108533f06 _CFAutoreleasePoolPop + 22\r\n\t29  CoreFoundation                      0x0000000108567dd3 __CFRunLoopRun + 2051\r\n\t30  CoreFoundation                      0x0000000108567366 CFRunLoopRunSpecific + 470\r\n\t31  GraphicsServices                    0x000000010a661a3e GSEventRunModal + 161\r\n\t32  UIKit                               0x0000000106bea8c0 UIApplicationMain + 1282\r\n\t33  <redacted>                           0x0000000104aa666b main + 379\r\n\t34  libdyld.dylib                       0x0000000108c49145 start + 1\r\n\t35  ???                                 0x0000000000000001 0x0 + 1\r\n)\r\nlibc++abi.dylib: terminating with uncaught exception of type NSException\r\n\r\nVersion:\r\nIOS 8.4, Xcode Version 6.4 (6E35b)\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\nany iOS device in Simulator and on real devices: iPhone 4s, 5, 5s, 6 & 6+\r\n\r\nAttachments:"
    email: arnold.nefkens@sogeti.nl
    modified: "2015-08-21T08:30:35.0446Z"
    number: "22376207"
    number_intvalue: 22376207
    originated: 21-08-2015
    parent_number: '&{NULL_VALUE}'
    product: iOS
    product_version: "8.4"
    reproducible: Always
    resolved: ""
    status: Open
    title: Using Photos framework App Crashes when user denies access and view controller is dismissed
