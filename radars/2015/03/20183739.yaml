apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "20183739"
    labels:
        datastore_id: "5317345404780544"
data:
    classification: Crash
    created: "2015-03-17T01:05:42.882097Z"
    description: "Summary:\r\nThe following code (dependent on https://github.com/ReactiveCocoa/ReactiveCocoa) crashes the compiler\r\n\r\nimport Cocoa\r\nimport ReactiveCocoa\r\n\r\n@NSApplicationMain\r\nclass AppDelegate: NSObject, NSApplicationDelegate {\r\n\r\n    @IBOutlet weak var window: NSWindow!\r\n\r\n    func applicationDidFinishLaunching(aNotification: NSNotification) {\r\n        let (signal, sink) = Signal<String, NoError>.pipe()\r\n\r\n        signal |> observe(next: { value in println(\"\\(value)\") })\r\n\r\n        sendNext(sink, \"Hello, world\");\r\n    }\r\n}\r\n\r\n\r\nWith the following notes\r\n\r\n1.\tWhile emitting SIL for 'applicationDidFinishLaunching' at /Users/neilpa/code/RAC1829/RAC1829/AppDelegate.swift:9:5\r\n2.\tWhile emitting reabstraction thunk in SIL function @_TTRXFo_iSS_dT__XFo_oSS_dT__\r\n\r\nSteps to Reproduce:\r\n1. Clone the repo at https://github.com/neilpa/RAC1829 which contains the required dependencies\r\n2. Open the included RAC1829.xcodeproj and attempt the build the project to observe the crash.\r\n\r\nExpected Results:\r\nThe above code compiles successfully and prints \"Hello, world\" when run\r\n\r\nActual Results:\r\nThe above code crashes the compiler with the following truncated stack\r\n\r\n0  swift                    0x0000000107301388 llvm::sys::PrintStackTrace(__sFILE*) + 40\r\n1  swift                    0x0000000107301864 SignalHandler(int) + 452\r\n2  libsystem_platform.dylib 0x00007fff8e94bf1a _sigtramp + 26\r\n3  libsystem_platform.dylib 0x000000010941b000 _sigtramp + 2058154240\r\n4  swift                    0x0000000106d9e057 createThunk(swift::Lowering::SILGenFunction&, swift::SILLocation, TranslationKind, swift::Lowering::ManagedValue, swift::Lowering::AbstractionPattern, swift::CanTypeWrapper<swift::AnyFunctionType>, swift::Lowering::TypeLowering const&) + 1159\r\n5  swift                    0x0000000106d9e901 (anonymous namespace)::OrigToSubst::transformFunction(swift::Lowering::ManagedValue, swift::Lowering::AbstractionPattern, swift::CanTypeWrapper<swift::AnyFunctionType>) + 177\r\n6  swift                    0x0000000106d99d7e (anonymous namespace)::Transform::transform(swift::Lowering::ManagedValue, swift::Lowering::AbstractionPattern, swift::CanType, swift::Lowering::SGFContext) + 62\r\n7  swift                    0x0000000106d9a5c8 swift::Lowering::SILGenFunction::emitOrigToSubstValue(swift::SILLocation, swift::Lowering::ManagedValue, swift::Lowering::AbstractionPattern, swift::CanType, swift::Lowering::SGFContext) + 56\r\n8  swift                    0x0000000106d40a5f swift::Lowering::SILGenFunction::emitApply(swift::SILLocation, swift::Lowering::ManagedValue, llvm::ArrayRef<swift::Substitution>, llvm::ArrayRef<swift::Lowering::ManagedValue>, swift::CanTypeWrapper<swift::SILFunctionType>, swift::Lowering::AbstractionPattern, swift::CanType, bool, llvm::Optional<swift::AbstractCC>, swift::Lowering::SGFContext) + 2079\r\n9  swift                    0x0000000106d65668 swift::Lowering::SILGenFunction::emitApplyOfDefaultArgGenerator(swift::SILLocation, swift::ConcreteDeclRef, unsigned int, swift::CanType, swift::Lowering::SGFContext) + 456\r\n10 swift                    0x0000000106d4c8d4 (anonymous namespace)::ArgEmitter::emitShuffle(swift::Expr*, swift::Expr*, llvm::ArrayRef<swift::TupleTypeElt>, swift::ConcreteDeclRef, llvm::ArrayRef<swift::Expr*>, llvm::ArrayRef<int>, swift::Type, swift::Lowering::AbstractionPattern) + 4884\r\n11 swift                    0x0000000106d4b3b3 (anonymous namespace)::ArgEmitter::emitExpanded(swift::Lowering::ArgumentSource&&, swift::Lowering::AbstractionPattern) + 2387\r\n12 swift                    0x0000000106d49d30 (anonymous namespace)::CallSite::emit(swift::Lowering::SILGenFunction&, swift::Lowering::AbstractionPattern, (anonymous namespace)::ParamLowering&, llvm::SmallVectorImpl<swift::Lowering::ManagedValue>&, llvm::SmallVectorImpl<std::__1::pair<swift::Lowering::LValue, swift::SILLocation> >&) && + 176\r\n13 swift                    0x0000000106d41886 (anonymous namespace)::CallEmission::apply(swift::Lowering::SGFContext) + 1078\r\n...\r\n\r\nVersion:\r\nXcode 6.3 Beta 3 (6D543q)\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\nXcode 6.3 Beta 3 on OS X 10.10\r\n\r\nAttachments:"
    email: npankey@gmail.com
    modified: "2015-03-17T01:05:42.882276Z"
    number: "20183739"
    number_intvalue: 20183739
    originated: 3-16-15
    parent_number: '&{NULL_VALUE}'
    product: Xcode
    product_version: Xcode 6.3 Beta 3 (6D543q)
    reproducible: Always
    resolved: ""
    status: Open
    title: Swift 1.2b3 - Compiler crash attempting to call ReactiveCocoa.observe
