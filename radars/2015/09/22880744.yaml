apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "22880744"
    labels:
        datastore_id: "6110273375043584"
data:
    classification: Crash
    created: "2015-09-28T17:22:46.1615Z"
    description: "Steps to Reproduce:\r\n1. Launch iPhone 6 simulator (iOS 9.0, 13A340)\r\n2. Open Health app\r\n3. Switch to “Health Data” tab\r\n4. Choose “All“ in the list of categories\r\n5. Tap “Export” button at the right top corner\r\n\r\nExpected Results:\r\nNo crash.\r\nIt shouldn't try to present Mail compose screen immediately. It should prompt with default sharing prompt so I can choose to open the archive with another app installed in simulator. Same as happens on a real device.\r\n\r\nActual Results:\r\nMailCompositionService crashes. Simulator continues to work, but I can get that archive from the Health app.\r\n\r\nVersion:\r\niOS 9.0 (13A340)\r\n\r\nNotes:\r\nCrash log is attached.\r\n\r\nConfiguration:\r\niPhone 6 Simulator, Xcode 7.0 (7A220)\r\n\r\nAttachments:\r\n\r\n```\r\nProcess:               MailCompositionService [98187]\r\nPath:                  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/Applications/MailCompositionService.app/MailCompositionService\r\nIdentifier:            MailCompositionService\r\nVersion:               1.0 (1.0)\r\nCode Type:             X86-64 (Native)\r\nParent Process:        launchd_sim [94795]\r\nResponsible:           MailCompositionService [98187]\r\nUser ID:               501\r\n\r\nDate/Time:             2015-09-28 10:10:05.286 -0700\r\nOS Version:            Mac OS X 10.11.1 (15B17c)\r\nReport Version:        11\r\nAnonymous UUID:        853DC576-283D-F90F-0282-68BA8867F715\r\n\r\nSleep/Wake UUID:       A66E43D8-D2DF-4E02-99CC-BBA1779D277C\r\n\r\nTime Awake Since Boot: 330000 seconds\r\nTime Since Wake:       210 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0  Dispatch queue: com.apple.main-thread\r\n\r\nException Type:        EXC_CRASH (SIGABRT)\r\nException Codes:       0x0000000000000000, 0x0000000000000000\r\nException Note:        EXC_CORPSE_NOTIFY\r\n\r\nApplication Specific Information:\r\n*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x7fd18be13800'\r\nterminating with uncaught exception of type NSException\r\nabort() called\r\nCoreSimulator 179 - Device: iPhone 6 - Runtime: iOS 9.0 (13A340) - DeviceType: iPhone 6\r\n\r\nApplication Specific Backtrace 1:\r\n0   CoreFoundation                      0x000000010892ef65 __exceptionPreprocess + 165\r\n1   libobjc.A.dylib                     0x0000000108cbadeb objc_exception_throw + 48\r\n2   CoreFoundation                      0x000000010893758d -[NSObject(NSObject) doesNotRecognizeSelector:] + 205\r\n3   CoreFoundation                      0x0000000108884f7a ___forwarding___ + 970\r\n4   CoreFoundation                      0x0000000108884b28 _CF_forwarding_prep_0 + 120\r\n5   MessageUI                           0x0000000106b100b3 -[MFMailComposeController _setSendingEmailAddress:addIfNotPresent:] + 112\r\n6   MessageUI                           0x0000000106b605af +[MFComposeTypeFactory _setupForNewMessageWithModel:delegate:] + 82\r\n7   MessageUI                           0x0000000106b0e94c -[MFMailComposeController _loadCompositionContext] + 425\r\n8   MailCompositionService              0x0000000106887ad9 MailCompositionService + 15065\r\n9   CoreFoundation                      0x000000010881d85c __invoking___ + 140\r\n10  CoreFoundation                      0x000000010881d6ae -[NSInvocation invoke] + 286\r\n11  CoreFoundation                      0x00000001088ae016 -[NSInvocation invokeWithTarget:] + 54\r\n12  UIKit                               0x0000000107a40dc5 -[_UIViewServiceImplicitAnimationDecodingProxy forwardInvocation:] + 284\r\n13  CoreFoundation                      0x0000000108884d97 ___forwarding___ + 487\r\n14  CoreFoundation                      0x0000000108884b28 _CF_forwarding_prep_0 + 120\r\n15  CoreFoundation                      0x000000010881d85c __invoking___ + 140\r\n16  CoreFoundation                      0x000000010881d6ae -[NSInvocation invoke] + 286\r\n17  CoreFoundation                      0x00000001088ae016 -[NSInvocation invokeWithTarget:] + 54\r\n18  UIKit                               0x000000010798fc19 -[_UIQueueingProxy forwardInvocation:] + 381\r\n19  CoreFoundation                      0x0000000108884d97 ___forwarding___ + 487\r\n20  CoreFoundation                      0x0000000108884b28 _CF_forwarding_prep_0 + 120\r\n21  CoreFoundation                      0x000000010881d85c __invoking___ + 140\r\n22  CoreFoundation                      0x000000010881d6ae -[NSInvocation invoke] + 286\r\n23  CoreFoundation                      0x00000001088ae016 -[NSInvocation invokeWithTarget:] + 54\r\n24  CoreFoundation                      0x0000000108884d97 ___forwarding___ + 487\r\n25  CoreFoundation                      0x0000000108884b28 _CF_forwarding_prep_0 + 120\r\n26  CoreFoundation                      0x000000010881d85c __invoking___ + 140\r\n27  CoreFoundation                      0x000000010881d6ae -[NSInvocation invoke] + 286\r\n28  CoreFoundation                      0x00000001088ae016 -[NSInvocation invokeWithTarget:] + 54\r\n29  CoreFoundation                      0x0000000108884d97 ___forwarding___ + 487\r\n30  CoreFoundation                      0x0000000108884b28 _CF_forwarding_prep_0 + 120\r\n31  CoreFoundation                      0x000000010881d85c __invoking___ + 140\r\n32  CoreFoundation                      0x000000010881d6ae -[NSInvocation invoke] + 286\r\n33  FrontBoardServices                  0x000000010c0047ac -[FBSSerialQueue _performNext] + 192\r\n34  FrontBoardServices                  0x000000010c004b1a -[FBSSerialQueue _performNextFromRunLoopSource] + 45\r\n35  CoreFoundation                      0x000000010885b0a1 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17\r\n36  CoreFoundation                      0x0000000108850fcc __CFRunLoopDoSources0 + 556\r\n37  CoreFoundation                      0x0000000108850483 __CFRunLoopRun + 867\r\n38  CoreFoundation                      0x000000010884fe98 CFRunLoopRunSpecific + 488\r\n39  GraphicsServices                    0x000000010a01dad2 GSEventRunModal + 161\r\n40  UIKit                               0x0000000107149676 UIApplicationMain + 171\r\n41  MailCompositionService              0x0000000106885404 MailCompositionService + 5124\r\n42  libdyld.dylib                       0x000000010aa6a92d start + 1\r\n\r\nThread 0 Crashed:: Dispatch queue: com.apple.main-thread\r\n0   libsystem_kernel.dylib          0x000000010ada30ae __pthread_kill + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6a500 pthread_kill + 90\r\n2   libsystem_c.dylib               0x000000010ab11a44 abort + 129\r\n3   libc++abi.dylib                 0x000000010a919051 abort_message + 257\r\n4   libc++abi.dylib                 0x000000010a93eac9 default_terminate_handler() + 267\r\n5   libobjc.A.dylib                 0x0000000108cbb046 _objc_terminate() + 103\r\n6   libc++abi.dylib                 0x000000010a93c26e std::__terminate(void (*)()) + 8\r\n7   libc++abi.dylib                 0x000000010a93bef9 __cxa_rethrow + 99\r\n8   libobjc.A.dylib                 0x0000000108cbaf5e objc_exception_rethrow + 40\r\n9   com.apple.CoreFoundation        0x000000010884ff54 CFRunLoopRunSpecific + 676\r\n10  com.apple.GraphicsServices      0x000000010a01dad2 GSEventRunModal + 161\r\n11  com.apple.UIKit                 0x0000000107149676 UIApplicationMain + 171\r\n12  com.apple.MailCompositionService  0x0000000106885404 0x106884000 + 5124\r\n13  libdyld.dylib                   0x000000010aa6a92d start + 1\r\n\r\nThread 1:: Dispatch queue: com.apple.libdispatch-manager\r\n0   libsystem_kernel.dylib          0x000000010ada408a kevent64 + 10\r\n1   libdispatch.dylib               0x000000010aa2b8c0 _dispatch_mgr_invoke + 260\r\n2   libdispatch.dylib               0x000000010aa2b65a _dispatch_mgr_thread + 54\r\n\r\nThread 2:\r\n0   libsystem_kernel.dylib          0x000000010ada378a __workq_kernreturn + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6758c _pthread_wqthread + 1283\r\n2   libsystem_pthread.dylib         0x000000010ad65375 start_wqthread + 13\r\n\r\nThread 3:\r\n0   libsystem_kernel.dylib          0x000000010ada378a __workq_kernreturn + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6758c _pthread_wqthread + 1283\r\n2   libsystem_pthread.dylib         0x000000010ad65375 start_wqthread + 13\r\n\r\nThread 4:\r\n0   libsystem_kernel.dylib          0x000000010ada378a __workq_kernreturn + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6758c _pthread_wqthread + 1283\r\n2   libsystem_pthread.dylib         0x000000010ad65375 start_wqthread + 13\r\n\r\nThread 5:\r\n0   libsystem_kernel.dylib          0x000000010ada32b2 __semwait_signal + 10\r\n1   libsystem_c.dylib               0x000000010ab32acd nanosleep + 199\r\n2   libc++.1.dylib                  0x000000010a8b7100 std::__1::this_thread::sleep_for(std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l> > const&) + 75\r\n3   com.apple.JavaScriptCore        0x00000001101a45db bmalloc::Heap::scavenge(std::__1::unique_lock<bmalloc::StaticMutex>&, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000l> >) + 155\r\n4   com.apple.JavaScriptCore        0x00000001101a4514 bmalloc::Heap::concurrentScavenge() + 68\r\n5   com.apple.JavaScriptCore        0x00000001101a69ba bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>::entryPoint() + 90\r\n6   com.apple.JavaScriptCore        0x00000001101a6959 bmalloc::AsyncTask<bmalloc::Heap, void (bmalloc::Heap::*)()>::pthreadEntryPoint(void*) + 9\r\n7   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n8   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n9   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 6:: WebThread\r\n0   libsystem_kernel.dylib          0x000000010ad9dc96 mach_msg_trap + 10\r\n1   libsystem_kernel.dylib          0x000000010ad9d0d7 mach_msg + 55\r\n2   com.apple.CoreFoundation        0x00000001088511d4 __CFRunLoopServiceMachPort + 212\r\n3   com.apple.CoreFoundation        0x000000010885062f __CFRunLoopRun + 1295\r\n4   com.apple.CoreFoundation        0x000000010884fe98 CFRunLoopRunSpecific + 488\r\n5   com.apple.WebCore               0x000000010efba305 RunWebThread(void*) + 469\r\n6   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n7   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n8   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 7:: JavaScriptCore::Marking\r\n0   libsystem_kernel.dylib          0x000000010ada2f5e __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6873d _pthread_cond_wait + 767\r\n2   libc++.1.dylib                  0x000000010a8788ff std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 47\r\n3   com.apple.JavaScriptCore        0x000000010fe3a6bb JSC::GCThread::waitForNextPhase() + 171\r\n4   com.apple.JavaScriptCore        0x000000010fe3a758 JSC::GCThread::gcThreadMain() + 88\r\n5   com.apple.JavaScriptCore        0x0000000110196232 WTF::threadEntryPoint(void*) + 178\r\n6   com.apple.JavaScriptCore        0x000000011019668f WTF::wtfThreadEntryPoint(void*) + 15\r\n7   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n8   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n9   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 8:: JavaScriptCore::Marking\r\n0   libsystem_kernel.dylib          0x000000010ada2f5e __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6873d _pthread_cond_wait + 767\r\n2   libc++.1.dylib                  0x000000010a8788ff std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 47\r\n3   com.apple.JavaScriptCore        0x000000010fe3a6bb JSC::GCThread::waitForNextPhase() + 171\r\n4   com.apple.JavaScriptCore        0x000000010fe3a758 JSC::GCThread::gcThreadMain() + 88\r\n5   com.apple.JavaScriptCore        0x0000000110196232 WTF::threadEntryPoint(void*) + 178\r\n6   com.apple.JavaScriptCore        0x000000011019668f WTF::wtfThreadEntryPoint(void*) + 15\r\n7   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n8   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n9   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 9:: JavaScriptCore::Marking\r\n0   libsystem_kernel.dylib          0x000000010ada2f5e __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6873d _pthread_cond_wait + 767\r\n2   libc++.1.dylib                  0x000000010a8788ff std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 47\r\n3   com.apple.JavaScriptCore        0x000000010fe3a6bb JSC::GCThread::waitForNextPhase() + 171\r\n4   com.apple.JavaScriptCore        0x000000010fe3a758 JSC::GCThread::gcThreadMain() + 88\r\n5   com.apple.JavaScriptCore        0x0000000110196232 WTF::threadEntryPoint(void*) + 178\r\n6   com.apple.JavaScriptCore        0x000000011019668f WTF::wtfThreadEntryPoint(void*) + 15\r\n7   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n8   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n9   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 10:: JavaScriptCore::Marking\r\n0   libsystem_kernel.dylib          0x000000010ada2f5e __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6873d _pthread_cond_wait + 767\r\n2   libc++.1.dylib                  0x000000010a8788ff std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 47\r\n3   com.apple.JavaScriptCore        0x000000010fe3a6bb JSC::GCThread::waitForNextPhase() + 171\r\n4   com.apple.JavaScriptCore        0x000000010fe3a758 JSC::GCThread::gcThreadMain() + 88\r\n5   com.apple.JavaScriptCore        0x0000000110196232 WTF::threadEntryPoint(void*) + 178\r\n6   com.apple.JavaScriptCore        0x000000011019668f WTF::wtfThreadEntryPoint(void*) + 15\r\n7   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n8   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n9   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 11:: JavaScriptCore::Marking\r\n0   libsystem_kernel.dylib          0x000000010ada2f5e __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6873d _pthread_cond_wait + 767\r\n2   libc++.1.dylib                  0x000000010a8788ff std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 47\r\n3   com.apple.JavaScriptCore        0x000000010fe3a6bb JSC::GCThread::waitForNextPhase() + 171\r\n4   com.apple.JavaScriptCore        0x000000010fe3a758 JSC::GCThread::gcThreadMain() + 88\r\n5   com.apple.JavaScriptCore        0x0000000110196232 WTF::threadEntryPoint(void*) + 178\r\n6   com.apple.JavaScriptCore        0x000000011019668f WTF::wtfThreadEntryPoint(void*) + 15\r\n7   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n8   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n9   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 12:: JavaScriptCore::Marking\r\n0   libsystem_kernel.dylib          0x000000010ada2f5e __psynch_cvwait + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6873d _pthread_cond_wait + 767\r\n2   libc++.1.dylib                  0x000000010a8788ff std::__1::condition_variable::wait(std::__1::unique_lock<std::__1::mutex>&) + 47\r\n3   com.apple.JavaScriptCore        0x000000010fe3a6bb JSC::GCThread::waitForNextPhase() + 171\r\n4   com.apple.JavaScriptCore        0x000000010fe3a758 JSC::GCThread::gcThreadMain() + 88\r\n5   com.apple.JavaScriptCore        0x0000000110196232 WTF::threadEntryPoint(void*) + 178\r\n6   com.apple.JavaScriptCore        0x000000011019668f WTF::wtfThreadEntryPoint(void*) + 15\r\n7   libsystem_pthread.dylib         0x000000010ad679b1 _pthread_body + 131\r\n8   libsystem_pthread.dylib         0x000000010ad6792e _pthread_start + 168\r\n9   libsystem_pthread.dylib         0x000000010ad65385 thread_start + 13\r\n\r\nThread 13:\r\n0   libsystem_kernel.dylib          0x000000010ada378a __workq_kernreturn + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6758c _pthread_wqthread + 1283\r\n2   libsystem_pthread.dylib         0x000000010ad65375 start_wqthread + 13\r\n\r\nThread 14:\r\n0   libsystem_kernel.dylib          0x000000010ada378a __workq_kernreturn + 10\r\n1   libsystem_pthread.dylib         0x000000010ad6758c _pthread_wqthread + 1283\r\n2   libsystem_pthread.dylib         0x000000010ad65375 start_wqthread + 13\r\n\r\nThread 0 crashed with X86 Thread State (64-bit):\r\n  rax: 0x0000000000000000  rbx: 0x0000000000000006  rcx: 0x00007fff5937a498  rdx: 0x0000000000000000\r\n  rdi: 0x000000000000070b  rsi: 0x0000000000000006  rbp: 0x00007fff5937a4c0  rsp: 0x00007fff5937a498\r\n   r8: 0x0000000000000003   r9: 0x000000010a93faba  r10: 0x0000000008000000  r11: 0x0000000000000202\r\n  r12: 0x00007fff5937a620  r13: 0x00007fd18bd16250  r14: 0x000000010ad70000  r15: 0x00007fff5937a500\r\n  rip: 0x000000010ada30ae  rfl: 0x0000000000000202  cr2: 0x000000010ad6aa5d\r\n  \r\nLogical CPU:     0\r\nError Code:      0x02000148\r\nTrap Number:     133\r\n...\r\n```"
    email: ilyukevich.victor@gmail.com
    modified: "2015-11-09T19:18:38.71446Z"
    number: "22880744"
    number_intvalue: 22880744
    originated: 28-Sep-2015 10:19 AM
    parent_number: '&{NULL_VALUE}'
    product: iPhone 6 Simulator
    product_version: iOS 9.0
    reproducible: Always
    resolved: ""
    status: Closed (duplicate of 22378380)
    title: MailCompositionService crashes on simulator when exporting data from Health app
