apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "22820846"
    labels:
        datastore_id: "6616297731260416"
data:
    classification: Crash
    created: "2015-09-23T16:55:15.73761Z"
    description: "Summary:\r\nWe are receiving many reports from Crashlytics of similar-looking crashes deep in the MediaPlayer framework. \r\n\r\nAll are for iOS 9 and we did not see this crash before testing on iOS 9.\r\n\r\nSteps to Reproduce:\r\nWe have not yet found a way to reproduce this internally.\r\n\r\nExpected Results:\r\nNo Crash.\r\n\r\nActual Results:\r\nHere are three stack traces from different crash reports.\r\n\r\nAs you can see, once the traces go into Apple code they are essentially identical.\r\n\r\nCrash Report #1:\r\n\r\nThread : Crashed: com.apple.mediaplayer.ResultSetEntities\r\n0  MediaPlayer                    0x0000000186d747d4 void std::__1::__tree_left_rotate<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*) + 4\r\n1  MediaPlayer                    0x0000000186d746c4 std::__1::__tree<std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak>, std::__1::__map_value_compare<long long, std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak>, std::__1::less<long long>, true>, std::__1::allocator<std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak> > >::__insert_node_at(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*&, std::__1::__tree_node_base<void*>*) + 64\r\n2  MediaPlayer                    0x0000000186d745fc std::__1::map<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak, std::__1::less<long long>, std::__1::allocator<std::__1::pair<long long const, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak> > >::operator[](long long const&) + 92\r\n3  MediaPlayer                    0x0000000186d73cc4 __99-[MPMediaEntityCache _entityWithIdentifier:mediaEntityType:collectionGroupingType:loadEntityBlock:]_block_invoke + 44\r\n4  MediaPlayer                    0x0000000186d7451c -[MPMediaEntityCache _performWithSharedAccess:] + 60\r\n5  MediaPlayer                    0x0000000186d739b4 -[MPMediaEntityCache _entityWithIdentifier:mediaEntityType:collectionGroupingType:loadEntityBlock:] + 272\r\n6  MediaPlayer                    0x0000000186d73628 -[MPMediaEntityCache itemWithIdentifier:loadEntityBlock:] + 36\r\n7  MediaPlayer                    0x0000000186cc3170 +[MPConcreteMediaItem concreteMediaItemWithPersistentID:library:] + 172\r\n8  MediaPlayer                    0x0000000186ccbca4 __45-[MPMediaEntityResultSetArray objectAtIndex:]_block_invoke + 820\r\n9  libdispatch.dylib              0x0000000199a41770 _dispatch_client_callout + 16\r\n10 libdispatch.dylib              0x0000000199a4c9c4 _dispatch_barrier_sync_f_invoke + 100\r\n11 MediaPlayer                    0x0000000186ccb92c -[MPMediaEntityResultSetArray objectAtIndex:] + 160\r\n12 CoreFoundation                 0x00000001845a5474 -[NSArray getObjects:range:] + 124\r\n13 CoreFoundation                 0x00000001845a533c -[NSArray countByEnumeratingWithState:objects:count:] + 168\r\n14 justDrive                      0x0000000101017590 -[XXXX propertiesForMediaPlaylist:] + 3090768\r\n15 justDrive                      0x00000001010178e0 -[XXXX getAllPlaylistsAndItems] + 3091616\r\n16 justDrive                      0x0000000101016040 __51-[XXXX processChangesWithSyncURL:]_block_invoke + 3085312\r\n17 libdispatch.dylib              0x0000000199a417b0 _dispatch_call_block_and_release + 24\r\n18 libdispatch.dylib              0x0000000199a41770 _dispatch_client_callout + 16\r\n19 libdispatch.dylib              0x0000000199a4fbb0 _dispatch_root_queue_drain + 2140\r\n20 libdispatch.dylib              0x0000000199a4f34c _dispatch_worker_thread3 + 112\r\n21 libsystem_pthread.dylib        0x0000000199c55478 _pthread_wqthread + 1092\r\n22 libsystem_pthread.dylib        0x0000000199c55028 start_wqthread + 4\r\n\r\n\r\nCrash Report #2:\r\n\r\nThread : Crashed: Main thread (com.apple.mediaplayer.ResultSetEntities)\r\n0  MediaPlayer                    0x0000000186d747d4 void std::__1::__tree_left_rotate<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*) + 4\r\n1  MediaPlayer                    0x0000000186d747b0 void std::__1::__tree_balance_after_insert<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*) + 212\r\n2  MediaPlayer                    0x0000000186d746c4 std::__1::__tree<std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak>, std::__1::__map_value_compare<long long, std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak>, std::__1::less<long long>, true>, std::__1::allocator<std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak> > >::__insert_node_at(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*&, std::__1::__tree_node_base<void*>*) + 64\r\n3  MediaPlayer                    0x0000000186d745fc std::__1::map<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak, std::__1::less<long long>, std::__1::allocator<std::__1::pair<long long const, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak> > >::operator[](long long const&) + 92\r\n4  MediaPlayer                    0x0000000186d73cc4 __99-[MPMediaEntityCache _entityWithIdentifier:mediaEntityType:collectionGroupingType:loadEntityBlock:]_block_invoke + 44\r\n5  MediaPlayer                    0x0000000186d7451c -[MPMediaEntityCache _performWithSharedAccess:] + 60\r\n6  MediaPlayer                    0x0000000186d739b4 -[MPMediaEntityCache _entityWithIdentifier:mediaEntityType:collectionGroupingType:loadEntityBlock:] + 272\r\n7  MediaPlayer                    0x0000000186d73628 -[MPMediaEntityCache itemWithIdentifier:loadEntityBlock:] + 36\r\n8  MediaPlayer                    0x0000000186cc3170 +[MPConcreteMediaItem concreteMediaItemWithPersistentID:library:] + 172\r\n9  MediaPlayer                    0x0000000186ccbca4 __45-[MPMediaEntityResultSetArray objectAtIndex:]_block_invoke + 820\r\n10 libdispatch.dylib              0x0000000199a41770 _dispatch_client_callout + 16\r\n11 libdispatch.dylib              0x0000000199a4c9c4 _dispatch_barrier_sync_f_invoke + 100\r\n12 MediaPlayer                    0x0000000186ccb92c -[MPMediaEntityResultSetArray objectAtIndex:] + 160\r\n13 CoreFoundation                 0x00000001845a5474 -[NSArray getObjects:range:] + 124\r\n14 CoreFoundation                 0x00000001845a533c -[NSArray countByEnumeratingWithState:objects:count:] + 168\r\n15 justDrive                      0x0000000100ff02b4 -[XXXX entityForMediaPlaylist:] + 3094132\r\n16 justDrive                      0x0000000100fed38c -[XXXX playlists] + 3082060\r\n17 justDrive                      0x0000000100fab618 -[XXXX init] + 2812376\r\n18 justDrive                      0x0000000100fab234 __33+[XXXX sharedInstance]_block_invoke + 2811380\r\n19 libdispatch.dylib              0x0000000199a41770 _dispatch_client_callout + 16\r\n20 libdispatch.dylib              0x0000000199a425b4 dispatch_once_f + 80\r\n21 justDrive                      0x0000000100fab200 +[XXXX sharedInstance] + 2811328\r\n22 justDrive                      0x000000010005d018 -[AppDelegate setMySpinState:] (AppDelegate.m:310)\r\n23 justDrive                      0x000000010005cbc4 -[AppDelegate applicationDidEnterBackground:] (AppDelegate.m:230)\r\n24 UIKit                          0x0000000189e50a7c __47-[UIApplication _applicationDidEnterBackground]_block_invoke + 228\r\n25 UIKit                          0x0000000189f15190 +[UIViewController _performWithoutDeferringTransitions:] + 128\r\n26 UIKit                          0x0000000189e50944 -[UIApplication _applicationDidEnterBackground] + 100\r\n27 UIKit                          0x0000000189e5a758 -[UIApplication _handleNonLaunchSpecificActions:forScene:withTransitionContext:completion:] + 2708\r\n28 UIKit                          0x0000000189e5ff10 __88-[UIApplication _handleApplicationLifecycleEventWithScene:transitionContext:completion:]_block_invoke + 188\r\n29 UIKit                          0x0000000189e5fdec -[UIApplication _handleApplicationLifecycleEventWithScene:transitionContext:completion:] + 448\r\n30 UIKit                          0x0000000189e4b2c4 __70-[UIApplication scene:didUpdateWithDiff:transitionContext:completion:]_block_invoke + 152\r\n31 UIKit                          0x0000000189e4af4c -[UIApplication scene:didUpdateWithDiff:transitionContext:completion:] + 708\r\n32 FrontBoardServices             0x000000018e39b7ec -[FBSSerialQueue _performNext] + 184\r\n33 FrontBoardServices             0x000000018e39bb6c -[FBSSerialQueue _performNextFromRunLoopSource] + 56\r\n34 CoreFoundation                 0x000000018460c5a4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24\r\n35 CoreFoundation                 0x000000018460c038 __CFRunLoopDoSources0 + 540\r\n36 CoreFoundation                 0x0000000184609d38 __CFRunLoopRun + 724\r\n37 CoreFoundation                 0x0000000184538dc0 CFRunLoopRunSpecific + 384\r\n38 GraphicsServices               0x000000018f68c088 GSEventRunModal + 180\r\n39 UIKit                          0x0000000189c12f60 UIApplicationMain + 204\r\n40 justDrive                      0x0000000100060934 main (main.m:35)\r\n41 libdyld.dylib                  0x0000000199a728b8 start + 4\r\n\r\nCrash Report #3:\r\n\r\nThread : Crashed: com.apple.mediaplayer.ResultSetEntities\r\n0  MediaPlayer                    0x0000000186d747d4 void std::__1::__tree_left_rotate<std::__1::__tree_node_base<void*>*>(std::__1::__tree_node_base<void*>*) + 4\r\n1  MediaPlayer                    0x0000000186d746c4 std::__1::__tree<std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak>, std::__1::__map_value_compare<long long, std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak>, std::__1::less<long long>, true>, std::__1::allocator<std::__1::__value_type<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak> > >::__insert_node_at(std::__1::__tree_node_base<void*>*, std::__1::__tree_node_base<void*>*&, std::__1::__tree_node_base<void*>*) + 64\r\n2  MediaPlayer                    0x0000000186d745fc std::__1::map<long long, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak, std::__1::less<long long>, std::__1::allocator<std::__1::pair<long long const, MPMediaEntity<MPCacheableConcreteMediaEntity>* __weak> > >::operator[](long long const&) + 92\r\n3  MediaPlayer                    0x0000000186d73cc4 __99-[MPMediaEntityCache _entityWithIdentifier:mediaEntityType:collectionGroupingType:loadEntityBlock:]_block_invoke + 44\r\n4  MediaPlayer                    0x0000000186d7451c -[MPMediaEntityCache _performWithSharedAccess:] + 60\r\n5  MediaPlayer                    0x0000000186d739b4 -[MPMediaEntityCache _entityWithIdentifier:mediaEntityType:collectionGroupingType:loadEntityBlock:] + 272\r\n6  MediaPlayer                    0x0000000186d73628 -[MPMediaEntityCache itemWithIdentifier:loadEntityBlock:] + 36\r\n7  MediaPlayer                    0x0000000186cc3170 +[MPConcreteMediaItem concreteMediaItemWithPersistentID:library:] + 172\r\n8  MediaPlayer                    0x0000000186ccbca4 __45-[MPMediaEntityResultSetArray objectAtIndex:]_block_invoke + 820\r\n9  libdispatch.dylib              0x0000000199a41770 _dispatch_client_callout + 16\r\n10 libdispatch.dylib              0x0000000199a4c9c4 _dispatch_barrier_sync_f_invoke + 100\r\n11 MediaPlayer                    0x0000000186ccb92c -[MPMediaEntityResultSetArray objectAtIndex:] + 160\r\n12 CoreFoundation                 0x00000001845a5474 -[NSArray getObjects:range:] + 124\r\n13 CoreFoundation                 0x00000001845a533c -[NSArray countByEnumeratingWithState:objects:count:] + 168\r\n14 justDrive                      0x000000010105ba54 -[XXXX getAllPlaylistsAndItems] + 3091988\r\n15 justDrive                      0x000000010105a040 __51-[XXXX processChangesWithSyncURL:]_block_invoke + 3085312\r\n16 libdispatch.dylib              0x0000000199a417b0 _dispatch_call_block_and_release + 24\r\n17 libdispatch.dylib              0x0000000199a41770 _dispatch_client_callout + 16\r\n18 libdispatch.dylib              0x0000000199a4fbb0 _dispatch_root_queue_drain + 2140\r\n19 libdispatch.dylib              0x0000000199a4f34c _dispatch_worker_thread3 + 112\r\n20 libsystem_pthread.dylib        0x0000000199c55478 _pthread_wqthread + 1092\r\n21 libsystem_pthread.dylib        0x0000000199c55028 start_wqthread + 4\r\n\r\n\r\n\r\nVersion:\r\niOS 9\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\nCrashes have occurred on multiple devices, all reports indicate iPhone 6\r\n\r\nAttachments:"
    email: timburks@gmail.com
    modified: "2015-09-23T16:58:06.86143Z"
    number: "22820846"
    number_intvalue: 22820846
    originated: "2015-09-23"
    parent_number: '&{NULL_VALUE}'
    product: iOS
    product_version: iOS 9
    reproducible: Rarely
    resolved: ""
    status: Open
    title: Crash in com.apple.mediaplayer.ResultSetEntities
