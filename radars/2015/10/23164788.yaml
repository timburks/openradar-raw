apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "23164788"
    labels:
        datastore_id: "4995037603561472"
data:
    classification: Crash
    created: "2015-10-19T13:54:45.30247Z"
    description: "Summary:\r\nWe've gotten dozens of crash reports with crashes in WTF::HashTable… Here’s a recent one. Others vary, but all have the same frame 0 and many have the same frames 0-2 as the stack below.\r\n\r\nWe have never found a way to repro this crash, and know of it only from customer crashes.\r\n\r\nOur app loads webviews with various kinds of content, including complex machine-produced drawings, on-line Help, and so on. We execute our own Javascript in some of these webviews, though I don’t believe we’ve ever seen a crash whose stack included us executing JS.\r\n\r\n\r\nWe see almost no common elements between crashes. It happens on multiple OS’s (8.1 through 9.0.2 at a glance), many versions of our app, and many hardware models.\r\n\r\nThe crash is in WebKit’s thread. The main thread is usually idle, but not always.\r\n\r\nMany of the crashes have very little free RAM, but we’ve seen it with as much as 23% free RAM. Most crashes did not record any memory warnings.\r\n\r\nWe’d like to know:\r\n• Is this a known problem in Apple’s code?\r\n• If so, what can you tell us about how to avoid it?\r\n• If not, what can you suggest to help us diagnose it and figure out if it’s our error (e.g., trashing memory) or Apple’s?\r\n\r\nThanks.\r\n\r\n================\r\n\r\n(This stack comes from Crashlytics. We never see crash reports in your web portal.)\r\n\r\nThread : Crashed: WebThread\r\n0  WebCore                        0x00000001922c2a54 WTF::HashTable<WTF::String, WTF::String, WTF::IdentityExtractor, WTF::StringHash, WTF::HashTraits<WTF::String>, WTF::HashTraits<WTF::String> >::add(WTF::String const&) + 40\r\n1  WebCore                        0x0000000192058244 WebCore::ResourceLoadNotifier::dispatchWillSendRequest(WebCore::DocumentLoader*, unsigned long, WebCore::ResourceRequest&, WebCore::ResourceResponse const&) + 172\r\n2  WebCore                        0x0000000192058244 WebCore::ResourceLoadNotifier::dispatchWillSendRequest(WebCore::DocumentLoader*, unsigned long, WebCore::ResourceRequest&, WebCore::ResourceResponse const&) + 172\r\n3  WebCore                        0x0000000192057644 WebCore::ResourceLoader::willSendRequest(WebCore::ResourceRequest&, WebCore::ResourceResponse const&) + 256\r\n4  WebCore                        0x00000001920574c8 WebCore::SubresourceLoader::willSendRequest(WebCore::ResourceRequest&, WebCore::ResourceResponse const&) + 340\r\n5  WebCore                        0x00000001920571d4 WebCore::ResourceLoader::init(WebCore::ResourceRequest const&) + 312\r\n6  WebCore                        0x0000000192056ed0 WebCore::SubresourceLoader::startLoading() + 56\r\n7  WebCore                        0x0000000192056e1c WebCore::ResourceLoadScheduler::servePendingRequests(WebCore::ResourceLoadScheduler::HostInformation*, WebCore::ResourceLoadPriority) + 524\r\n8  WebCore                        0x0000000192056264 WebCore::ResourceLoadScheduler::scheduleSubresourceLoad(WebCore::Frame*, WebCore::CachedResource*, WebCore::ResourceRequest const&, WebCore::ResourceLoadPriority, WebCore::ResourceLoaderOptions const&) + 84\r\n9  WebCore                        0x0000000192054d94 WebCore::CachedResource::load(WebCore::CachedResourceLoader*, WebCore::ResourceLoaderOptions const&) + 1180\r\n10 WebCore                        0x0000000192052868 WebCore::CachedResourceLoader::requestResource(WebCore::CachedResource::Type, WebCore::CachedResourceRequest&) + 1240\r\n11 WebCore                        0x0000000192133bb8 WebCore::CachedResourceLoader::requestImage(WebCore::CachedResourceRequest&) + 248\r\n12 WebCore                        0x00000001921332ac WebCore::ImageLoader::updateFromElement() + 1536\r\n13 WebCore                        0x0000000192132a0c WebCore::HTMLImageElement::parseAttribute(WebCore::QualifiedName const&, WTF::AtomicString const&) + 960\r\n14 WebCore                        0x000000019249151c WebCore::Element::attributeChanged(WebCore::QualifiedName const&, WTF::AtomicString const&, WTF::AtomicString const&, WebCore::Element::AttributeModificationReason) + 60\r\n15 WebCore                        0x0000000192493b10 WebCore::Element::didAddAttribute(WebCore::QualifiedName const&, WTF::AtomicString const&) + 56\r\n16 WebCore                        0x00000001920478b4 WebCore::Element::setAttributeInternal(unsigned int, WebCore::QualifiedName const&, WTF::AtomicString const&, WebCore::Element::SynchronizationOfLazyAttribute) + 128\r\n17 WebCore                        0x00000001927eecf8 WebCore::setJSHTMLImageElementSrc(JSC::ExecState*, JSC::JSObject*, long long, long long) + 396\r\n18 JavaScriptCore                 0x000000018585bb34 JSC::JSObject::put(JSC::JSCell*, JSC::ExecState*, JSC::PropertyName, JSC::JSValue, JSC::PutPropertySlot&) + 1228\r\n19 JavaScriptCore                 0x0000000185854148 llint_slow_path_put_by_id + 564\r\n20 JavaScriptCore                 0x0000000185b8a9f8 llint_entry + 10744\r\n21 JavaScriptCore                 0x0000000185b8e04c llint_entry + 24652\r\n22 JavaScriptCore                 0x0000000185b8dfe8 llint_entry + 24552\r\n23 JavaScriptCore                 0x0000000185b8dfe8 llint_entry + 24552\r\n24 JavaScriptCore                 0x0000000185b8dfe8 llint_entry + 24552\r\n25 JavaScriptCore                 0x0000000185b8dfe8 llint_entry + 24552\r\n26 JavaScriptCore                 0x0000000185b87de4 callToJavaScript + 308\r\n27 JavaScriptCore                 0x0000000185af6448 JSC::JITCode::execute(JSC::VM*, JSC::ProtoCallFrame*) + 48\r\n28 JavaScriptCore                 0x0000000185861548 JSC::Interpreter::executeCall(JSC::ExecState*, JSC::JSObject*, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&) + 420\r\n29 JavaScriptCore                 0x000000018598d498 JSC::call(JSC::ExecState*, JSC::JSValue, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&, JSC::JSValue*) + 92\r\n30 WebCore                        0x00000001921f0a84 WebCore::JSEventListener::handleEvent(WebCore::ScriptExecutionContext*, WebCore::Event*) + 820\r\n31 WebCore                        0x00000001921b3a4c WebCore::EventTarget::fireEventListeners(WebCore::Event*, WebCore::EventTargetData*, WTF::Vector<WebCore::RegisteredEventListener, 1ul, WTF::CrashOnOverflow>&) + 776\r\n32 WebCore                        0x00000001920dc1c4 WebCore::EventTarget::fireEventListeners(WebCore::Event*) + 228\r\n33 WebCore                        0x000000019249a8d8 WebCore::EventContext::handleLocalEvents(WebCore::Event&) const + 108\r\n34 WebCore                        0x000000019249b57c WebCore::EventDispatcher::dispatchEvent(WebCore::Node*, WTF::PassRefPtr<WebCore::Event>) + 980\r\n35 WebCore                        0x00000001920dbf94 WebCore::Node::dispatchEvent(WTF::PassRefPtr<WebCore::Event>) + 36\r\n36 WebCore                        0x00000001921f06ec WebCore::EventTarget::dispatchEvent(WTF::PassRefPtr<WebCore::Event>, int&) + 156\r\n37 WebCore                        0x0000000192219f10 WebCore::jsNodePrototypeFunctionDispatchEvent(JSC::ExecState*) + 220\r\n38 JavaScriptCore                 0x0000000185b8e620 llint_entry + 26144\r\n39 JavaScriptCore                 0x0000000185b8e04c llint_entry + 24652\r\n40 JavaScriptCore                 0x0000000185b8e04c llint_entry + 24652\r\n41 JavaScriptCore                 0x0000000185b87de4 callToJavaScript + 308\r\n42 JavaScriptCore                 0x0000000185af6448 JSC::JITCode::execute(JSC::VM*, JSC::ProtoCallFrame*) + 48\r\n43 JavaScriptCore                 0x0000000185903320 JSC::Interpreter::execute(JSC::EvalExecutable*, JSC::ExecState*, JSC::JSValue, JSC::JSScope*) + 1208\r\n44 JavaScriptCore                 0x0000000185b2e0c8 JSC::globalFuncEval(JSC::ExecState*) + 1160\r\n45 JavaScriptCore                 0x0000000185b8e620 llint_entry + 26144\r\n46 JavaScriptCore                 0x0000000185b8dfe8 llint_entry + 24552\r\n47 JavaScriptCore                 0x0000000185b8dfe8 llint_entry + 24552\r\n48 JavaScriptCore                 0x0000000185b87de4 callToJavaScript + 308\r\n49 JavaScriptCore                 0x0000000185af6448 JSC::JITCode::execute(JSC::VM*, JSC::ProtoCallFrame*) + 48\r\n50 JavaScriptCore                 0x0000000185861548 JSC::Interpreter::executeCall(JSC::ExecState*, JSC::JSObject*, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&) + 420\r\n51 JavaScriptCore                 0x000000018598d498 JSC::call(JSC::ExecState*, JSC::JSValue, JSC::CallType, JSC::CallData const&, JSC::JSValue, JSC::ArgList const&, JSC::JSValue*) + 92\r\n52 WebCore                        0x00000001921f0a84 WebCore::JSEventListener::handleEvent(WebCore::ScriptExecutionContext*, WebCore::Event*) + 820\r\n53 WebCore                        0x00000001921b3a4c WebCore::EventTarget::fireEventListeners(WebCore::Event*, WebCore::EventTargetData*, WTF::Vector<WebCore::RegisteredEventListener, 1ul, WTF::CrashOnOverflow>&) + 776\r\n54 WebCore                        0x00000001920dc1c4 WebCore::EventTarget::fireEventListeners(WebCore::Event*) + 228\r\n55 WebCore                        0x000000019225253c WebCore::EventTarget::dispatchEvent(WTF::PassRefPtr<WebCore::Event>) + 112\r\n56 WebCore                        0x0000000192dc4e88 WebCore::WebSocket::didReceiveMessage(WTF::String const&) + 104\r\n57 WebCore                        0x0000000192dc87fc WebCore::WebSocketChannel::processFrame() + 3156\r\n58 WebCore                        0x0000000192dc7414 WebCore::WebSocketChannel::processBuffer() + 124\r\n59 WebCore                        0x0000000192dc7388 WebCore::WebSocketChannel::didReceiveSocketStreamData(WebCore::SocketStreamHandle*, char const*, int) + 288\r\n60 WebCore                        0x0000000192c31cd8 WebCore::SocketStreamHandle::readStreamCallback(unsigned long) + 364\r\n61 CoreFoundation                 0x00000001842faebc _signalEventSync + 192\r\n62 CoreFoundation                 0x00000001842fadd8 _cfstream_shared_signalEventSync + 444\r\n63 CoreFoundation                 0x000000018435a9ec __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24\r\n64 CoreFoundation                 0x0000000184359d48 __CFRunLoopDoSources0 + 448\r\n65 CoreFoundation                 0x0000000184357d40 __CFRunLoopRun + 712\r\n66 CoreFoundation                 0x00000001842850a4 CFRunLoopRunSpecific + 396\r\n67 WebCore                        0x00000001920cc858 RunWebThread(void*) + 468\r\n68 libsystem_pthread.dylib        0x000000019573fe80 _pthread_body + 164\r\n69 libsystem_pthread.dylib        0x000000019573fddc _pthread_body\r\n\r\nSteps to Reproduce:\r\nWe don’t know a way to reproduce this crash.\r\n\r\nExpected Results:\r\nNo crash.\r\n\r\nActual Results:\r\nSporadic crash.\r\n\r\nVersion:\r\nHappens on multiple OS versions.\r\n\r\nNotes:\r\n\r\n\r\nConfiguration:\r\nHappens on multiple devices."
    email: mmorton@onshape.com
    modified: "2015-10-19T13:54:45.30285Z"
    number: "23164788"
    number_intvalue: 23164788
    originated: 19-Oct-2014
    parent_number: '&{NULL_VALUE}'
    product: iOS SDK
    product_version: '---'
    reproducible: Rarely
    resolved: ""
    status: Open
    title: repeated app crashes involving WTF::HashTable
