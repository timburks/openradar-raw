apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "19906886"
    labels:
        datastore_id: "5804464489365504"
data:
    classification: Crash
    created: "2015-02-20T20:52:37.349262Z"
    description: "Summary:\r\nData was read using [NSKeyedUnarchiver unarchiveObjectWithFile:] and attempted to convert to json using [NSJSONSerialization dataWithJSONObject:options:error:], the app crash with SIGBUS - bus error\r\n{\r\n      \"StackTrace\" : [\r\n        \"#2  libsystem_platform.dylib            0X383E587B _sigtramp()\",\r\n        \"#3  ??                                  0X00000022 ???()\",\r\n        \"#4  Foundation                          0X2AF61F15 <redacted>()\",\r\n        \"#5  Foundation                          0X2AF60BAD <redacted>()\",\r\n        \"#6  Foundation                          0X2AF6288D <redacted>()\",\r\n        \"#7  CoreFoundation                      0X2A11A4BD <redacted>()\",\r\n        \"#8  CoreFoundation                      0X2A1134F3 -[__NSArrayI enumerateObjectsWithOptions:usingBlock:]\",\r\n        \"#9  Foundation                          0X2AF627D5 <redacted>()\",\r\n        \"#10 Foundation                          0X2AF60D4D <redacted>()\",\r\n        \"#11 Foundation                          0X2AF62963 <redacted>()\",\r\n        \"#12 CoreFoundation                      0X2A162AA1 <redacted>()\",\r\n        \"#13 CoreFoundation                      0X2A154BD5 -[__NSDictionaryI enumerateKeysAndObjectsWithOptions:usingBlock:]\",\r\n        \"#14 Foundation                          0X2AF625E3 <redacted>()\",\r\n        \"#15 Foundation                          0X2AF60D0F <redacted>()\",\r\n        \"#16 Foundation                          0X2AF6288D <redacted>()\",\r\n        \"#17 CoreFoundation                      0X2A11A4BD <redacted>()\",\r\n        \"#18 CoreFoundation                      0X2A1134F3 -[__NSArrayI enumerateObjectsWithOptions:usingBlock:]\",\r\n        \"#19 Foundation                          0X2AF627D5 <redacted>()\",\r\n        \"#20 Foundation                          0X2AF60D4D <redacted>()\",\r\n        \"#21 Foundation                          0X2AF6288D <redacted>()\",\r\n        \"#22 CoreFoundation                      0X2A11548F <redacted>()\",\r\n        \"#23 CoreFoundation                      0X2A1153B9 -[__NSArrayM enumerateObjectsWithOptions:usingBlock:]\",\r\n        \"#24 Foundation                          0X2AF627D5 <redacted>()\",\r\n        \"#25 Foundation                          0X2AF60D4D <redacted>()\",\r\n        \"#26 Foundation                          0X2AF60B25 -[_NSJSONWriter dataWithRootObject:options:error:]\",\r\n        \"#27 Foundation                          0X2AF619BF +[NSJSONSerialization dataWithJSONObject:options:error:]\",        \r\n      ]\r\n}\r\n\r\nSteps to Reproduce:\r\nI have a code something like the following:\r\nid unarchivedObj = [NSKeyedUnarchiver unarchiveObjectWithFile:someFile];\r\nNSMutableArray *fileContents = [NSMutableArray arrayWithObject:unarchivedObj];\r\nNSMutableArray *logData = [fileContents objectAtIndex:0];\r\n\r\nif ([NSJSONSerialization isValidJSONObject:logData])\r\n{\r\n    //convert object to data\r\n    NSData* data = [NSJSONSerialization dataWithJSONObject:logData\r\n                                                   options:NSJSONWritingPrettyPrinted error:0];\r\n}\r\n\r\nIt crashes in [NSJSONSerialization dataWithJSONObject:options:error:] with SIGBUS - bus error\r\n\r\nExpected Results:\r\nBefore converting to json i am checking if a given object can be converted to json object (NSJSONSerialization isValidJSONObject:logData]) so  [NSJSONSerialization dataWithJSONObject:options:error:] shouldn't crash. It should return nil if any error occurs.\r\n\r\nActual Results:\r\nThe app crashes in [NSJSONSerialization dataWithJSONObject:options:error:] with SIGBUS - bus error.\r\n\r\nVersion:\r\niPhone OS Version 8.1.2 (Build 12B440)\r\n\r\nConfiguration:\r\niPad5,3"
    email: arjun.sohaney@gmail.com
    modified: "2015-02-20T20:52:37.349561Z"
    number: "19906886"
    number_intvalue: 19906886
    originated: 20-Feb-2015 02:45 PM
    parent_number: '&{NULL_VALUE}'
    product: iOS SDK
    product_version: iPhone OS Version 8.1.2 (Build 12B440)
    reproducible: Unable
    resolved: ""
    status: Open
    title: App crashes in [NSJSONSerialization dataWithJSONObject:options:error:] with SIGBUS - bus error
