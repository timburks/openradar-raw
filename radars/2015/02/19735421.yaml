apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "19735421"
    labels:
        datastore_id: "5011536753983488"
data:
    classification: Crash
    created: "2015-02-05T22:04:44.836756Z"
    description: "UPDATE: Apple closed as Duplicate of 18206279 (Open)\r\n\r\nSummary:\r\nMy app uses UIImagePickerController to take photos and send them to our server. I am seeing occasional crashes when taking pictures with an iPhone 6+. I don't believe that these crashes are in my code; it appears that something is going wrong in UIImagePickerController when it is preparing to call its delegate's -[imagePickerController:didFinishPickingMediaWithInfo:] method.\r\n\r\nFrom the Xcode console log:\r\n\r\n2015-02-05 15:38:29.567 ACE Client[209:8380] *** Camera: Error capturing still image (Error Domain=AVFoundationErrorDomain Code=-11800 \"The operation could not be completed\" UserInfo=0x174466f00 {NSUnderlyingError=0x1744416e0 \"The operation couldn’t be completed. (OSStatus error -16802.)\", NSLocalizedFailureReason=An unknown error occurred (-16802), NSLocalizedDescription=The operation could not be completed})\r\n\r\nSteps to Reproduce:\r\n1. Present a UIImagePickerController with custom controls\r\n2. Call -takePicture a number of times\r\n\r\nExpected Results:\r\nThe UIImagePickerController's delegate's -imagePickerController:didFinishPickingMediaWithInfo: method is called for each call of -takePicture.\r\n\r\nActual Results:\r\nEventually the app threw an exception with the attached crash log and logged an error to the debug console:\r\n\r\n2015-02-05 15:38:29.567 MyApp[209:8380] *** Camera: Error capturing still image (Error Domain=AVFoundationErrorDomain Code=-11800 \"The operation could not be completed\" UserInfo=0x174466f00 {NSUnderlyingError=0x1744416e0 \"The operation couldn’t be completed. (OSStatus error -16802.)\", NSLocalizedFailureReason=An unknown error occurred (-16802), NSLocalizedDescription=The operation could not be completed})\r\n\r\nVersion:\r\n8.2 (12D5480a)\r\n\r\nConfiguration:\r\niPhone 6+ (A1524), iOS 8.2 beta 5\r\n\r\nException stack trace:\r\n\r\nApplication Specific Information:\r\n*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** setObjectForKey: object cannot be nil (key: UIImagePickerControllerOriginalImage)'\r\n\r\nLast Exception Backtrace:\r\n0   CoreFoundation                      0x000000018723a59c __exceptionPreprocess + 132\r\n1   libobjc.A.dylib                     0x000000019798c0e4 objc_exception_throw + 60\r\n2   CoreFoundation                      0x00000001871251f8 -[__NSDictionaryM setObject:forKey:] + 972\r\n3   PhotoLibrary                        0x0000000191df5aa8 __CreateInfoForImage + 772\r\n4   PhotoLibrary                        0x0000000191df5748 PLNotifyImagePickerOfImageAvailability + 28\r\n5   PhotoLibrary                        0x0000000191e41a10 -[PLImagePickerCameraView cropOverlay:didFinishSaving:] + 308\r\n6   PhotoLibrary                        0x0000000191e4200c -[PLImagePickerCameraView captureController:didCompleteResponse:forStillImageRequest:error:] + 1484\r\n7   CameraKit                           0x000000018d68eef0 -[CAMCaptureController _completedResponse:forRequest:error:] + 232\r\n8   CameraKit                           0x000000018d68e678 __56-[CAMCaptureController enqueueStillImageCaptureRequest:]_block_invoke_32113 + 268\r\n9   libdispatch.dylib                   0x0000000197fd13ac _dispatch_call_block_and_release + 24\r\n10  libdispatch.dylib                   0x0000000197fd136c _dispatch_client_callout + 16\r\n11  libdispatch.dylib                   0x0000000197fd5980 _dispatch_main_queue_callback_4CF + 932\r\n12  CoreFoundation                      0x00000001871f1fa4 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 12\r\n13  CoreFoundation                      0x00000001871f004c __CFRunLoopRun + 1492\r\n14  CoreFoundation                      0x000000018711d0a4 CFRunLoopRunSpecific + 396\r\n15  GraphicsServices                    0x00000001902b75a4 GSEventRunModal + 168\r\n16  UIKit                               0x000000018ba4eaa4 UIApplicationMain + 1488\r\n17  MyApp                          0x0000000100081ad8 main (main.m:16)\r\n18  libdyld.dylib                       0x0000000197ffaa08 start + 4"
    email: greg.cooksey@droidcloud.mobi
    modified: "2015-04-14T19:00:59.74578Z"
    number: "19735421"
    number_intvalue: 19735421
    originated: 02/05/2015
    parent_number: '&{NULL_VALUE}'
    product: iOS SDK
    product_version: 8.2 (12D5480a)
    reproducible: Sometimes
    resolved: No
    status: Duplicate
    title: UIImagePickerController sometimes crashes app while capturing photos
