apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "5581772"
    labels:
        datastore_id: "291"
data:
    classification: '&{NULL_VALUE}'
    created: "2008-11-17T04:44:12.73456Z"
    description: "05-Nov-2007 09:29 PM Sidney San Martin:\r\nSummary:\r\nIn Leopard, my MacBook Pro often loses internal USB devices after sleep. The keyboard/trackpad, IR receiver, and Bluetooth all appear to become nonfunctional. The kernel logs messages such as \"expected port to be suspended for conversion, but it is not!!\" (see attached) and USB Prober also shows suspend-related errors on the affected devices. The system continues running, and connecting an external keyboard/mouse allows operation. There seems to be some relation to AirPort. The cursor appears to lag and become jittery as the system scans for networks or associates to an access point, even during the Leopard Setup Assistant (this might be unrelated), and the issue is more likely to present if the computer was associated to a network before sleep. In particular having been connected to the 802.1X network on my college campus appears to make occurrences much more likely.\r\n\r\nSteps to Reproduce:\r\n1. Boot system\r\n2. (Optional) Associate to a wireless network (issue appears to present more readily, but not exclusively, in this state)\r\n3. Sleep the system (lid close)\r\n4. Wake the system (lid open)\r\n\r\nExpected Results:\r\nSystem resumes normally, remains associated to network (if connected).\r\n\r\nActual Results:\r\nIf connected to 802.1X, system is no longer connected (part of greater issue; will submit in a different bug report). System log shows messages related to being unable to locate preferred networks and shattered expectations of USB suspend states. Internal keyboard, trackpad, IR, bluetooth are all nonfunctional.\r\n\r\nRegression:\r\nThe issue has occurred in Leopard, not in Tiger under identical circumstances (installed software, hardware configuration, OS configuration). I've been unable to isolate any other variables.\r\n\r\nNotes:\r\nI originally experienced this on an earlier-revision Santa Rosa MacBook Pro with an upgrade install of Leopard. I called AppleCare to discuss the issue, and they initiated a capture through the local Apple Store so that the system could be examined for hardware defect. The replacement computer, a current revision MacBook Pro of identical spec, exhibited the same issue, (with an erase and install of Leopard).\r\nRBIOKitHelper.kext was installed by Remote Buddy on both systems. This provided an immediate indicator (through a menu bar item) that the IR Receiver was inaccessible. Though I have no reason to believe that this extension is contributing to the issue, it is a possibility.\r\nAs mentioned above, there appears to be some relation to AirPort. One of the attached logs shows some part of networking (messages come from several processes) going into a loop (the log is long; search for \"192.168.123.1\", an address that is printed each loop (I don't believe either system was ever exposed to a 192.168.123.0 subnet)). I was able to reproduce the issue ONCE on a safe boot, however, with AirPort (and RBIOKitHelper.kext) disabled. Also, once, the trackpad became functional 10-20 seconds after wake, but keyboard remained unresponsive (strange, as they're the same device).\r\n\r\nAttached:\r\nConcise Failure - System log output from my current system, trimmed to just the block of USB errors.\r\nLong Failure - Full system log from my previous system at the time of failure. Again, searching for the string \"192.168.123.1\" will get you near the relevant portion.\r\nUSB Bus Probe Old - USB Prober output from old system during issue.\r\nUSB Bus Probe New - USB Prober output from current system during issue.\r\n\r\n\r\n'MacBook Pro Losing Internal USB On Wake.zip' and 'sidney-mbp.spx'were successfully uploaded\r\n\r\n07-Nov-2007 05:27 PM Sidney San Martin:\r\nI have been in contact with the campus Macintosh User Group, and others have been experiencing this identical issue with various Macs running Leopard, all after connecting to the 802.1x network (PEAP).\r\n\r\n12-Nov-2007 12:16 PM [redacted]:\r\nThis bug has been closed as Duplicate.  Engineering is aware and tracking this issue under Bug ID listed in the above bug State (Duplicate/XXXX). You may check status of the original bug report anytime by updating this bug report."
    email: SidneySM@gmail.com
    modified: "2011-08-28T05:50:52.271468Z"
    number: "5581772"
    number_intvalue: 5581772
    originated: '&{NULL_VALUE}'
    parent_number: "5511875"
    product: '&{NULL_VALUE}'
    product_version: '&{NULL_VALUE}'
    reproducible: '&{NULL_VALUE}'
    resolved: '&{NULL_VALUE}'
    status: Duplicate/5511875
    title: 'Leopard: MacBook Pro Losing Internal USB On Wake'
