apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "5581983"
    labels:
        datastore_id: "34"
data:
    classification: Enhancement
    created: "2008-11-16T12:21:43.498405Z"
    description: "Summary: \r\nIn the 64-bit non-fragile Objective-C runtime, synthesized properties can use ivars not declared in the interface block. However, it is not possible to use non-property instance variables this way. There is no logical reason, in a non-fragile runtime, to require that private instance variables must be declared in the public interface; this requirement is merely an artefact of the way the fragile runtime works.\r\n\r\nSteps to Reproduce:\r\n1. Create a new ObjC class. (Sample provided.)\r\n2. In its interface, do not declare any instance variables.\r\n3. In its implementation, add an instance variable declaration.\r\n4. Add a method attempting to use the ivar declared in (3).\r\n5. Compile.\r\n\r\nExpected Results:\r\nSuccessful compilation. The instance variable(s) declared in the @implementation block should be added to those declared in the @interface, if any, and be accessible as normal.\r\n\r\nActual Results:\r\nThis usage is not supported.\r\nerror: inconsistent instance variable specification\r\nerror: ‘testIvar’ undeclared (first use in this function)\r\n\r\n\r\nRegression:\r\nn/a\r\n\r\nNotes:\r\nMy specific goal is to have a property on an immutable class which is read-only and has no ivar declaration in the header (when compiled in 64-bit mode). It is of course necessary to write the property once, on init. With explicit ivar declarations, this is easy. Without, it is not possible to write to the ivar generated by the @synthesize directive, nor is it possible to declare the ivar privately as per the above.\r\n\r\nMy workaround has been to add a second property declaration of the form @property (readwrite, setter=priv_initValue:) to an internal category. This isn’t particularly satisfactory, though."
    email: jens.ayton@gmail.com
    modified: "2011-08-28T05:50:51.900793Z"
    number: "5581983"
    number_intvalue: 5581983
    originated: 06-Nov-2007 02:37 AM
    parent_number: "5277913"
    product: Developer Tools
    product_version: ""
    reproducible: ""
    resolved: ""
    status: Duplicate/5277913
    title: 64-bit Objective-C should allow hidden ivar declarations
