apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "8522995"
    labels:
        datastore_id: "718401"
data:
    classification: medium
    created: "2010-10-07T06:45:35.353072Z"
    description: "07-Oct-2010 08:44 AM Martin Hering:\r\n'airport_proxy.png' was successfully uploaded\r\n\r\n07-Oct-2010 08:44 AM Martin Hering:\r\nSummary:\r\n\r\nWe are using CFNetworkCopySystemProxySettings to get the proxy settings of the user in our app. However this API has an error when user HTTP Authentication settings. It won't return the HTTPUser key when certain UI steps has been used by the user (see below).\r\n\r\nSteps to Reproduce:\r\n\r\nI have set my Airport Proxy Settings like on the screenshot below. The API returns:\r\n\r\n<CFBasicHash 0x1039e45f0 [0x7fff705a4f20]>{type = immutable dict, count = 6,\r\nentries =>\r\n\t1 : <CFString 0x10391b250 [0x7fff705a4f20]>{contents = \"ExceptionsList\"} = <CFArray 0x10393bc10 [0x7fff705a4f20]>{type = immutable, count = 2, values = (\r\n\t0 : <CFString 0x103939c10 [0x7fff705a4f20]>{contents = \"*.local\"}\r\n\t1 : <CFString 0x103968c20 [0x7fff705a4f20]>{contents = \"169.254/16\"}\r\n)}\r\n\t2 : <CFString 0x1039197b0 [0x7fff705a4f20]>{contents = \"HTTPPort\"} = <CFNumber 0x10391e460 [0x7fff705a4f20]>{value = +80, type = kCFNumberSInt64Type}\r\n\t3 : <CFString 0x7fff70583ed0 [0x7fff705a4f20]>{contents = \"HTTPEnable\"} = <CFNumber 0x102800e00 [0x7fff705a4f20]>{value = +1, type = kCFNumberSInt32Type}\r\n\t4 : <CFString 0x7fff705917b0 [0x7fff705a4f20]>{contents = \"FTPPassive\"} = <CFNumber 0x102800e00 [0x7fff705a4f20]>{value = +1, type = kCFNumberSInt32Type}\r\n\t5 : <CFString 0x10393a240 [0x7fff705a4f20]>{contents = \"HTTPProxy\"} = <CFString 0x103914900 [0x7fff705a4f20]>{contents = \"10.0.1.201\"}\r\n\t6 : <CFString 0x10393a120 [0x7fff705a4f20]>{contents = \"HTTPUser\"} = <CFString 0x1039e2a80 [0x7fff705a4f20]>{contents = \"admin\"}\r\n}\r\n\r\nwhich is correct!\r\n\r\nI now uncheck the checkbox for \"Web Proxy (HTTP)\". The API now returns:\r\n\r\n<CFBasicHash 0x1014e7780 [0x7fff705a4f20]>{type = immutable dict, count = 3,\r\nentries =>\r\n\t1 : <CFString 0x1014e7590 [0x7fff705a4f20]>{contents = \"ExceptionsList\"} = <CFArray 0x1014e7930 [0x7fff705a4f20]>{type = immutable, count = 2, values = (\r\n\t0 : <CFString 0x1014e5dc0 [0x7fff705a4f20]>{contents = \"*.local\"}\r\n\t1 : <CFString 0x1014e7fb0 [0x7fff705a4f20]>{contents = \"169.254/16\"}\r\n)}\r\n\t3 : <CFString 0x7fff708bbeb0 [0x7fff705a4f20]>{contents = \"HTTPEnable\"} = <CFNumber 0x1012111c0 [0x7fff705a4f20]>{value = +0, type = kCFNumberSInt32Type}\r\n\t4 : <CFString 0x7fff705917b0 [0x7fff705a4f20]>{contents = \"FTPPassive\"} = <CFNumber 0x101400e00 [0x7fff705a4f20]>{value = +1, type = kCFNumberSInt32Type}\r\n}\r\n\r\nwhich is still correct, since I disabled HTTP proxies altogether.\r\n\r\nNow I activate HTTP proxies again by checking the same checkbox. Now the API returns:\r\n\r\n<CFBasicHash 0x1044938f0 [0x7fff705a4f20]>{type = immutable dict, count = 5,\r\nentries =>\r\n\t1 : <CFString 0x1044934d0 [0x7fff705a4f20]>{contents = \"ExceptionsList\"} = <CFArray 0x104493870 [0x7fff705a4f20]>{type = immutable, count = 2, values = (\r\n\t0 : <CFString 0x10443b2c0 [0x7fff705a4f20]>{contents = \"*.local\"}\r\n\t1 : <CFString 0x1044cc040 [0x7fff705a4f20]>{contents = \"169.254/16\"}\r\n)}\r\n\t2 : <CFString 0x104492e40 [0x7fff705a4f20]>{contents = \"HTTPPort\"} = <CFNumber 0x1044938b0 [0x7fff705a4f20]>{value = +80, type = kCFNumberSInt64Type}\r\n\t3 : <CFString 0x7fff70583ed0 [0x7fff705a4f20]>{contents = \"HTTPEnable\"} = <CFNumber 0x103000860 [0x7fff705a4f20]>{value = +1, type = kCFNumberSInt32Type}\r\n\t4 : <CFString 0x7fff705917b0 [0x7fff705a4f20]>{contents = \"FTPPassive\"} = <CFNumber 0x103000860 [0x7fff705a4f20]>{value = +1, type = kCFNumberSInt32Type}\r\n\t5 : <CFString 0x10440ce80 [0x7fff705a4f20]>{contents = \"HTTPProxy\"} = <CFString 0x1044938d0 [0x7fff705a4f20]>{contents = \"10.0.1.201\"}\r\n}\r\n\r\nWHICH IS INCORRECT. The key HTTPUser is missing although it is defined in the user interface. How software now brings an HTTP error 407 saying that the proxy needs authentications."
    email: vemedio@googlemail.com
    modified: "2011-08-28T05:39:41.061036Z"
    number: "8522995"
    number_intvalue: 8522995
    originated: 07-Oct-2010 08:44 AM
    parent_number: '&{NULL_VALUE}'
    product: Mac OS X
    product_version: 10.6.4 (10F569)
    reproducible: always
    resolved: ""
    status: Open
    title: CFNetworkCopySystemProxySettings not returning HTTPUser
