apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "8115465"
    labels:
        datastore_id: "451402"
data:
    classification: Serious Bug
    created: "2010-06-21T23:27:18.420768Z"
    description: "21-Jun-2010 05:24 PM Tom Harrington:\r\nSummary:\r\n\r\nWhen using a Macbook Air (MacBookAir2,1) on an 802.11n network, the Mac will frequently lose the ability to transmit and receive network data.  When this happens:\r\n\r\n1. The Mac continues to indicate that the 802.11n connection is operating\r\n2. The Mac continues to indicate that it has an IP address for its Airport connection\r\n3. No messages appear in the system console\r\n4. Other devices on the network (Mac OS X and iOS devices) do not experience any network problems\r\n\r\nThe problem occurs randomly and is not tied to network activity or a lack thereof. It has been observed to happen in the middle of a Time Machine backup over the local network and when there was no significant network activity.\r\n\r\nThe problem most frequently occurs after waking the Mac from sleep. The Mac connects to the network and operates normally for a short period, under 5 minutes, before losing its ability to communicate with the network.  The problem also occurs at other times, but this is the most frequent scenario.\r\n\r\nBizarrely, it's often possible to reestablish normal network communications by clicking on the Airport menu item and waiting briefly.  For example, the following ping results are typical of this behavior.  When the ping started, the Mac was in its non-communicating state, but I clicked the Airport menu item almost immediately after starting the ping and the connection soon resumed.\r\n\r\n$ ping shell.pcisys.net\r\nPING shell.pcisys.net (216.229.32.243): 56 data bytes\r\nRequest timeout for icmp_seq 0\r\nRequest timeout for icmp_seq 1\r\nRequest timeout for icmp_seq 2\r\nRequest timeout for icmp_seq 3\r\n64 bytes from 216.229.32.243: icmp_seq=4 ttl=252 time=227.851 ms\r\n64 bytes from 216.229.32.243: icmp_seq=5 ttl=252 time=254.626 ms\r\n64 bytes from 216.229.32.243: icmp_seq=6 ttl=252 time=201.859 ms\r\n64 bytes from 216.229.32.243: icmp_seq=7 ttl=252 time=68.010 ms\r\n64 bytes from 216.229.32.243: icmp_seq=8 ttl=252 time=48.274 ms\r\n64 bytes from 216.229.32.243: icmp_seq=9 ttl=252 time=48.067 ms\r\n\r\nI almost hate mentioning the Airport menu item because it seems so weird, but this behavior is very, very consistent.\r\n\r\nSteps to Reproduce:\r\n\r\nOn this Mac, just connect to an 802.11n network and wait.  It'll happen.\r\n\r\nExpected Results:\r\n\r\nOnce connected, the connection would continue so long as the network was in range and active. If the Mac were unable to communicate, some sort of warning or error would be visible, at least in the system console if nowhere else.\r\n\r\nActual Results:\r\n\r\nSee above.\r\n\r\nRegression:\r\n\r\n1. This Mac has experienced this problem on previous versions of Mac OS X. I have never reported it before because I wasn't (and still aren't) sure that this report doesn't isn't too vague to be meaningful.\r\n\r\n2. This Mac has no network issues when connected to 802.11g networks, only 802.11n.\r\n\r\n3. Another Mac on the same network (MacBook2,1) does not experience any similar network issues. Also, a Wifi iPad on the same network has no problems.\r\n\r\n\r\n24-Jun-2010 08:52 AM Tom Harrington:\r\nI'm attaching system console entries from a networking failure today. The sequence of events was:\r\n\r\n1. Woke the system at 9:36AM.\r\n2. Networking appeared to work normally; Mail.app downloaded new messages, for example.\r\n3. Shortly afterward (no later than 9:40AM) I was unable to load a web page in Safari. Safari showed its spinning activity indicator but made no visible progress.\r\n4. At this time I verified that pings to my ISP failed.\r\n5. While the ping command was running I clicked on the Airport menu item. Within a few seconds, pings succeeded.\r\n\r\nLogs from Console's \"all messages\" section for this period follow.\r\n\r\n6/24/10 7:54:45 AM\tkernel\tSystem SafeSleep\r\n6/24/10 9:36:34 AM\tkernel\thibernate_page_list_setall start\r\n6/24/10 9:36:34 AM\tkernel\thibernate_page_list_setall time: 275 ms\r\n6/24/10 9:36:34 AM\tkernel\tpages 420223, wire 48666, act 179211, inact 19438, spec 38, zf 2020, throt 0, could discard act 93543 inact 29882 purgeable 20794 spec 26631\r\n6/24/10 9:36:34 AM\tkernel\thibernate_page_list_setall found pageCount 249373\r\n6/24/10 9:36:34 AM\tkernel\tIOHibernatePollerOpen, ml_get_interrupts_enabled 0\r\n6/24/10 9:36:34 AM\tkernel\tIOHibernatePollerOpen(0)\r\n6/24/10 9:36:34 AM\tkernel\twriting 247893 pages\r\n6/24/10 9:36:34 AM\tkernel\timage1Size 101623296\r\n6/24/10 9:36:34 AM\tkernel\tPMStats: Hibernate write took 12051 ms\r\n6/24/10 9:36:34 AM\tkernel\tall time: 12051 ms, comp time: 2457 ms, deco time: 0 ms, \r\n6/24/10 9:36:34 AM\tkernel\timage 503361024, uncompressed 1015664640 (247965), compressed 499985888 (49%), sum1 863f464b, sum2 55d246b\r\n6/24/10 9:36:34 AM\tkernel\thibernate_write_image done(0)\r\n6/24/10 9:36:34 AM\tkernel\tsleep\r\n6/24/10 9:36:34 AM\tkernel\tWake reason = OHC1\r\n6/24/10 9:36:34 AM\tkernel\tSystem Wake\r\n6/24/10 9:36:34 AM\tkernel\tPrevious Sleep Cause: 5\r\n6/24/10 9:36:34 AM\tkernel\tAirPort: Link Down on en0. Reason 4 (Disassociated due to inactivity).\r\n6/24/10 9:36:34 AM\tkernel\tThe USB device Apple Internal Keyboard / Trackpad (Port 6 of Hub at 0x4000000) may have caused a wake by issuing a remote wakeup\r\n6/24/10 9:36:34 AM\tconfigd[15]\tnetwork configuration changed.\r\n6/24/10 9:36:38 AM\tkernel\tEIR is supported.\r\n6/24/10 9:36:38 AM\tkernel\tSSP is supported.\r\n6/24/10 9:36:38 AM\tkernel\tAppleUSBEthernet::monitorLinkStatus - Link down.\r\n6/24/10 9:36:38 AM\tkernel\tAuth result for: 00:24:b2:2f:16:44 MAC AUTH succeeded\r\n6/24/10 9:36:38 AM\tkernel\tAirPort: Link Up on en0\r\n6/24/10 9:36:38 AM\tkernel\tAirPort: RSN handshake complete on en0\r\n6/24/10 9:36:38 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect on /Volumes/tph failed 60.\r\n6/24/10 9:36:38 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect to the server /Volumes/tph\r\n6/24/10 9:36:38 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect on /Volumes/tph failed 65.\r\n6/24/10 9:36:38 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  sleep for 4 seconds and then try again\r\n6/24/10 9:36:38 AM\tconfigd[15]\tnetwork configuration changed.\r\n6/24/10 9:36:38 AM\tmDNSResponder[16]\tUpdate atomic-air._device-info._tcp.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:38 AM\tmDNSResponder[16]\thndlRecordUpdateReply: Registration of record atomic-air._device-info._tcp.atomicbird.members.mac.com. type 16 failed with error -65537\r\n6/24/10 9:36:38 AM\tmDNSResponder[16]\tUpdate _kerberos.atomic-air.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:38 AM\tmDNSResponder[16]\thndlRecordUpdateReply: Registration of record _kerberos.atomic-air.atomicbird.members.mac.com. type 16 failed with error -65537\r\n6/24/10 9:36:39 AM\tmDNSResponder[16]\tUpdate _kerberos.atomic-air.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:39 AM\tmDNSResponder[16]\thndlRecordUpdateReply: Registration of record _kerberos.atomic-air.atomicbird.members.mac.com. type 16 failed with error -65537\r\n6/24/10 9:36:39 AM\tmDNSResponder[16]\tUpdate atomic-air.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:39 AM\tmDNSResponder[16]\thndlRecordUpdateReply: Registration of record atomic-air.atomicbird.members.mac.com. type 28 failed with error -65537\r\n6/24/10 9:36:40 AM\tkernel\tAppleUSBEthernet::monitorLinkStatus - Link up at 100 Mbps - Full Duplex (PHY regs 5,6:0xcde1,0x000b)\r\n6/24/10 9:36:41 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect to the server /Volumes/tph\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tUpdate atomic-air._ssh._tcp.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tError -65537 for registration of service atomic-air._ssh._tcp.atomicbird.members.mac.com.\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tUpdate _autotunnel._udp.atomic-air.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\thndlRecordUpdateReply: Registration of record _autotunnel._udp.atomic-air.atomicbird.members.mac.com. type 33 failed with error -65537\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tUpdate atomic-air._sftp-ssh._tcp.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tError -65537 for registration of service atomic-air._sftp-ssh._tcp.atomicbird.members.mac.com.\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tUpdate atomic-air._rfb._tcp.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tError -65537 for registration of service atomic-air._rfb._tcp.atomicbird.members.mac.com.\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tUpdate Harry._http._tcp.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:44 AM\tmDNSResponder[16]\tError -65537 for registration of service Harry._http._tcp.atomicbird.members.mac.com.\r\n6/24/10 9:36:45 AM\tmDNSResponder[16]\tUpdate atomic-air._afpovertcp._tcp.atomicbird.members.mac.com. failed with rcode 2\r\n6/24/10 9:36:45 AM\tmDNSResponder[16]\tError -65537 for registration of service atomic-air._afpovertcp._tcp.atomicbird.members.mac.com.\r\n6/24/10 9:36:56 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect on /Volumes/tph failed 60.\r\n6/24/10 9:36:56 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect to the server /Volumes/tph\r\n6/24/10 9:36:56 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect on /Volumes/tph failed 64.\r\n6/24/10 9:36:56 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  sleep for 8 seconds and then try again\r\n6/24/10 9:36:58 AM\tconfigd[15]\tnetwork configuration changed.\r\n6/24/10 9:36:59 AM\tntpd[27]\ttime reset -2.334521 s\r\n6/24/10 9:37:01 AM\tKernelEventAgent[40]\ttid 00000000 received event(s) VQ_NOTRESP (1)\r\n6/24/10 9:37:01 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  connect to the server /Volumes/tph\r\n6/24/10 9:37:01 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  Logging in with uam 10 /Volumes/tph\r\n6/24/10 9:37:01 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  Restoring session /Volumes/tph\r\n6/24/10 9:37:01 AM\tkernel\tAFP_VFS afpfs_DoReconnect:  get the reconnect token\r\n6/24/10 9:37:09 AM\tcom.apple.backupd[2470]\tStarting standard backup\r\n6/24/10 9:37:09 AM\tcom.apple.backupd[2470]\tAttempting to mount network destination using URL: afp://admin@maisyco._afpovertcp._tcp.local/Ark\r\n6/24/10 9:37:39 AM\tcom.apple.backupd[2470]\tNetAuthConnectToServerSync failed with error: 64 for url: afp://admin@maisyco._afpovertcp._tcp.local/Ark\r\n6/24/10 9:38:14 AM\tSystem Preferences[2475]\t.scriptSuite warning for result type of command 'timedLoad' in suite 'SystemPreferences': the type NSNumber ('long') doesn't match the result Apple event code ('doub').\r\n6/24/10 9:38:14 AM\t[0x0-0x9f09f].com.apple.systempreferences[2475]\tCouldn't find any matches.\r\n6/24/10 9:38:39 AM\tcom.apple.backupd[2470]\tFailed to resolve network service using name = maisyco type = _afpovertcp._tcp domain = local.\r\n6/24/10 9:38:39 AM\tcom.apple.launchd[1]\t(com.apple.netauth.sysagent[2471]) Exited with exit code: 255\r\n6/24/10 9:38:44 AM\tcom.apple.backupd[2470]\tBackup failed with error: 19\r\n6/24/10 9:39:39 AM\tlogin[2480]\tUSER_PROCESS: 2480 ttys002\r\n6/24/10 9:39:46 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:39:46 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:39:46 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:39:46 AM\tTweetie[179]\tmessages response error Error Domain=NSURLErrorDomain Code=-1001 UserInfo=0x11828f270 \"The request timed out.\" Underlying Error=(Error Domain=kCFErrorDomainCFNetwork Code=-1001 UserInfo=0x115695910 \"The request timed out.\")\r\n6/24/10 9:39:46 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:39:46 AM\tTweetie[179]\tmessages response error Error Domain=NSURLErrorDomain Code=-1001 UserInfo=0x1156c5270 \"The request timed out.\" Underlying Error=(Error Domain=kCFErrorDomainCFNetwork Code=-1001 UserInfo=0x115633c80 \"The request timed out.\")\r\n6/24/10 9:39:48 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:39:48 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:39:48 AM\tTweetie[179]\tmessages response error Error Domain=NSURLErrorDomain Code=-1001 UserInfo=0x11822c030 \"The request timed out.\" Underlying Error=(Error Domain=kCFErrorDomainCFNetwork Code=-1001 UserInfo=0x1182733a0 \"The request timed out.\")\r\n6/24/10 9:39:48 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:39:48 AM\tTweetie[179]\tmessages response error Error Domain=NSURLErrorDomain Code=-1001 UserInfo=0x118249520 \"The request timed out.\" Underlying Error=(Error Domain=kCFErrorDomainCFNetwork Code=-1001 UserInfo=0x118226570 \"The request timed out.\")\r\n6/24/10 9:39:48 AM\tTweetie[179]\tNeed to specify 'data' and 'callback' to parse XML\r\n6/24/10 9:41:09 AM\t/Applications/Safari.app/Contents/MacOS/Safari[305]\tCGSKeyTranslateInitialize: KLGetCurrentKeyboardLayout or KLGetKeyboardLayoutProperty is not available, fall back to USA keymap\r\n\r\n\r\n02-Jul-2010 08:12 AM Tom Harrington:\r\nAnother example of how the 802.11n connection can come up when the Mac wakes from sleep but then stop communicating shortly after. In this case I was pinging my router every 5 seconds via \"ping -i 5 -A 192.168.0.1\". This command had been running when the Mac was put to sleep. On wake the next morning the following results appeared. Initially the connection came up, but then pings began to fail. When \"Request timeout for icmp_seq 5193\" appeared, I clicked and held the Airport menu and within a few seconds the connection was active.\r\n\r\nDuring this time this Mac continued to report (via ifconfig) that it had an IP address, and other Macs were able to communicate with the router.\r\n\r\n\r\nRequest timeout for icmp_seq 5169\r\nping: sendto: No route to host\r\nRequest timeout for icmp_seq 5170\r\nRequest timeout for icmp_seq 5171\r\n64 bytes from 192.168.0.1: icmp_seq=5172 ttl=64 time=1.598 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5173 ttl=64 time=1.401 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5174 ttl=64 time=2.621 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5175 ttl=64 time=1.762 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5176 ttl=64 time=2.625 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5177 ttl=64 time=2.024 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5178 ttl=64 time=2.908 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5179 ttl=64 time=3.398 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5180 ttl=64 time=2.915 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5181 ttl=64 time=2.884 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5182 ttl=64 time=2.902 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5183 ttl=64 time=2.810 ms\r\nRequest timeout for icmp_seq 5184\r\nRequest timeout for icmp_seq 5185\r\nRequest timeout for icmp_seq 5186\r\nRequest timeout for icmp_seq 5187\r\nRequest timeout for icmp_seq 5188\r\nRequest timeout for icmp_seq 5189\r\nRequest timeout for icmp_seq 5190\r\nRequest timeout for icmp_seq 5191\r\nRequest timeout for icmp_seq 5192\r\nRequest timeout for icmp_seq 5193\r\nRequest timeout for icmp_seq 5194\r\n64 bytes from 192.168.0.1: icmp_seq=5195 ttl=64 time=72.996 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5196 ttl=64 time=1.922 ms\r\n64 bytes from 192.168.0.1: icmp_seq=5197 ttl=64 time=2.894 ms\r\n\r\n\r\n09-Dec-2010 03:33 PM DARIN MARSHALL :\r\nEngineering has requested the following information in order to further investigate this issue: \r\n\r\nDoes this work better after updating to Mac OS X 10.6.5?\r\n\r\n---\r\n11-Dec-2010 05:46 PM Tom Harrington:\r\nYes, this is working much better with 10.6.5. I've tried to reproduce the problem repeatedly over the past two days and there's no sign that the problem still exists. Thanks, I really appreciate it.\r\n\r\nThis issue has been verified as resolved and can be closed."
    email: atomicbird@gmail.com
    modified: "2011-08-28T05:41:03.878006Z"
    number: "8115465"
    number_intvalue: 8115465
    originated: 21-Jun-2010 05:24 PM
    parent_number: '&{NULL_VALUE}'
    product: Mac OS X
    product_version: 10.6.4
    reproducible: Always
    resolved: 09-Dec-2010
    status: Resolved
    title: MacBook Air loses 802.11n connections
