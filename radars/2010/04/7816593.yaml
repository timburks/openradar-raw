apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "7816593"
    labels:
        datastore_id: "233401"
data:
    classification: Serious Bug
    created: "2010-04-01T05:47:47.767334Z"
    description: "Summary:\r\nApple's productivity apps, such as Mail will not open the print dialog if any of the printers on the network with Bonjour support use non-ASCII characters in their names. The problem is most evident with mail which consistantly throws an exception when trying to open a print dialog. The problem occurs only with an admin account and only in Apple software, not for instance Office or any Adobe software.\r\n\r\nSteps to reproduce:\r\nName your networked, Bonjour-enabled printer \"Mörkö\"\r\nTry printing from Mail using an admin account\r\n\r\nExpected results:\r\nPrinting should work. There should be a printer named \"Mörkö\" in the Nearby Printers list if it hasn't been added yet.\r\nThe printers should also be browsable in System Preferences > Print & Fax > Add printer\r\n\r\nActual results:\r\nThe print dialog will either not open at all and throw the following exception:\r\n31.3.2010 13.54.02\tMail[3276]\tAn exception was thrown '*** -[NSCFDictionary setObject:forKey:]: attempt to insert nil key'. Stack trace:\r\n(\r\n\t0   CoreFoundation                      0x00007fff857a1444 __exceptionPreprocess + 180\r\n\t1   libobjc.A.dylib                     0x00007fff876ea0f3 objc_exception_throw + 45\r\n\t2   CoreFoundation                      0x00007fff857a1267 +[NSException raise:format:arguments:] + 103\r\n\t3   CoreFoundation                      0x00007fff857a11f4 +[NSException raise:format:] + 148\r\n\t4   Foundation                          0x00007fff87d29a84 -[NSCFDictionary setObject:forKey:] + 164\r\n\t5   libSystem.B.dylib                   0x00007fff84c05273 handle_browse_response + 236\r\n\t6   libSystem.B.dylib                   0x00007fff84c05047 DNSServiceProcessResult + 717\r\n\t7   PrintCocoaUI                        0x00000001188170c5 RunningAsRoot + 84360\r\n\t8   Foundation                          0x00007fff87d3785a _nsnote_callback + 167\r\n\t9   CoreFoundation                      0x00007fff85749e3a __CFXNotificationPost + 954\r\n\t10  CoreFoundation                      0x00007fff857363e8 _CFXNotificationPostNotification + 200\r\n\t11  Foundation                          0x00007fff87d2e7c4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 101\r\n\t12  Mail                                0x0000000100002611 0x0 + 4294977041\r\n\t13  Foundation                          0x00007fff87df9167 _performFileHandleSource + 1254\r\n\t14  CoreFoundation                      0x00007fff8573f271 __CFRunLoopDoSources0 + 1361\r\n\t15  CoreFoundation                      0x00007fff8573d469 __CFRunLoopRun + 873\r\n\t16  CoreFoundation                      0x00007fff8573cc2f CFRunLoopRunSpecific + 575\r\n\t17  Foundation                          0x00007fff87d72a24 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 270\r\n\t18  Mail                                0x00000001000b1b85 0x0 + 4295695237\r\n\t19  AppKit                              0x00007fff8733accf -[NSView(NSPrinting2) _knowsPagesFirst:last:] + 168\r\n\t20  AppKit                              0x00007fff87194333 -[NSConcretePrintOperation(NSInternal) _validatePagination] + 198\r\n\t21  AppKit                              0x00007fff873a9c8b -[NSPrintPreviewController start] + 811\r\n\t22  Foundation                          0x00007fff87d3785a _nsnote_callback + 167\r\n\t23  CoreFoundation                      0x00007fff85749e3a __CFXNotificationPost + 954\r\n\t24  CoreFoundation                      0x00007fff857363e8 _CFXNotificationPostNotification + 200\r\n\t25  Foundation                          0x00007fff87d2e7c4 -[NSNotificationCenter postNotificationName:object:userInfo:] + 101\r\n\t26  Mail                                0x0000000100002611 0x0 + 4294977041\r\n\t27  PrintCocoaUI                        0x000000011880eacb RunningAsRoot + 50062\r\n\t28  PrintCocoaUI                        0x00000001187ff9a4 0x0 + 4706007460\r\n\t29  PrintCocoaUI                        0x0000000118800b43 0x0 + 4706011971\r\n\t30  PrintCocoaUI                        0x00000001187ff513 0x0 + 4706006291\r\n\t31  PrintCocoaUI                        0x000000011880c9ca RunningAsRoot + 41613\r\n\t32  PrintCocoaUI                        0x000000011880c2de RunningAsRoot + 39841\r\n\t33  AppKit                              0x00007fff86d7795d -[NSWindowController _windowDidLoad] + 538\r\n\t34  AppKit                              0x00007fff86d15113 -[NSWindowController window] + 112\r\n\t35  AppKit                              0x00007fff87198462 -[NSPrintPanel beginSheetWithPrintInfo:modalForWindow:delegate:didEndSelector:contextInfo:] + 627\r\n\t36  AppKit                              0x00007fff87196b51 -[NSConcretePrintOperation runOperationModalForWindow:delegate:didRunSelector:contextInfo:] + 478\r\n\t37  Mail                                0x00000001000b095f 0x0 + 4295690591\r\n\t38  AppKit                              0x00007fff86e8409a -[NSApplication sendAction:to:from:] + 95\r\n\t39  AppKit                              0x00007fff86ea8602 -[NSMenuItem _corePerformAction] + 365\r\n\t40  AppKit                              0x00007fff86ea836c -[NSCarbonMenuImpl performActionWithHighlightingForItemAtIndex:] + 121\r\n\t41  AppKit                              0x00007fff86e8e009 -[NSMenu performKeyEquivalent:] + 272\r\n\t42  AppKit                              0x00007fff86e8cdb1 -[NSApplication _handleKeyEquivalent:] + 559\r\n\t43  AppKit                              0x00007fff86d5d9e1 -[NSApplication sendEvent:] + 3630\r\n\t44  Mail                                0x00000001000340a7 0x0 + 4295180455\r\n\t45  AppKit                              0x00007fff86cf4796 -[NSApplication run] + 474\r\n\t46  AppKit                              0x00007fff86ced468 NSApplicationMain + 364\r\n\t47  Mail                                0x0000000100002150 0x0 + 4294975824\r\n\t48  ???                                 0x0000000000000002 0x0 + 2\r\n)\r\n\r\nor sometimes it will open but the UI will be unusable (including not being able to cancel the print operation).\r\n*No* networked printer is browsable in the Printer Browser.\r\n\r\nRegression:\r\nThe problem only occurs when the user is an administrator and the machine is on the same subnet as the printer. The specific printer model in use was a Xerox Phaser 7750.\r\n\r\nNotes:\r\nEven if this turns out to be a compatibility issue with some Xerox printers or a Xerox bug, OS X should handle this situation better than just completely failing to print."
    email: filipp@mac.com
    modified: "2011-08-28T05:42:04.870412Z"
    number: "7816593"
    number_intvalue: 7816593
    originated: 01-Apr-2010 08:45 AM
    parent_number: '&{NULL_VALUE}'
    product: Mac OS X
    product_version: 10.6.3/10D573
    reproducible: Always
    resolved: 01-June-2010
    status: Closed
    title: Non-ascii characters in printer name breaks printing from Apple apps
