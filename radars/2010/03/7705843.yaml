apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "7705843"
    labels:
        datastore_id: "164423"
data:
    classification: Performance
    created: "2010-03-02T10:43:08.381007Z"
    description: "02-Mar-2010 11:40 AM Mike Tyson:\r\n'iPhoto-Blocking.zip' was successfully uploaded\r\n\r\n02-Mar-2010 11:40 AM Mike Tyson:\r\nSummary: \r\nUpon startup, iPhoto performs blocking network operations on the main thread\r\n\r\nSteps to Reproduce:\r\n1. Start iPhoto\r\n2. iPhoto hangs while network operation completes - this is particularly apparent on a slow internet connection\r\n\r\nExpected Results:\r\nNetwork operations occur on a thread, without blocking the interface\r\n\r\nActual Results:\r\nOperations occur on the main thread, blocking the interface\r\n\r\nRegression:\r\nUnknown\r\n\r\nNotes:\r\nSee attached 'sample' output, showing use of network operations on main thread.\r\n\r\nAnalysis of sampling iPhoto (pid 40953) every 1 millisecond\r\nCall graph:\r\n    8664 Thread_1576445   DispatchQueue_1: com.apple.main-thread  (serial)\r\n      8664 0x349a\r\n        8664 0x122f06\r\n          8664 NSApplicationMain\r\n            8664 -[NSApplication run]\r\n              8664 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]\r\n                8664 _DPSNextEvent\r\n                  8664 AEProcessAppleEvent\r\n                    8664 aeProcessAppleEvent\r\n                      8664 dispatchEventAndSendReply(AEDesc const*, AEDesc*)\r\n                        8664 aeDispatchAppleEvent(AEDesc const*, AEDesc*, unsigned long, unsigned char*)\r\n                          8664 _NSAppleEventManagerGenericHandler\r\n                            8664 -[NSAppleEventManager dispatchRawAppleEvent:withRawReply:handlerRefCon:]\r\n                              8664 -[NSApplication(NSAppleEventHandling) _handleCoreEvent:withReplyEvent:]\r\n                                8664 -[NSApplication(NSAppleEventHandling) _handleAEOpen:]\r\n                                  8664 -[NSApplication _sendFinishLaunchingNotification]\r\n                                    8664 -[NSApplication _postDidFinishNotification]\r\n                                      8664 -[NSNotificationCenter postNotificationName:object:]\r\n                                        8664 -[NSNotificationCenter postNotificationName:object:userInfo:]\r\n                                          8664 _CFXNotificationPostNotification\r\n                                            8664 __CFXNotificationPost\r\n                                              8664 _nsnote_callback\r\n                                                8664 0x64cf7\r\n                                                  8664 0x9eb77\r\n                                                    8664 0x9d76e\r\n                                                      8664 0xa8ccf\r\n                                                        8664 0x27c86\r\n                                                          8664 0x3724c\r\n                                                            8664 0x35df4\r\n                                                              8664 0x5ba7fb\r\n                                                                8664 0x5ba9e5\r\n                                                                  8664 0x500a12\r\n                                                                    8664 +[NSString stringWithContentsOfURL:encoding:error:]\r\n                                                                      8664 -[NSString initWithContentsOfURL:encoding:error:]\r\n                                                                        8664 +[NSURLConnection sendSynchronousRequest:returningResponse:error:]\r\n                                                                          8664 CFURLConnectionSendSynchronousRequest\r\n                                                                            8664 CFRunLoopRunInMode\r\n                                                                              8664 CFRunLoopRunSpecific\r\n                                                                                8664 __CFRunLoopRun\r\n                                                                                  8664 mach_msg\r\n                                                                                    8664 mach_msg_trap\r\n    8664 Thread_1576451   DispatchQueue_2: com.apple.libdispatch-manager  (serial)\r\n      8664 start_wqthread\r\n        8664 _pthread_wqthread\r\n          8664 _dispatch_worker_thread2\r\n            8664 _dispatch_queue_invoke\r\n              8664 _dispatch_mgr_invoke\r\n                8664 kevent\r\n    8664 Thread_1576454\r\n      8664 thread_start\r\n        8664 _pthread_start\r\n          8664 __NSThread__main__\r\n            8664 -[NSThread main]\r\n              8664 -[XTThread run:]\r\n                8664 -[XTMsgQueue waitForMessage]\r\n                  8664 -[NSConditionLock lockWhenCondition:]\r\n                    8664 -[NSConditionLock lockWhenCondition:beforeDate:]\r\n                      8664 -[NSCondition waitUntilDate:]\r\n                        8664 pthread_cond_timedwait_relative_np\r\n                          8664 _pthread_cond_wait\r\n                            8664 semaphore_timedwait_signal_trap\r\n    8664 Thread_1576474\r\n      8664 thread_start\r\n        8664 _pthread_start\r\n          8664 __NSThread__main__\r\n            8664 -[NSThread main]\r\n              8664 -[XTThread run:]\r\n                8664 -[XTMsgQueue waitForMessage]\r\n                  8664 -[NSConditionLock lockWhenCondition:]\r\n                    8664 -[NSConditionLock lockWhenCondition:beforeDate:]\r\n                      8664 -[NSCondition waitUntilDate:]\r\n                        8664 pthread_cond_timedwait_relative_np\r\n                          8664 _pthread_cond_wait\r\n                            8664 semaphore_timedwait_signal_trap\r\n    8664 Thread_1576475\r\n      8664 thread_start\r\n        8664 _pthread_start\r\n          8664 __NSThread__main__\r\n            8664 -[NSThread main]\r\n              8664 -[XTRunLoopThread run:]\r\n                8664 -[NSRunLoop(NSRunLoop) runMode:beforeDate:]\r\n                  8664 CFRunLoopRunInMode\r\n                    8664 CFRunLoopRunSpecific\r\n                      8664 __CFRunLoopRun\r\n                        8664 mach_msg\r\n                          8664 mach_msg_trap\r\n    8664 Thread_1576477\r\n      8664 thread_start\r\n        8664 _pthread_start\r\n          8664 __NSThread__main__\r\n            8664 -[NSThread main]\r\n              8664 0x50074b\r\n                8664 pthread_cond_wait$UNIX2003\r\n                  8664 _pthread_cond_wait\r\n                    8664 __semwait_signal\r\n    8664 Thread_1576480\r\n      8664 thread_start\r\n        8664 _pthread_start\r\n          8664 __NSThread__main__\r\n            8664 -[NSThread main]\r\n              8664 0x50074b\r\n                8664 pthread_cond_wait$UNIX2003\r\n                  8664 _pthread_cond_wait\r\n                    8664 __semwait_signal\r\n    8664 Thread_1576481\r\n      8664 thread_start\r\n        8664 _pthread_start\r\n          8664 __NSThread__main__\r\n            8664 -[NSThread main]\r\n              8664 +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:]\r\n                8664 CFRunLoopRunInMode\r\n                  8664 CFRunLoopRunSpecific\r\n                    8664 __CFRunLoopRun\r\n                      8664 mach_msg\r\n                        8664 mach_msg_trap\r\n    8664 Thread_1576482\r\n      8664 thread_start\r\n        8664 _pthread_start\r\n          8664 si_async_launchpad\r\n            8664 si_addrinfo\r\n              8664 search_addrinfo\r\n                8664 _mdns_addrinfo\r\n                  8664 _mdns_search\r\n                    8664 _mdns_query_mDNSResponder\r\n                      8663 kevent\r\n                      1 _mdns_query_start\r\n                        1 DNSServiceQueryRecord\r\n                          1 deliver_request\r\n                            1 read_all\r\n                              1 recv$NOCANCEL$UNIX2003\r\n                                1 recvfrom$NOCANCEL$UNIX2003\r\n    8664 Thread_1576605\r\n      8664 start_wqthread\r\n        8664 _pthread_wqthread\r\n          8664 __workq_kernreturn\r\n\r\nTotal number in stack (recursive counted multiple, when >=5):\r\n        7       _pthread_start\r\n        7       thread_start\r\n        6       -[NSThread main]\r\n        6       __NSThread__main__\r\n\r\nSort by top of stack, same collapsed (when >= 5):\r\n        mach_msg_trap        25992\r\n        __semwait_signal        17328\r\n        semaphore_timedwait_signal_trap        17328\r\n        kevent        17327\r\n        __workq_kernreturn        8664\r\n\r\n\r\n\r\n\r\n\r\n\r\nAnalysis of sampling iPhoto (pid 40953) every 1 millisecond\r\nCall graph:\r\n    7953 Thread_1576445   DispatchQueue_1: com.apple.main-thread  (serial)\r\n      7953 0x349a\r\n        7953 0x122f06\r\n          7953 NSApplicationMain\r\n            7953 -[NSApplication run]\r\n              7953 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:]\r\n                7953 _DPSNextEvent\r\n                  7953 BlockUntilNextEventMatchingListInMode\r\n                    7953 ReceiveNextEventCommon\r\n                      7953 RunCurrentEventLoopInMode\r\n                        7953 CFRunLoopRunInMode\r\n                          7953 CFRunLoopRunSpecific\r\n                            7953 __CFRunLoopRun\r\n                              7953 _ShortTimerCallBack(__CFRunLoopTimer*, void*)\r\n                                7953 _netServiceDispatchCallbackForResolving\r\n                                  7953 0xacf6\r\n                                    7953 0xb0c6\r\n                                      7953 0x69b4d\r\n                                        7953 0x6a075\r\n                                          7953 +[NSHost hostWithName:]\r\n                                            7953 getnameinfo\r\n                                              7953 si_nameinfo\r\n                                                7953 search_host_byaddr\r\n                                                  7953 _mdns_hostbyaddr\r\n                                                    7953 _mdns_search\r\n                                                      7953 _mdns_query_mDNSResponder\r\n                                                        7953 kevent\r\n    7953 Thread_1576451   DispatchQueue_2: com.apple.libdispatch-manager  (serial)\r\n      7953 start_wqthread\r\n        7953 _pthread_wqthread\r\n          7953 _dispatch_worker_thread2\r\n            7953 _dispatch_queue_invoke\r\n              7953 _dispatch_mgr_invoke\r\n                7953 kevent\r\n    7953 Thread_1576454\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 -[XTThread run:]\r\n                7953 -[XTMsgQueue waitForMessage]\r\n                  7953 -[NSConditionLock lockWhenCondition:]\r\n                    7953 -[NSConditionLock lockWhenCondition:beforeDate:]\r\n                      7953 -[NSCondition waitUntilDate:]\r\n                        7953 pthread_cond_timedwait_relative_np\r\n                          7953 _pthread_cond_wait\r\n                            7953 semaphore_timedwait_signal_trap\r\n    7953 Thread_1576474\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 -[XTThread run:]\r\n                7953 -[XTMsgQueue waitForMessage]\r\n                  7953 -[NSConditionLock lockWhenCondition:]\r\n                    7953 -[NSConditionLock lockWhenCondition:beforeDate:]\r\n                      7953 -[NSCondition waitUntilDate:]\r\n                        7953 pthread_cond_timedwait_relative_np\r\n                          7953 _pthread_cond_wait\r\n                            7953 semaphore_timedwait_signal_trap\r\n    7953 Thread_1576475\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 -[XTRunLoopThread run:]\r\n                7953 -[NSRunLoop(NSRunLoop) runMode:beforeDate:]\r\n                  7953 CFRunLoopRunInMode\r\n                    7953 CFRunLoopRunSpecific\r\n                      7953 __CFRunLoopRun\r\n                        7953 mach_msg\r\n                          7953 mach_msg_trap\r\n    7953 Thread_1576477\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 0x50074b\r\n                7953 pthread_cond_wait$UNIX2003\r\n                  7953 _pthread_cond_wait\r\n                    7953 __semwait_signal\r\n    7953 Thread_1576480\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 0x50074b\r\n                7953 pthread_cond_wait$UNIX2003\r\n                  7953 _pthread_cond_wait\r\n                    7953 __semwait_signal\r\n    7953 Thread_1576481\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 +[NSURLConnection(NSURLConnectionReallyInternal) _resourceLoadLoop:]\r\n                7953 CFRunLoopRunInMode\r\n                  7953 CFRunLoopRunSpecific\r\n                    7953 __CFRunLoopRun\r\n                      7953 mach_msg\r\n                        7953 mach_msg_trap\r\n    7953 Thread_1577131\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 si_async_launchpad\r\n            7953 si_addrinfo\r\n              7953 search_addrinfo\r\n                7953 _mdns_addrinfo\r\n                  7953 _mdns_search\r\n                    7953 _mdns_query_mDNSResponder\r\n                      7952 kevent\r\n                      1 __spin_lock\r\n    7953 Thread_1577145\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 0x2cf07c\r\n            7953 0x2cf01b\r\n              7953 0x2888b5\r\n                7953 accept$UNIX2003\r\n    7953 Thread_1577147\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __CFSocketManager\r\n            7953 select$DARWIN_EXTSN\r\n    7953 Thread_1577155\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 -[XTRunLoopThread run:]\r\n                7953 -[NSRunLoop(NSRunLoop) runMode:beforeDate:]\r\n                  7953 CFRunLoopRunInMode\r\n                    7953 CFRunLoopRunSpecific\r\n                      7953 __CFRunLoopRun\r\n                        7953 mach_msg\r\n                          7953 mach_msg_trap\r\n    7953 Thread_1577156\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 __NSThread__main__\r\n            7953 -[NSThread main]\r\n              7953 -[XTRunLoopThread run:]\r\n                7953 -[NSRunLoop(NSRunLoop) runMode:beforeDate:]\r\n                  7953 CFRunLoopRunInMode\r\n                    7953 CFRunLoopRunSpecific\r\n                      7953 __CFRunLoopRun\r\n                        7953 mach_msg\r\n                          7953 mach_msg_trap\r\n    7953 Thread_1577157\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 si_async_launchpad\r\n            7953 si_addrinfo\r\n              7953 search_addrinfo\r\n                7953 _mdns_addrinfo\r\n                  7953 _mdns_search\r\n                    7953 _mdns_query_mDNSResponder\r\n                      7953 kevent\r\n    7953 Thread_1577194\r\n      7953 thread_start\r\n        7953 _pthread_start\r\n          7953 si_async_launchpad\r\n            7953 si_addrinfo\r\n              7953 search_addrinfo\r\n                7953 _mdns_addrinfo\r\n                  7953 _mdns_search\r\n                    7953 _mdns_query_mDNSResponder\r\n                      7953 kevent\r\n    7951 Thread_1576605\r\n      7951 start_wqthread\r\n        7951 _pthread_wqthread\r\n          7951 __workq_kernreturn\r\n    2 Thread_1576605   DispatchQueue_7: com.apple.root.default-overcommit-priority  (serial)\r\n      2 start_wqthread\r\n        2 _pthread_wqthread\r\n          2 _dispatch_worker_thread2\r\n            1 _CFAutoreleasePoolPop\r\n              1 pthread_self\r\n            1 _CFAutoreleasePoolPush\r\n\r\nTotal number in stack (recursive counted multiple, when >=5):\r\n        13       _pthread_start\r\n        13       thread_start\r\n        8       -[NSThread main]\r\n        8       __NSThread__main__\r\n        5       CFRunLoopRunInMode\r\n        5       CFRunLoopRunSpecific\r\n        5       __CFRunLoopRun\r\n        5       kevent\r\n\r\nSort by top of stack, same collapsed (when >= 5):\r\n        kevent        39764\r\n        mach_msg_trap        31812\r\n        __semwait_signal        15906\r\n        semaphore_timedwait_signal_trap        15906\r\n        accept$UNIX2003        7953\r\n        select$DARWIN_EXTSN        7953\r\n        __workq_kernreturn        7951"
    email: michael@tyson.id.au
    modified: "2011-08-28T05:42:25.057864Z"
    number: "7705843"
    number_intvalue: 7705843
    originated: 02-Mar-2010 11:40 AM
    parent_number: '&{NULL_VALUE}'
    product: iApps
    product_version: iPhoto 8.0.3
    reproducible: Always
    resolved: ""
    status: Open
    title: iPhoto performs blocking network operations on the main thread
