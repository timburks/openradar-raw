apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: FB9738554
    labels:
        datastore_id: "6184575793364992"
data:
    classification: file system
    created: "2021-11-04T00:34:43.980977Z"
    description: "Please bring back the ability to create HFS+ Encrypted partitions. This feature has been missing since Big Sur. On the other hand, APFS’ performance is unacceptable when applied to rotational drives.\r\n\r\n1. Take a 5400 rpm _rotational_ drive that is connected via USB.\r\n2. Partition the drive into two at 50% each.\r\n3. Format both halves of the partition as APFS Encrypted (Case Sensitive) - do not use APFS volumes for this.\r\n4. Use the second partition as a Time Machine drive.\r\n5. Use Time Machine to make backups until the partition is full and Time Machine had to delete some of the oldest backups.\r\n6. Take a Time Machine backup.\r\n7. While the backup is ongoing, _unplug_ the drive _without_ ejecting it.\r\n8. Restart the Mac\r\n9. Re-connect the drive and try another Time Machine backup.\r\n10. Screen-lock the Mac\r\n11. Unlock screen-lock of the Mac.\r\n12. Start Disk Utility and inspect the Time Machine partition.\r\n\r\n\r\nAt this point the Time Machine partition would be badly fragmented, it won’t even mount within five minutes. My experience is that the drive doesn’t even mount after hours of plugging in, despite fsck_apfs.log shows no errors. \r\n\r\nWhat’s worse, during that time the Mac often freezes. Screen lock often freeze with a beach ball. Disk Utility won’t show any disks. Command “diskutil apfs list” in the terminal freeze mid way and stuck at the Time Machine partition.\r\n\r\nThe people from Carbon Copy Cloner had done an objective analysis on APFS performance on rotational drives: https://bombich.com/blog/2019/09/12/analysis-apfs-enumeration-performance-on-rotational-hard-drives"
    email: sasmito.adibowo@gmail.com
    modified: "2021-11-04T00:34:43.98122Z"
    number: FB9738554
    number_intvalue: 9738554
    originated: 4 Nov 2021
    parent_number: '&{NULL_VALUE}'
    product: macOS
    product_version: 12.0.1
    reproducible: often
    resolved: ""
    status: Open
    title: Please bring back the ability to create HFS+ Encrypted Volumes
