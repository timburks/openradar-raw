apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: FB8545866
    labels:
        datastore_id: "4961482018127872"
data:
    classification: Bug
    created: "2021-06-22T19:58:48.093877Z"
    description: "Problem:\r\nApplication crashes when a row is deleted in a SwiftUI List populated with NSManagedObject instances.\r\nExample project: https://www.icloud.com/iclouddrive/0HttLnRotPLk2C3RmSXZ7NDXw#CoreData_SwiftUI\r\n\r\nSteps to reproduce:\r\nIn the example project attached, run the app in one of the simulators, tap “Add” in the top right corner to add a few items, swipe a row to delete it.\r\n\r\nWhat is expected:\r\nRow to be deleted and CoreData context to be saved.\r\n\r\nWhat happens:\r\nApplication crashes with the following log:\r\n\r\nSimultaneous accesses to 0x7fc8e5e29fb8, but modification requires exclusive access.\r\nPrevious access (a modification) started at SwiftUI`closure #2 in ListCoreCoordinator.tableView(_:commit:forRowAt:) + 53 (0x10af83e05).\r\nCurrent access (a read) started at:\r\n0    libswiftCore.dylib                 0x000000010e1b6890 swift_beginAccess + 568\r\n1    SwiftUI                            0x000000010af7fc50 ListCoreCoordinator.dataSource.getter + 50\r\n2    SwiftUI                            0x000000010af80720 ListCoreCoordinator.updateUITableView(_:to:transaction:) + 608\r\n3    SwiftUI                            0x000000010af7f510 ListRepresentable.updateUIView(_:context:) + 911\r\n4    SwiftUI                            0x000000010b3d7860 PlatformViewRepresentableAdaptor.updateViewProvider(_:context:) + 263\r\n5    SwiftUI                            0x000000010b0255a0 closure #1 in closure #1 in closure #4 in closure #1 in PlatformViewChild.updateValue() + 229\r\n6    SwiftUI                            0x000000010b0254f0 closure #1 in closure #4 in closure #1 in PlatformViewChild.updateValue() + 114\r\n7    SwiftUI                            0x000000010b2cd480 ViewRendererHost.performExternalUpdate(_:) + 186\r\n8    SwiftUI                            0x000000010b025480 closure #4 in closure #1 in PlatformViewChild.updateValue() + 73\r\n9    SwiftUI                            0x000000010b023ec0 closure #1 in PlatformViewChild.updateValue() + 2079\r\n10   SwiftUI                            0x000000010b023920 PlatformViewChild.updateValue() + 650\r\n11   SwiftUI                            0x000000010ad50820 partial apply for implicit closure #2 in implicit closure #1 in closure #1 in closure #1 in Attribute.init<A>(_:) + 26\r\n12   AttributeGraph                     0x0000000111669b0a AG::Graph::UpdateStack::update() + 505\r\n13   AttributeGraph                     0x000000011166a04a AG::Graph::update_attribute(AG::data::ptr<AG::Node>, bool) + 335\r\n14   AttributeGraph                     0x0000000111671f38 AG::Subgraph::update(unsigned int) + 781\r\n15   SwiftUI                            0x000000010b367b20 GraphHost.runTransaction() + 186\r\n16   SwiftUI                            0x000000010b36b6a0 GraphHost.runTransaction(_:) + 79\r\n17   SwiftUI                            0x000000010b36a140 GraphHost.flushTransactions() + 211\r\n18   SwiftUI                            0x000000010b3692b0 specialized GraphHost.asyncTransaction<A>(_:mutation:style:) + 484\r\n19   SwiftUI                            0x000000010af49de0 AttributeInvalidatingSubscriber.invalidateAttribute() + 236\r\n20   SwiftUI                            0x000000010af49d60 AttributeInvalidatingSubscriber.receive(_:) + 105\r\n21   SwiftUI                            0x000000010af4a3f0 protocol witness for Subscriber.receive(_:) in conformance AttributeInvalidatingSubscriber<A> + 16\r\n22   SwiftUI                            0x000000010b0d7af0 SubscriptionLifetime.Connection.receive(_:) + 89\r\n23   Combine                            0x0000000111b3f5f0 ObservableObjectPublisher.Inner.send() + 122\r\n24   Combine                            0x0000000111b3ebe0 ObservableObjectPublisher.send() + 801\r\n25   libswiftCoreData.dylib             0x000000010e5aa880 @objc NSManagedObject._willChange_Swift_Trampoline() + 114\r\n26   CoreData                           0x000000010a40956f -[NSManagedObjectContext _postObjectsDidChangeNotificationWithUserInfo:] + 773\r\n27   CoreData                           0x000000010a41828f -[NSManagedObjectContext _createAndPostChangeNotification:deletions:updates:refreshes:deferrals:wasMerge:] + 1825\r\n28   CoreData                           0x000000010a40a32d -[NSManagedObjectContext _processRecentChanges:] + 1041\r\n29   CoreData                           0x000000010a36e9bd -[NSManagedObjectContext save:] + 356\r\n30   CDSUI                              0x0000000109a9bcc0 closure #2 in closure #1 in ListView.body.getter + 439\r\n31   SwiftUI                            0x000000010ab318a0 partial apply for thunk for @escaping @callee_guaranteed (@in_guaranteed IndexSet) -> () + 17\r\n32   SwiftUI                            0x000000010b142a10 partial apply for thunk for @escaping @callee_guaranteed (@in_guaranteed IndexSet) -> (@out ()) + 17\r\n33   SwiftUI                            0x000000010ab31a30 DeleteInteraction.delete() + 125\r\n34   SwiftUI                            0x000000010aee2e20 SystemListDataSource.deleteCell(forRowAt:) + 64\r\n35   SwiftUI                            0x000000010b09e230 ShadowListDataSource.commitUpdates() + 963\r\n36   SwiftUI                            0x000000010af83dd0 closure #2 in ListCoreCoordinator.tableView(_:commit:forRowAt:) + 76\r\n37   SwiftUI                            0x000000010af83ab0 ListCoreCoordinator.tableView(_:commit:forRowAt:) + 455\r\n38   SwiftUI                            0x000000010af83e30 @objc ListCoreCoordinator.tableView(_:commit:forRowAt:) + 131\r\n39   UIKitCore                          0x00000001146a0891 -[UITableView _animateDeletionOfRowAtIndexPath:] + 188\r\n40   UIKitCore                          0x00000001146a901a __82-[UITableView _contextualActionForDeletingRowAtIndexPath:usingPresentationValues:]_block_invoke + 60\r\n41   UIKitCore                          0x00000001145f1b0b -[UIContextualAction executeHandlerWithView:completionHandler:] + 148\r\n42   UIKitCore                          0x00000001145ff9f8 -[UISwipeOccurrence _executeLifecycleForPerformedAction:sourceView:completionHandler:] + 514\r\n43   UIKitCore                          0x0000000114600047 -[UISwipeOccurrence _performSwipeAction:inPullView:swipeInfo:] + 621\r\n44   UIKitCore                          0x0000000114601d6d -[UISwipeOccurrence swipeActionPullView:tappedAction:] + 92\r\n45   UIKitCore                          0x0000000114609bae -[UISwipeActionPullView _tappedButton:] + 148\r\n46   UIKitCore                          0x00000001144711dc -[UIApplication sendAction:to:from:forEvent:] + 83\r\n47   UIKitCore                          0x0000000113d9ed49 -[UIControl sendAction:to:forEvent:] + 223\r\n48   UIKitCore                          0x0000000113d9efff -[UIControl _sendActionsForEvents:withEvent:] + 332\r\n49   UIKitCore                          0x0000000113d9d840 -[UIControl touchesEnded:withEvent:] + 500\r\n50   UIKitCore                          0x0000000113f9d9fa _UIGestureEnvironmentUpdate + 8849\r\n51   UIKitCore                          0x0000000113f9d207 -[UIGestureEnvironment _updateForEvent:window:] + 887\r\n52   UIKitCore                          0x00000001144ae829 -[UIWindow sendEvent:] + 4752\r\n53   UIKitCore                          0x000000011448927d -[UIApplication sendEvent:] + 633\r\n54   UIKit                              0x0000000136b6dc99 -[UIApplicationAccessibility sendEvent:] + 85\r\n55   UIKitCore                          0x00000001145163eb __processEventQueue + 13895\r\n56   UIKitCore                          0x0000000114510360 __eventFetcherSourceCallback + 104\r\n57   CoreFoundation                     0x000000010f732834 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17\r\n58   CoreFoundation                     0x000000010f732689 __CFRunLoopDoSource0 + 180\r\n59   CoreFoundation                     0x000000010f731b27 __CFRunLoopDoSources0 + 248\r\n60   CoreFoundation                     0x000000010f72c089 __CFRunLoopRun + 878\r\n61   CoreFoundation                     0x000000010f72b967 CFRunLoopRunSpecific + 567\r\n62   GraphicsServices                   0x0000000111532d28 GSEventRunModal + 139\r\n63   UIKitCore                          0x000000011446a8e3 -[UIApplication _run] + 912\r\n64   UIKitCore                          0x000000011446fb1f UIApplicationMain + 101\r\n65   libswiftUIKit.dylib                0x000000010ea0f750 UIApplicationMain(_:_:_:_:) + 98\r\n66   CDSUI                              0x0000000109a98ff0 static UIApplicationDelegate.main() + 122\r\n67   CDSUI                              0x0000000109a98fb0 static AppDelegate.$main() + 46\r\n68   CDSUI                              0x0000000109a99090 main + 41\r\n69   libdyld.dylib                      0x000000011022e414 start + 1"
    email: iltercengiz1@gmail.com
    modified: "2021-06-22T19:58:48.094073Z"
    number: FB8545866
    number_intvalue: 8545866
    originated: 27/08/2020
    parent_number: '&{NULL_VALUE}'
    product: SwiftUI
    product_version: iOS 14 and above
    reproducible: Always
    resolved: ""
    status: Open
    title: App crashes when CoreData item is deleted from SwiftUI List
