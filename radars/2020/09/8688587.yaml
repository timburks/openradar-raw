apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: "8688587"
    labels:
        datastore_id: "4949964794888192"
data:
    classification: Incorrect/Unexpected Behavior
    created: "2020-09-18T12:10:47.288303Z"
    description: "On iOS14 observed lag with an external keyboard\r\n\r\nThe lag appears significantly when typing while writing text in WKWebView.  The lag does not exist when using the onscreen keyboard in either of those situations, so it is only a problem with external keyboards.  The lag also does not appear to exist when using the Magic Keyboard in the native mail application.\r\n\r\nWhen WKWebView or UITextField are added to the modal controller view.  \r\n\r\nissue reproduccsed when call (modal style -UIModalPresentationPageSheet):\r\n\r\nUIStoryboard *storyboard = [UIStoryboard storyboardWithName:@\"Main_iPad\" bundle:[NSBundle mainBundle]];\r\nUIViewController *editNavController = [storyboard instantiateViewControllerWithIdentifier:@\"TestID\"];\r\neditNavController.modalPresentationStyle = UIModalPresentationPageSheet;\r\n[self presentViewController:editNavController animated:YES completion:nil];\r\n\r\n\r\nwhen changed to UIModalPresentationFullScreen the issue does not exist and no lag.\r\nNOTE: This is only iPad issue and this works in iOS13 but not in iOS14.\r\n\r\nlogs from the device logs:\r\n\r\n```\r\ndefault\t15:56:03.794111+0200\tbackboardd\tdestinations for Keyboard event: (<display: builtin; environment: keyboardFocus; pid: 725; bundleID: com.testapp.enterprise; token: 0x4AA65AC7>)\r\ndefault\t15:56:03.812751+0200\tbackboardd\tLcurrent=427.4086 Lr=1.4605 DR=200.0000 factor=0.0000\r\nerror\t15:56:03.816317+0200\tSpringBoard\tError acquiring assertion: <Error Domain=RBSAssertionErrorDomain Code=2 \"Assertion's invalidation time is in the past\" UserInfo={IgnoreOnReconnect=true, NSLocalizedFailureReason=Assertion's invalidation time is in the past}>\r\ndefault\t15:56:03.818618+0200\tbackboardd\tLcurrent=427.4086 Lr=1.4613 DR=200.0000 factor=0.0000\r\ndefault\t15:56:03.819180+0200\trunningboardd\tAcquiring assertion targeting [daemon<com.apple.DragUI.druid>:433] from originator [daemon<com.apple.SpringBoard>:59] with description <RBSAssertionDescriptor| \"com.apple.UIKit.KeyboardManagement.message\" ID:33-59-5495 target:433 attributes:[\r\n\t<RBSLegacyAttribute| requestedReason:FinishTask reason:FinishTask flags:( AllowIdleSleep PreventTaskSuspend PreventTaskThrottleDown PreventThrottleDownUI )>,\r\n\t<RBSAcquisitionCompletionAttribute| policy:AfterValidation>\r\n\t]>\r\ndefault\t15:56:03.819403+0200\trunningboardd\tAssertion 33-59-5495 (target:[daemon<com.apple.DragUI.druid>:433]) will be created as active as no start-time-defining assertions exist\r\nerror\t15:56:03.819806+0200\tSpringBoard\t[<_UIKeyboardArbiterHandle: 0x283d0f660; PID 433: (null) <(null)>; hosting PIDs {(\r\n)}; level 0.000000; active NO [wants NO]; suppression 0; iav 0.000000; on screen NO>] could not take process assertion\r\ndefault\t15:56:03.827506+0200\tbackboardd\tLcurrent=427.4086 Lr=1.4621 DR=200.0000 factor=0.0000\r\ndefault\t15:56:03.863395+0200\trunningboardd\tInvalidating assertion 33-59-5492 (target:[daemon<com.apple.SpringBoard>:59](UIScene:com.apple.frontboard.systemappservices::com.apple.UIKit.remote-keyboard)) from originator [daemon<com.apple.SpringBoard>:59]\r\ndefault\t15:56:03.863616+0200\trunningboardd\tAcquiring assertion targeting [daemon<com.apple.SpringBoard>:59](UIScene:com.apple.frontboard.systemappservices::com.apple.UIKit.remote-keyboard) from originator [daemon<com.apple.SpringBoard>:59] with description <RBSAssertionDescriptor| \"injecting inherited from \"UIScene:com.apple.frontboard.systemappservices::com.apple.springboard\" to 59<UIScene:com.apple.frontboard.systemappservices::com.apple.UIKit.remote-keyboard>\" ID:33-59-5496 target:59<UIScene:com.apple.frontboard.systemappservices::com.apple.UIKit.remote-keyboard> attributes:[\r\n\t<RBSHereditaryGrant| endowmentNamespace:com.apple.boardservices.endpoint-injection UIScene:com.apple.frontboard.systemappservices::com.apple.springboard>,\r\n\t<RBSHereditaryGrant| endowmentNamespace:com.apple.frontboard.visibility UIScene:com.apple.frontboard.systemappservices::com.apple.springboard>\r\n\t]>\r\ndefault\t15:56:03.863675+0200\trunningboardd\tAssertion 33-59-5496 (target:[daemon<com.apple.SpringBoard>:59](UIScene:com.apple.frontboard.systemappservices::com.apple.UIKit.remote-keyboard)) will be created as active\r\ndefault\t15:56:03.866796+0200\trunningboardd\tFinished acquiring assertion 33-59-5496 (target:[daemon<com.apple.SpringBoard>:59](UIScene:com.apple.frontboard.systemappservices::com.apple.UIKit.remote-keyboard))\r\ndefault\t15:56:03.867031+0200\tbackboardd\tLcurrent=427.4086 Lr=1.4631 DR=200.0000 factor=0.0000\r\ndefault\t15:56:03.867623+0200\tTestApp\t-[SOAuthorization init]  on <private>\r\ndefault\t15:56:03.867693+0200\tTestApp\t-[SOAuthorizationCore init]  on <private>\r\ndefault\t15:56:03.867777+0200\tTestApp\t<SOServiceConnection: 0x283385a20>: new XPC connection\r\ndefault\t15:56:03.872713+0200\tbackboardd\tLcurrent=427.4086 Lr=1.4637 DR=200.0000 factor=0.0000\r\ndefault\t15:56:03.875652+0200\tTestApp\t-[SOAuthorization init]  on <private>\r\ndefault\t15:56:03.875737+0200\tTestApp\t-[SOAuthorizationCore init]  on <private>\r\ndefault\t15:56:03.875817+0200\tTestApp\t<SOServiceConnection: 0x28335ece0>: new XPC connection\r\ndefault\t15:56:03.878194+0200\tbackboardd\tLcurrent=427.4086 Lr=1.4646 DR=200.0000 factor=0.0000\r\ndefault\t15:56:03.884666+0200\tTestApp\t-[SOAuthorization init]  on <private>\r\ndefault\t15:56:03.884779+0200\tTestApp\t-[SOAuthorizationCore init]  on <private>\r\ndefault\t15:56:03.884888+0200\tTestApp\t<SOServiceConnection: 0x2833511c0>: new XPC connection\r\ndefault\t15:56:03.885370+0200\tTestApp\t-[SOAuthorization init]  on <privatedefault\t15:56:03.885441+0200\tTestApp\t-[SOAuthorizationCore init]  on <private>\r\n```"
    email: duszenko@gmail.com
    modified: "2020-09-18T12:10:47.288498Z"
    number: "8688587"
    number_intvalue: 8688587
    originated: Sep 14,2020
    parent_number: '&{NULL_VALUE}'
    product: iOS
    product_version: iOS14
    reproducible: Always
    resolved: Open
    status: Open
    title: On IOS14 observed lag with external keyboard
