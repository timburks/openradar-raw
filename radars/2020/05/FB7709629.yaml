apiVersion: openapi/v1alpha1
kind: Radar
metadata:
    name: FB7709629
    labels:
        datastore_id: "4984008718942208"
data:
    classification: Incorrect/Unexpected Behavior
    created: "2020-05-21T14:37:55.783215Z"
    description: "We've heard from a number of our users who have blamed our apps for breaking Safari's Extensions preferences panel in macOS Catalina. Paraphrased, they tell us: \"While running one of your apps, I am unable to activate extensions in Safari's preferences panel. The button merely flashes quickly, but nothing happens. I can disable any already-running extension, but not enable any disabled extensions. Please fix your app!\"\r\n\r\nAfter investigating, we've replicated the issue, and found two of our apps, Displaperture and Keymou, that seem to cause the problem.\r\n\r\nDisplaperture: https://manytricks.com/displaperture (free)\r\nKeymou: https://manytricks.com/keymou (free trial)\r\n\r\nBoth apps use an invisible window—Displaperture all the time, and Keymou when it's operating in a certain mode. It's our theory that Safari is actively blocking extensions from being enabled when an app with an invisible window is running, for fear that it's malware that may be trying to enable a malicious extension. We have no idea if that theory is correct.\r\n\r\nIf this is intentional, we believe Safari should let the user know what's happening. As it works now, the user has to go through a time-consuming process of elimination to identify the app that's causing the problem.\r\n\r\nOnce they identify it, they email us (or other developer) and blame us for the issue. Unfortunately, there's nothing we can do to fix this. A simple dialog explaining what's happening would help the users (no wasted time, understanding what's going on) and developers (no wasted time, no upset emails from users blaming us for things we cannot control).\r\n\r\nIf this behavior *isn't* intentional, then consider this a bug report: You cannot enable Safari extensions when an app that uses a full-screen invisible window is running. \r\n\r\nThe attached movie shows the problem when using Keymou, and here are the steps to reproduce the situation yourself:\r\n\r\n1) Install Keymou (it has a free trial mode, or you can get a free Apple license here: https://manytricks.com/buy/keymou/aquaticprime/nfrgenerator__apple.com.php), and set its preferences (in Advanced) to run as a menu bar app. (This is not required, it just makes this simpler.) Grant permissions as requested by macOS.\r\n\r\n2) Open Safari's preferences and switch to the Extensions tab.\r\n\r\n3) Verify the Keymou is running, and that you can enable and disable extensions as you wish.\r\n\r\n4) Click on Keymou's menu bar icon and select Highlight Mouse Permanently.\r\n\r\n5) Click to a different tab of Safari's preferences, like Websites or Privacy or Advanced—this will work.\r\n\r\n6) Switch back to the Extensions section—this will also work.\r\n\r\n7) Disable a running extension—this will also work.\r\n\r\n8) Try to enable any disabled extension—this will *not* work.\r\n\r\n9) Disable Keymou's Highlight Mouse Permanently feature.\r\n\r\n10) Return to Safari, and extensions can be enabled and disabled at will.\r\n\r\nNo error messages are ever shown to the user, and it's not obvious why the buttons can't be clicked. With our other app, Displaperture, the problem is even worse, because the invisible window is always there. (Displaperture rounds the corners of the Mac's screen by way of an invisible window.) In the case of Displaperture, it's not like there's a feature the user enabled that suddenly made the buttons not work, as with Keymou.\r\n\r\nAnd to further confuse users, only *some* buttons (those in the Extensions panel) don't work, while others do. And there's absolutely no feedback given about this, which makes it impossible for the user to figure out what's going on.\r\n\r\nWhat should happen: A user is clicking a button, and it should reflect that action. This is not a synthetic mouse click, it's a user clicking a mouse on a button, and nothing is happening. If this is a security feature, then the user should be informed as to what's going on, much like what happens when an app asks for Accessibility access. We're not suggesting users should necessarily be in control of this process, but they should at least know why it's happening, again assuming it's intentional."
    email: manytricks.rg@gmail.com
    modified: "2020-05-21T14:37:55.783383Z"
    number: FB7709629
    number_intvalue: 7709629
    originated: 5/21/2020
    parent_number: '&{NULL_VALUE}'
    product: Safari
    product_version: "13.1"
    reproducible: Always
    resolved: ""
    status: Open
    title: Safari's Extensions prefs panel behavior can confuse users
